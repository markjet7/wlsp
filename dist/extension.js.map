{"version":3,"sources":[".././node_modules/duplexer/index.js",".././node_modules/event-stream/index.js",".././node_modules/find-free-port/index.js",".././node_modules/from/index.js",".././node_modules/map-stream/index.js",".././node_modules/pause-stream/index.js",".././node_modules/ps-tree/index.js",".././node_modules/split/index.js",".././node_modules/stream-combiner/index.js",".././node_modules/through/index.js",".././src/extension.ts",".././node_modules/vscode-jsonrpc/lib/cancellation.js",".././node_modules/vscode-jsonrpc/lib/events.js",".././node_modules/vscode-jsonrpc/lib/is.js",".././node_modules/vscode-jsonrpc/lib/linkedMap.js",".././node_modules/vscode-jsonrpc/lib/main.js",".././node_modules/vscode-jsonrpc/lib/messageReader.js",".././node_modules/vscode-jsonrpc/lib/messageWriter.js",".././node_modules/vscode-jsonrpc/lib/messages.js",".././node_modules/vscode-jsonrpc/lib/pipeSupport.js",".././node_modules/vscode-jsonrpc/lib/socketSupport.js",".././node_modules/vscode-languageclient/lib/callHierarchy.proposed.js",".././node_modules/vscode-languageclient/lib/client.js",".././node_modules/vscode-languageclient/lib/codeConverter.js",".././node_modules/vscode-languageclient/lib/colorProvider.js",".././node_modules/vscode-languageclient/lib/configuration.js",".././node_modules/vscode-languageclient/lib/declaration.js",".././node_modules/vscode-languageclient/lib/foldingRange.js",".././node_modules/vscode-languageclient/lib/implementation.js",".././node_modules/vscode-languageclient/lib/main.js",".././node_modules/vscode-languageclient/lib/progress.js",".././node_modules/vscode-languageclient/lib/progressPart.js",".././node_modules/vscode-languageclient/lib/protocolCodeLens.js",".././node_modules/vscode-languageclient/lib/protocolCompletionItem.js",".././node_modules/vscode-languageclient/lib/protocolConverter.js",".././node_modules/vscode-languageclient/lib/protocolDocumentLink.js",".././node_modules/vscode-languageclient/lib/selectionRange.js",".././node_modules/vscode-languageclient/lib/semanticTokens.proposed.js",".././node_modules/vscode-languageclient/lib/typeDefinition.js",".././node_modules/vscode-languageclient/lib/utils/async.js",".././node_modules/vscode-languageclient/lib/utils/is.js",".././node_modules/vscode-languageclient/lib/utils/processes.js",".././node_modules/vscode-languageclient/lib/utils/uuid.js",".././node_modules/vscode-languageclient/lib/workspaceFolders.js",".././node_modules/vscode-languageclient/node_modules/semver/semver.js",".././node_modules/vscode-languageserver-protocol/lib/main.js",".././node_modules/vscode-languageserver-protocol/lib/messages.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.callHierarchy.proposed.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.colorProvider.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.configuration.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.declaration.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.foldingRange.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.implementation.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.progress.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.selectionRange.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.sematicTokens.proposed.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.typeDefinition.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.workspaceFolders.js",".././node_modules/vscode-languageserver-protocol/lib/utils/is.js",".././node_modules/vscode-languageserver-types/lib/esm/main.js","../external \"buffer\"","../external \"child_process\"","../external \"crypto\"","../external \"fs\"","../external \"net\"","../external \"os\"","../external \"path\"","../external \"stream\"","../external \"string_decoder\"","../external \"vscode\"","../webpack/bootstrap","../webpack/runtime/define property getters","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/make namespace object","../webpack/startup"],"names":["Stream","writeMethods","readMethods","readEvents","slice","Array","prototype","forEach","arr","fn","i","length","module","exports","writer","reader","stream","ended","methodName","apply","arguments","emit","func","on","args","call","unshift","reemit","writable","readable","err","es","through","from","duplex","map","pause","split","pipeline","immediately","global","setImmediate","process","nextTick","connect","pipe","concat","merge","toMerge","setMaxListeners","endCount","e","end","write","data","this","destroy","writeArray","done","Error","a","array","isDone","l","push","readArray","paused","isArray","resume","continueOnError","reading","get","mapSync","sync","mappedData","undefined","log","name","console","error","child","stdin","stdout","parse","options","emitError","obj","JSON","toString","stringify","Buffer","isBuffer","replace","to","join","str","wait","first","callback","body","pipeable","net","findFreePort","beg","rest","p","cb","ip","cnt","test","retcb","res","probe","port","s","createConnection","host","onprobe","nextPort","Promise","resolve","reject","ports","source","source_index","source_len","next","started","mapper","opts","self","inputs","outputs","destroyed","lastWritten","inNext","errorEventName","failures","writeQueue","queueData","number","nextToWrite","hasOwnProperty","dataToWrite","written","input","spawn","normalizeHeader","platform","pid","processLister","headers","line","columns","trim","row","h","shift","ps","parents","children","proc","PPID","PID","Decoder","matcher","decoder","soFar","maxLength","piece","queue","buffer","pieces","pop","b","duplexer","streams","last","thepipe","recurse","onerror","_ended","drain","_end","autoDestroy","fp","psTree","fs","wolframClient","wolframKernelClient","wolframStatusBar","vscode","window","createStatusBarItem","StatusBarAlignment","Left","command","text","show","PORT","kernelPORT","kernelStatusBar","color","theContext","theDisposible","theKernelDisposible","wolframKernel","outputChannel","createOutputChannel","lspPath","kernelPath","randomPort","Math","round","random","workspace","onDidChangeTextDocument","event","editor","activeTextEditor","decorations","position","selection","active","uri","document","workspaceDecorations","Object","keys","parseInt","setDecorations","variableDecorationType","onDidOpenTextDocument","didOpenTextDocument","onDidSaveTextDocument","onDidChangeWindowState","state","focused","onReady","then","ready","sendNotification","commands","registerCommand","runInWolfram","runExpression","sel","outputPosition","Position","r","Selection","character","revealRange","TextEditorRevealType","Default","sendRequest","range","textDocument","print","result","Range","updateResults","startWolframTerminal","activeTerminal","d","selections","sendText","getText","start","showOutput","txt","x","url","createWebviewPanel","enableScripts","retainContextWhenHidden","webview","html","appendLine","showInformationMessage","stop","cp","exec","wolfram","stderr","kill","subscriptions","freep","loadwolframKernel","success","setTimeout","dispose","loadWolframKernelClient","loadwolfram","loadWolframServer","wolframVersionText","lines","newlines","edit","editbuilder","trimRight","context","asAbsolutePath","path","env","VSCODE_DEBUG_MODE","detached","once","message","showErrorMessage","clientOptions","documentSelector","diagnosticCollectionName","LanguageClient","client","Socket","setKeepAlive","onNotification","onRunInWolfram","wolframBusy","updateDecorations","updateVarTable","moveCursor","wolframVersion","languageId","scheme","params","decorationLine","lineAt","lineNumber","printResults","lineCount","editBuilder","insert","visibleTextEditors","filter","variableTable","vars","index","updateOutputPanel","expression","outputPanel","tpid","ex","createTextEditorDecorationType","backgroundColor","light","ThemeColor","dark","editorDecorations","busy","cmd","activeWolframTerminal","createTerminal","outputColumn","viewColumn","visible","reveal","preserveFocus","localResourceRoots","Uri","file","extensionPath","Date","getTime","cspSource","onDidReceiveMessage","onDidDispose","out","readFileSync","k","postMessage","defineProperty","value","events_1","Is","CancellationToken","None","freeze","isCancellationRequested","onCancellationRequested","Event","Cancelled","is","candidate","boolean","shortcutEvent","handle","bind","clearTimeout","MutableToken","_isCancelled","_emitter","fire","Emitter","CancellationTokenSource","_token","cancel","Disposable","create","_disposable","CallbackList","bucket","_callbacks","_contexts","remove","foundCallbackWithDifferentContext","len","splice","ret","callbacks","contexts","_options","_event","listener","thisArgs","disposables","onFirstListenerAdd","isEmpty","add","_noop","onLastListenerRemove","invoke","string","String","Number","stringArray","every","elem","Touch","First","Last","LinkedMap","_map","Map","_head","_tail","_size","clear","key","has","item","touch","previous","addItemLast","addItemFirst","set","delete","removeItem","callbackfn","thisArg","current","__export","m","messages_1","RequestType","RequestType0","RequestType1","RequestType2","RequestType3","RequestType4","RequestType5","RequestType6","RequestType7","RequestType8","RequestType9","ResponseError","ErrorCodes","NotificationType","NotificationType0","NotificationType1","NotificationType2","NotificationType3","NotificationType4","NotificationType5","NotificationType6","NotificationType7","NotificationType8","NotificationType9","messageReader_1","MessageReader","StreamMessageReader","IPCMessageReader","SocketMessageReader","messageWriter_1","MessageWriter","StreamMessageWriter","IPCMessageWriter","SocketMessageWriter","cancellation_1","linkedMap_1","CancelNotification","ProgressNotification","Trace","TraceFormat","SetTraceNotification","LogTraceNotification","ConnectionErrors","ConnectionState","type","ProgressType","NullLogger","warn","info","fromString","Off","toLowerCase","Messages","Verbose","Text","ConnectionError","code","super","setPrototypeOf","_createMessageConnection","messageReader","messageWriter","logger","strategy","sequenceNumber","notificationSquenceNumber","unknownResponseSquenceNumber","version","starRequestHandler","starNotificationHandler","timer","tracer","requestHandlers","notificationHandlers","progressHandlers","messageQueue","responsePromises","requestTokens","trace","traceFormat","New","errorEmitter","closeEmitter","unhandledNotificationEmitter","unhandledProgressEmitter","disposeEmitter","createRequestQueueKey","id","cancelUndispatched","_message","isListening","Listening","isClosed","Closed","isDisposed","Disposed","closeHandler","triggerMessageQueue","size","isRequestMessage","requestMessage","reply","resultOrError","method","startTime","jsonrpc","toJson","traceSendingResponse","replyError","logLSPMessage","traceReceivedRequest","requestHandler","element","handler","now","cancellationSource","tokenKey","handlerResult","numberOfParams","token","promise","InternalError","replySuccess","MethodNotFound","handleRequest","isNotificationMessage","notificationHandler","traceReceivedNotification","handleNotification","isResponseMessage","responseMessage","responsePromise","timerStart","traceReceivedResponse","handleResponse","responseHandler","handleInvalidMessage","processMessageQueue","onClose","onError","toCancel","response","addMessageToQueue","lspMessage","isLSPMessage","timestamp","throwIfClosedOrDisposed","undefinedToNull","param","computeMessageParams","connection","messageParams","notificationMessage","traceSendingNotification","onProgress","_type","sendProgress","onUnhandledProgress","throwIfNotListening","traceSendingRequest","MessageWriteError","onRequest","_value","_tracer","sendNotificationOrTraceOptions","_sendNotification","_traceFormat","onUnhandledNotification","onDispose","listen","AlreadyListening","throwIfListening","inspect","verbose","ConnectionStrategy","createMessageConnection","output","read","isMessageWriter","DefaultSize","CR","LF","MessageBuffer","encoding","allocUnsafe","chunk","toAppend","bufferLen","byteLength","copy","newSize","ceil","header","indexOf","substr","nextStart","onPartialMessage","AbstractMessageReader","partialMessageEmitter","asError","_partialMessageTimeout","timeout","nextMessageLength","messageToken","partialMessageTimer","onData","fireError","fireClose","append","tryReadHeaders","contentLength","isNaN","msg","tryReadContent","setPartialMessageTimer","clearPartialMessageTimer","json","firePartialMessage","waitingTime","eventEmitter","socket","ContentLength","CRLF","AbstractMessageWriter","count","errorCount","sending","doWriteMessage","send","handleError","ParseError","InvalidRequest","InvalidParams","serverErrorStart","serverErrorEnd","ServerNotInitialized","UnknownErrorCode","RequestCancelled","ContentModified","MessageReadError","AbstractMessageType","_method","_numberOfParams","_","path_1","os_1","crypto_1","net_1","generateRandomPipeName","randomSuffix","randomBytes","tmpdir","createClientPipeTransport","pipeName","connectResolve","connected","_reject","server","createServer","close","removeListener","onConnected","createServerPipeTransport","createClientSocketTransport","createServerSocketTransport","vscode_1","vscode_languageserver_protocol_1","client_1","ensure","target","protocol2code","code2protocol","asCallHierarchyItem","converter","CallHierarchyItem","asSymbolKind","kind","detail","asUri","asRange","selectionRange","tags","asSymbolTags","asCallHierarchyIncomingCall","CallHierarchyIncomingCall","asRanges","fromRanges","asCallHierarchyOutgoingCall","CallHierarchyOutgoingCall","asCallHierarchyItems","items","asCallHierarchyIncomingCalls","asCallHierarchyOutgoingCalls","CallHierarchyProvider","middleware","prepareCallHierarchy","code2ProtocolConverter","asTextDocumentPositionParams","Proposed","CallHierarchyPrepareRequest","protocol2CodeConverter","logFailedRequest","provideCallHierarchyIncomingCalls","CallHierarchyIncomingCallsRequest","provideCallHierarchyOutgoingCalls","CallHierarchyOutgoingCallsRequest","provideCallHierarchyOutgingCalls","CallHierarchyFeature","TextDocumentFeature","cap","dynamicRegistration","capabilities","getRegistration","callHierarchyProvider","register","messages","registerOptions","_client","provider","languages","registerCallHierarchyProvider","c2p","p2c","async_1","UUID","progressPart_1","ConsoleLogger","ErrorAction","CloseAction","RevealOutputChannelOn","State","ClientState","DefaultErrorHandler","restarts","_error","Continue","Shutdown","Restart","DoNotRestart","SupportedSymbolKinds","SymbolKind","File","Module","Namespace","Package","Class","Method","Property","Field","Constructor","Enum","Interface","Function","Variable","Constant","Boolean","Key","Null","EnumMember","Struct","Operator","TypeParameter","SupportedCompletionItemKinds","CompletionItemKind","Unit","Value","Keyword","Snippet","Color","Reference","Folder","DynamicFeature","unregister","DocumentNotifiactions","_middleware","_createParams","_selectorFilter","_selectors","selectors","selector","match","_listener","values","notificationSent","_data","DidOpenTextDocumentFeature","_syncedDocuments","DidOpenTextDocumentNotification","didOpen","asOpenTextDocumentParams","textDocumentFilter","textDocumentSyncOptions","resolvedTextDocumentSync","openClose","generateUuid","textDocuments","DidCloseTextDocumentFeature","onDidCloseTextDocument","DidCloseTextDocumentNotification","didClose","asCloseTextDocumentParams","DidChangeTextDocumentFeature","_changeData","_forcingDelivery","DidChangeTextDocumentNotification","change","TextDocumentSyncKind","assign","syncKind","contentChanges","changeData","Incremental","asChangeTextDocumentParams","didChange","Full","_changeDelayer","forceDelivery","delayer","trigger","Delayer","WillSaveFeature","onWillSaveTextDocument","WillSaveTextDocumentNotification","willSave","willSaveEvent","asWillSaveTextDocumentParams","WillSaveWaitUntilFeature","WillSaveTextDocumentWaitUntilRequest","willSaveWaitUntil","edits","vEdits","asTextEdits","waitUntil","DidSaveTextDocumentFeature","DidSaveTextDocumentNotification","didSave","asSaveTextDocumentParams","_includeText","save","includeText","FileSystemWatcherFeature","_notifyFileEvent","_watchers","DidChangeWatchedFilesNotification","_capabilities","_documentSelector","watchers","disposeables","watcher","globPattern","watchCreate","watchChange","watchDelete","WatchKind","Create","Change","Delete","fileSystemWatcher","createFileSystemWatcher","hookListeners","fileSystemWatchers","listeners","onDidCreate","resource","FileChangeType","Created","onDidChange","Changed","onDidDelete","Deleted","disposable","_registrations","registration","registerLanguageProvider","capability","TextDocumentRegistrationOptions","StaticRegistrationOptions","hasId","WorkDoneProgressOptions","CompletionItemFeature","CompletionRequest","capabilites","completion","contextSupport","completionItem","snippetSupport","commitCharactersSupport","documentationFormat","MarkupKind","Markdown","PlainText","deprecatedSupport","preselectSupport","tagSupport","valueSet","CompletionItemTag","Deprecated","completionItemKind","getRegistrationOptions","completionProvider","triggerCharacters","provideCompletionItems","asCompletionParams","asCompletionResult","provideCompletionItem","resolveCompletionItem","resolveProvider","CompletionResolveRequest","asCompletionItem","registerCompletionItemProvider","HoverFeature","HoverRequest","hoverCapability","contentFormat","hoverProvider","provideHover","asHover","registerHoverProvider","SignatureHelpFeature","SignatureHelpRequest","config","signatureInformation","parameterInformation","labelOffsetSupport","signatureHelpProvider","provideSignatureHelp","providerSignatureHelp","asSignatureHelpParams","asSignatureHelp","retriggerCharacters","registerSignatureHelpProvider","metaData","DefinitionFeature","DefinitionRequest","definitionSupport","linkSupport","definitionProvider","provideDefinition","asDefinitionResult","registerDefinitionProvider","ReferencesFeature","ReferencesRequest","referencesProvider","provideReferences","_providerReferences","asReferenceParams","asReferences","registerReferenceProvider","DocumentHighlightFeature","DocumentHighlightRequest","documentHighlightProvider","provideDocumentHighlights","_provideDocumentHighlights","asDocumentHighlights","registerDocumentHighlightProvider","DocumentSymbolFeature","DocumentSymbolRequest","symbolCapabilities","symbolKind","hierarchicalDocumentSymbolSupport","documentSymbolProvider","provideDocumentSymbols","_provideDocumentSymbols","asDocumentSymbolParams","DocumentSymbol","asDocumentSymbols","asSymbolInformations","registerDocumentSymbolProvider","WorkspaceSymbolFeature","WorkspaceSymbolRequest","workspaceSymbolProvider","workDoneProgress","provideWorkspaceSymbols","query","registerWorkspaceSymbolProvider","CodeActionFeature","CodeActionRequest","isPreferredSupport","codeActionLiteralSupport","codeActionKind","CodeActionKind","Empty","QuickFix","Refactor","RefactorExtract","RefactorInline","RefactorRewrite","Source","SourceOrganizeImports","codeActionProvider","provideCodeActions","_provideCodeActions","asTextDocumentIdentifier","asCodeActionContext","Command","asCommand","asCodeAction","registerCodeActionsProvider","codeActionKinds","providedCodeActionKinds","asCodeActionKinds","CodeLensFeature","CodeLensRequest","codeLensProvider","provideCodeLenses","asCodeLensParams","asCodeLenses","resolveCodeLens","codeLens","CodeLensResolveRequest","asCodeLens","registerCodeLensProvider","DocumentFormattingFeature","DocumentFormattingRequest","documentFormattingProvider","provideDocumentFormattingEdits","asFormattingOptions","registerDocumentFormattingEditProvider","DocumentRangeFormattingFeature","DocumentRangeFormattingRequest","documentRangeFormattingProvider","provideDocumentRangeFormattingEdits","registerDocumentRangeFormattingEditProvider","DocumentOnTypeFormattingFeature","DocumentOnTypeFormattingRequest","documentOnTypeFormattingProvider","provideOnTypeFormattingEdits","ch","asPosition","moreTriggerCharacter","registerOnTypeFormattingEditProvider","firstTriggerCharacter","RenameFeature","RenameRequest","rename","prepareSupport","renameProvider","prepareProvider","provideRenameEdits","newName","asWorkspaceEdit","prepareRename","PrepareRenameRequest","placeholder","registerRenameProvider","DocumentLinkFeature","DocumentLinkRequest","documentLinkCapabilities","tooltipSupport","documentLinkProvider","provideDocumentLinks","asDocumentLinkParams","asDocumentLinks","resolveDocumentLink","link","DocumentLinkResolveRequest","asDocumentLink","registerDocumentLinkProvider","ConfigurationFeature","_listeners","DidChangeConfigurationNotification","section","synchronize","configurationSection","onDidChangeConfiguration","sections","some","affectsConfiguration","didChangeConfiguration","settings","extractSettingsInformation","getMiddleware","ensurePath","workspaceFolder","getConfiguration","ExecuteCommandFeature","_commands","ExecuteCommandRequest","executeCommandProvider","executeCommand","MessageTransports","OnReady","_resolve","_used","BaseLanguageClient","_features","_method2Message","_dynamicFeatures","_id","_name","_clientOptions","outputChannelName","revealOutputChannelOn","stdioEncoding","initializationOptions","initializationFailedHandler","progressOnInitialization","errorHandler","uriConverters","Initial","_connectionPromise","_resolvedConnection","_initializeResult","_outputChannel","_disposeOutputChannel","_traceOutputChannel","traceOutputChannel","_providers","_diagnostics","_fileEvents","_fileEventDelayer","_onReady","_onReadyCallbacks","_onStop","_telemetryEmitter","_stateChangeEmitter","messageOrDataObject","logTrace","logObjectTrace","_c2p","createConverter","code2Protocol","_p2c","protocol2Code","registerBuiltinFeatures","_state","oldState","getPublicState","newState","Running","Starting","Stopped","isConnectionActive","forceDocumentSync","_trace","resolveConnection","responseError","stack","showNotification","toLocaleTimeString","data2String","Info","showNotificationMessage","Warn","Stopping","isUsed","createDiagnosticCollection","onLogMessage","MessageType","Warning","onShowMessage","showWarningMessage","ShowMessageRequest","messageFunc","actions","onTelemetry","initialize","StartFailed","needsStop","refreshTrace","initOption","rootPath","fsPath","_clientGetRootPath","initParams","processId","clientInfo","rootUri","computeClientCapabilities","workspaceFolders","fillInitializeParams","part","ProgressPart","workDoneToken","doInitialize","textDocumentSync","onDiagnostics","handleDiagnostics","RegistrationRequest","handleRegistrationRequest","UnregistrationRequest","handleUnregistrationRequest","ApplyWorkspaceEditRequest","handleApplyWorkspaceEdit","InitializedNotification","hookFileEvents","hookConfigurationChanged","initializeFeatures","retry","title","folders","folder","cleanUp","shutdown","exit","cleanUpChannel","channel","diagnostics","_a","_b","didChangeWatchedFile","didChangeWatchedFiles","changes","workSpaceMiddleware","asDiagnostics","setDiagnostics","handleConnectionError","handleConnectionClosed","createMessageTransports","transports","createProtocolConnection","defaultTraceOptions","InitializeRequest","ShutdownRequest","ExitNotification","LogMessageNotification","ShowMessageNotification","TelemetryEventNotification","didChangeTextDocument","didCloseTextDocument","didSaveTextDocument","PublishDiagnosticsNotification","action","closed","traceConfig","_connection","fileEvents","registerRaw","features","feature","registerFeature","request","notifyFileEvent","applyEdit","workspaceEdit","documentChanges","resourceOperations","ResourceOperationKind","Rename","failureHandling","FailureHandlingKind","TextOnlyTransactional","relatedInformation","versionSupport","DiagnosticTag","Unnecessary","fillClientCapabilities","registrations","unregistration","unregisterations","openTextDocuments","versionMismatch","TextDocumentEdit","applied","asPromise","proto","protocolCompletionItem_1","protocolCodeLens_1","protocolDocumentLink_1","uriConverter","_uriConverter","asVersionedTextDocumentIdentifier","asTextDocumentSaveReason","reason","TextDocumentSaveReason","Manual","AfterDelay","FocusOut","asCompletionTriggerKind","triggerKind","CompletionTriggerKind","TriggerCharacter","TriggerForIncompleteCompletions","Invoked","asSignatureHelpTriggerKind","SignatureHelpTriggerKind","Invoke","ContentChange","asParameterInformation","label","asSignatureInformation","parameters","asWorkerPosition","inserting","replacing","isInsertReplace","asLocation","Location","asDiagnosticSeverity","DiagnosticSeverity","Information","Hint","asDiagnosticTag","tag","asRelatedInformation","location","asDiagnostic","Diagnostic","severity","converted","asDiagnosticTags","asCompletionItemTag","asTextEdit","newText","asSymbolTag","arg","isTextDocument","isTextDocumentChangeEvent","rangeLength","includeContent","triggerCharacter","isRetrigger","activeSignatureHelp","signatures","activeSignature","activeParameter","asPositions","protocolItem","default","original","documentation","format","asDocumentation","filterText","InsertTextFormat","textEdit","insertText","SnippetString","insertTextFormat","fromEdit","fillPrimaryInsertText","originalItemKind","sortText","additionalTextEdits","commitCharacters","preselect","asCompletionItemTags","deprecated","includeDeclaration","only","CodeActionContext","CodeLens","tabSize","insertSpaces","DocumentLink","tooltip","ColorProviderFeature","DocumentColorRequest","colorProvider","provideColorPresentations","requestParams","ColorPresentationRequest","asColorPresentations","provideDocumentColors","asColorInformations","registerColorProvider","red","green","blue","alpha","colorInformation","ci","ColorInformation","asColor","colorPresentations","presentation","ColorPresentation","configuration","ConfigurationRequest","scopeUri","lastIndexOf","DeclarationFeature","DeclarationRequest","declarationSupport","declarationProvider","provideDeclaration","asDeclarationResult","registerDeclarationProvider","FoldingRangeFeature","FoldingRangeRequest","rangeLimit","lineFoldingOnly","foldingRangeProvider","provideFoldingRanges","asFoldingRanges","registerFoldingRangeProvider","FoldingRangeKind","Comment","Imports","Region","foldingRanges","FoldingRange","startLine","endLine","asFoldingRangeKind","ImplementationFeature","ImplementationRequest","implementationSupport","implementationProvider","provideImplementation","registerImplementationProvider","SemVer","colorProvider_1","configuration_1","implementation_1","typeDefinition_1","workspaceFolders_1","foldingRange_1","declaration_1","selectionRange_1","progress_1","callHierarchy_proposed_1","semanticTokens_proposed_1","processes_1","Executable","TransportKind","Transport","NodeModule","StreamInfo","ChildProcessInfo","ProposedFeatures","isSocket","arg1","arg2","arg3","arg4","arg5","serverOptions","forceDebug","_serverOptions","_forceDebug","checkVersion","codeVersion","prerelease","satisfies","_serverProcess","toCheck","_isDetached","checkProcessDied","childProcess","terminate","getEnvironment","fork","debugStartWith","debugEquals","assertStdio","runDebug","run","debug","execArgv","startsWith","startedInDebugMode","_getServerWorkingDir","serverWorkingDir","node","transport","stdio","runtime","ipc","cwd","silent","sp","protocol","execOptions","serverProcess","registerFeatures","createAll","TypeDefinitionFeature","WorkspaceFoldersFeature","SelectionRangeFeature","ProgressFeature","_mainGetRootPath","lstat","stats","isDirectory","SettingMonitor","_setting","primary","enabled","needsStart","SemanticTokensFeature","WorkDoneProgressCreateRequest","_reported","WorkDoneProgress","begin","report","cancellable","ProgressLocation","Notification","Window","withProgress","async","progress","cancellationToken","_progress","_infinite","percentage","_cancellationToken","WorkDoneProgressCancelNotification","max","min","delta","increment","ProtocolCodeLens","ProtocolCompletionItem","CompletionItem","ls","CodeBlock","language","diagnostic","asDiagnosticRelatedInformation","information","DiagnosticRelatedInformation","MarkdownString","asCompletionInsertText","itemKind","TextEdit","asSignatureInformations","SignatureInformation","asParameterInformations","ParameterInformation","asLocationLink","targetUri","targetRange","targetSelectionRange","originSelectionRange","asLocationResult","LocationLink","asDocumentHighlight","DocumentHighlight","asDocumentHighlightKind","DocumentHighlightKind","Read","Write","asSymbolInformation","SymbolInformation","containerName","asDocumentSymbol","kindMapping","asCodeActionKind","parts","WorkspaceEdit","CreateFile","createFile","RenameFile","renameFile","oldUri","newUri","DeleteFile","deleteFile","asColorInformation","asColorPresentation","asFoldingRange","asSelectionRange","SelectionRange","parent","hover","Hover","appendCodeblock","appendMarkdown","appendText","asHoverContent","contents","list","CompletionList","isIncomplete","SignatureHelp","asCommands","CodeAction","isPreferred","asSelectionRanges","selectionRanges","ProtocolDocumentLink","SelectionRangeRequest","selectionRangeProvider","provideSelectionRanges","positions","ranges","registerSelectionRangeProvider","asSemanticTokensEdit","SemanticTokensEdit","deleteCount","Uint32Array","asSemanticTokens","SemanticTokens","resultId","asSemanticTokensEdits","SemanticTokensEdits","asLegend","SemanticTokensRequest","tokenTypes","SemanticTokenTypes","comment","keyword","regexp","operator","namespace","struct","class","interface","enum","typeParameter","function","member","macro","variable","parameter","property","tokenModifiers","SemanticTokenModifiers","declaration","static","abstract","readonly","semanticTokensProvider","documentProvider","provideDocumentSemanticTokens","provideDocumentSemanticTokensEdits","previousResultId","SemanticTokensEditsRequest","rangeProvider","provideDocumentRangeSemanticTokens","SemanticTokensRangeRequest","legend","registerDocumentSemanticTokensProvider","registerDocumentRangeSemanticTokensProvider","TypeDefinitionRequest","typeDefinitionSupport","typeDefinitionProvider","provideTypeDefinition","registerTypeDefinitionProvider","defaultDelay","completionPromise","onSuccess","task","delay","cancelTimeout","thenable","typedArray","check","resolved","isWindows","isMacintosh","isLinux","execFileSync","__dirname","spawnSync","ValueUUID","other","asHex","V4UUID","_randomHex","_oneOf","_timeHighBits","floor","_chars","v4","empty","_UUIDPattern","isUUID","access","arrayDiff","left","right","DidChangeWorkspaceFoldersNotification","initializeWithFolders","asProtocol","currentWorkspaceFolders","_initialFolders","WorkspaceFoldersRequest","removed","added","doSendEvent","addedFolders","removedFolders","onDidChangeWorkspaceFolders","didChangeWorkspaceFolders","sendInitialEvent","NODE_DEBUG","SEMVER_SPEC_VERSION","MAX_SAFE_INTEGER","re","src","t","tokens","R","tok","n","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","MAINVERSION","MAINVERSIONLOOSE","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","PRERELEASE","PRERELEASELOOSE","BUILDIDENTIFIER","BUILD","FULLPLAIN","FULL","LOOSEPLAIN","LOOSE","GTLT","XRANGEIDENTIFIERLOOSE","XRANGEIDENTIFIER","XRANGEPLAIN","XRANGEPLAINLOOSE","XRANGE","XRANGELOOSE","COERCE","COERCERTL","RegExp","LONETILDE","TILDETRIM","TILDE","TILDELOOSE","LONECARET","CARETTRIM","CARET","CARETLOOSE","COMPARATORLOOSE","COMPARATOR","COMPARATORTRIM","HYPHENRANGE","HYPHENRANGELOOSE","STAR","loose","includePrerelease","er","TypeError","raw","major","minor","patch","num","build","valid","v","clean","compare","compareMain","comparePre","compareIdentifiers","compareBuild","inc","release","identifier","diff","version1","version2","eq","v1","v2","prefix","defaultResult","numeric","anum","bnum","gt","lt","neq","gte","lte","cmp","op","Comparator","comp","semver","ANY","rcompareIdentifiers","compareLoose","versionA","versionB","rcompare","sort","rsort","parseRange","c","isSatisfiable","comparators","remainingComparators","testComparator","otherComparator","intersects","isX","hyphenReplace","$0","fM","fm","fpr","fb","tM","tm","tp","tpr","tb","testSet","allowed","outside","hilo","gtfn","ltefn","ltfn","ecomp","high","low","comparator","rangeTmp","sameDirectionIncreasing","sameDirectionDecreasing","sameSemVer","differentDirectionsInclusive","oppositeDirectionsLessThan","oppositeDirectionsGreaterThan","comps","hr","compRe","M","pr","replaceCaret","replaceCarets","replaceTilde","replaceTildes","gtlt","xM","xm","xp","anyX","replaceXRange","replaceXRanges","replaceStars","parseComparator","thisComparators","rangeComparators","thisComparator","rangeComparator","toComparators","maxSatisfying","versions","maxSV","rangeObj","minSatisfying","minSV","minVersion","minver","compver","validRange","ltr","gtr","parsed","r1","r2","coerce","rtl","lastIndex","vscode_jsonrpc_1","callHierarchy","st","ProtocolRequestType0","ProtocolRequestType","ProtocolNotificationType","ProtocolNotificationType0","resultType","protocol_implementation_1","protocol_typeDefinition_1","protocol_workspaceFolders_1","protocol_configuration_1","protocol_colorProvider_1","protocol_foldingRange_1","protocol_declaration_1","protocol_selectionRange_1","protocol_progress_1","DocumentFilter","DocumentSelector","pattern","Abort","Transactional","Undo","objectLiteral","hasWorkDoneProgress","InitializeError","unknownProtocolVersion","Log","one","two","three","four","defined","startCharacter","endCharacter","_i","del","VersionedTextDocumentIdentifier","overwrite","ignoreIfExists","recursive","ignoreIfNotExists","TextDocumentIdentifier","TextDocumentItem","MarkupContent","MarkedString","SymbolTag","FormattingOptions","TextEditChangeImpl","all","WorkspaceChange","_this","_textEditChanges","_workspaceEdit","textEditChange","enumerable","configurable","getTextEditChange","textDocumentEdit","checkDocumentChanges","fromPlainText","plainText","SourceFixAll","commandOrEdit","TextDocument","EOL","mergeSort","leftIdx","rightIdx","content","FullTextDocument","positionAt","offsetAt","applyEdits","sortedEdits","lastModifiedOffset","startOffset","endOffset","substring","_uri","_languageId","_version","_content","_lineOffsets","update","getLineOffsets","lineOffsets","isLineStart","charAt","offset","mid","lineOffset","nextLineOffset","require","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","definition","o","prop","Symbol","toStringTag","__webpack_exports__"],"mappings":"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","file":"extension.js","sourcesContent":["var Stream = require(\"stream\")\nvar writeMethods = [\"write\", \"end\", \"destroy\"]\nvar readMethods = [\"resume\", \"pause\"]\nvar readEvents = [\"data\", \"close\"]\nvar slice = Array.prototype.slice\n\nmodule.exports = duplex\n\nfunction forEach (arr, fn) {\n    if (arr.forEach) {\n        return arr.forEach(fn)\n    }\n\n    for (var i = 0; i < arr.length; i++) {\n        fn(arr[i], i)\n    }\n}\n\nfunction duplex(writer, reader) {\n    var stream = new Stream()\n    var ended = false\n\n    forEach(writeMethods, proxyWriter)\n\n    forEach(readMethods, proxyReader)\n\n    forEach(readEvents, proxyStream)\n\n    reader.on(\"end\", handleEnd)\n\n    writer.on(\"drain\", function() {\n      stream.emit(\"drain\")\n    })\n\n    writer.on(\"error\", reemit)\n    reader.on(\"error\", reemit)\n\n    stream.writable = writer.writable\n    stream.readable = reader.readable\n\n    return stream\n\n    function proxyWriter(methodName) {\n        stream[methodName] = method\n\n        function method() {\n            return writer[methodName].apply(writer, arguments)\n        }\n    }\n\n    function proxyReader(methodName) {\n        stream[methodName] = method\n\n        function method() {\n            stream.emit(methodName)\n            var func = reader[methodName]\n            if (func) {\n                return func.apply(reader, arguments)\n            }\n            reader.emit(methodName)\n        }\n    }\n\n    function proxyStream(methodName) {\n        reader.on(methodName, reemit)\n\n        function reemit() {\n            var args = slice.call(arguments)\n            args.unshift(methodName)\n            stream.emit.apply(stream, args)\n        }\n    }\n\n    function handleEnd() {\n        if (ended) {\n            return\n        }\n        ended = true\n        var args = slice.call(arguments)\n        args.unshift(\"end\")\n        stream.emit.apply(stream, args)\n    }\n\n    function reemit(err) {\n        stream.emit(\"error\", err)\n    }\n}\n","//filter will reemit the data if cb(err,pass) pass is truthy\n\n// reduce is more tricky\n// maybe we want to group the reductions or emit progress updates occasionally\n// the most basic reduce just emits one 'data' event after it has recieved 'end'\n\nvar Stream = require('stream').Stream\n  , es = exports\n  , through = require('through')\n  , from = require('from')\n  , duplex = require('duplexer')\n  , map = require('map-stream')\n  , pause = require('pause-stream')\n  , split = require('split')\n  , pipeline = require('stream-combiner')\n  , immediately = global.setImmediate || process.nextTick;\n\nes.Stream = Stream //re-export Stream from core\nes.through = through\nes.from = from\nes.duplex = duplex\nes.map = map\nes.pause = pause\nes.split = split\nes.pipeline = es.connect = es.pipe = pipeline\n// merge / concat\n//\n// combine multiple streams into a single stream.\n// will emit end only once\n\nes.concat = //actually this should be called concat\nes.merge = function (/*streams...*/) {\n  var toMerge = [].slice.call(arguments)\n  if (toMerge.length === 1 && (toMerge[0] instanceof Array)) {\n    toMerge = toMerge[0] //handle array as arguments object\n  }\n  var stream = new Stream()\n  stream.setMaxListeners(0) // allow adding more than 11 streams\n  var endCount = 0\n  stream.writable = stream.readable = true\n\n  if (toMerge.length) {\n    toMerge.forEach(function (e) {\n      e.pipe(stream, {end: false})\n      var ended = false\n      e.on('end', function () {\n        if(ended) return\n        ended = true\n        endCount ++\n        if(endCount == toMerge.length)\n          stream.emit('end')\n      })\n    })\n  } else {\n    process.nextTick(function () {\n      stream.emit('end')\n    })\n  }\n  \n  stream.write = function (data) {\n    this.emit('data', data)\n  }\n  stream.destroy = function () {\n    toMerge.forEach(function (e) {\n      if(e.destroy) e.destroy()\n    })\n  }\n  return stream\n}\n\n\n// writable stream, collects all events into an array\n// and calls back when 'end' occurs\n// mainly I'm using this to test the other functions\n\nes.writeArray = function (done) {\n  if ('function' !== typeof done)\n    throw new Error('function writeArray (done): done must be function')\n\n  var a = new Stream ()\n    , array = [], isDone = false\n  a.write = function (l) {\n    array.push(l)\n  }\n  a.end = function () {\n    isDone = true\n    done(null, array)\n  }\n  a.writable = true\n  a.readable = false\n  a.destroy = function () {\n    a.writable = a.readable = false\n    if(isDone) return\n    done(new Error('destroyed before end'), array)\n  }\n  return a\n}\n\n//return a Stream that reads the properties of an object\n//respecting pause() and resume()\n\nes.readArray = function (array) {\n  var stream = new Stream()\n    , i = 0\n    , paused = false\n    , ended = false\n\n  stream.readable = true\n  stream.writable = false\n\n  if(!Array.isArray(array))\n    throw new Error('event-stream.read expects an array')\n\n  stream.resume = function () {\n    if(ended) return\n    paused = false\n    var l = array.length\n    while(i < l && !paused && !ended) {\n      stream.emit('data', array[i++])\n    }\n    if(i == l && !ended)\n      ended = true, stream.readable = false, stream.emit('end')\n  }\n  process.nextTick(stream.resume)\n  stream.pause = function () {\n     paused = true\n  }\n  stream.destroy = function () {\n    ended = true\n    stream.emit('close')\n  }\n  return stream\n}\n\n//\n// readable (asyncFunction)\n// return a stream that calls an async function while the stream is not paused.\n//\n// the function must take: (count, callback) {...\n//\n\nes.readable =\nfunction (func, continueOnError) {\n  var stream = new Stream()\n    , i = 0\n    , paused = false\n    , ended = false\n    , reading = false\n\n  stream.readable = true\n  stream.writable = false\n\n  if('function' !== typeof func)\n    throw new Error('event-stream.readable expects async function')\n\n  stream.on('end', function () { ended = true })\n\n  function get (err, data) {\n\n    if(err) {\n      stream.emit('error', err)\n      if(!continueOnError) stream.emit('end')\n    } else if (arguments.length > 1)\n      stream.emit('data', data)\n\n    immediately(function () {\n      if(ended || paused || reading) return\n      try {\n        reading = true\n        func.call(stream, i++, function () {\n          reading = false\n          get.apply(null, arguments)\n        })\n      } catch (err) {\n        stream.emit('error', err)\n      }\n    })\n  }\n  stream.resume = function () {\n    paused = false\n    get()\n  }\n  process.nextTick(get)\n  stream.pause = function () {\n     paused = true\n  }\n  stream.destroy = function () {\n    stream.emit('end')\n    stream.emit('close')\n    ended = true\n  }\n  return stream\n}\n\n\n//\n// map sync\n//\n\nes.mapSync = function (sync) {\n  return es.through(function write(data) {\n    var mappedData\n    try {\n      mappedData = sync(data)\n    } catch (err) {\n      return this.emit('error', err)\n    }\n    if (mappedData !== undefined)\n      this.emit('data', mappedData)\n  })\n}\n\n//\n// log just print out what is coming through the stream, for debugging\n//\n\nes.log = function (name) {\n  return es.through(function (data) {\n    var args = [].slice.call(arguments)\n    if(name) console.error(name, data)\n    else     console.error(data)\n    this.emit('data', data)\n  })\n}\n\n\n//\n// child -- pipe through a child process\n//\n\nes.child = function (child) {\n\n  return es.duplex(child.stdin, child.stdout)\n\n}\n\n//\n// parse\n//\n// must be used after es.split() to ensure that each chunk represents a line\n// source.pipe(es.split()).pipe(es.parse())\n\nes.parse = function (options) {\n  var emitError = !!(options ? options.error : false)\n  return es.through(function (data) {\n    var obj\n    try {\n      if(data) //ignore empty lines\n        obj = JSON.parse(data.toString())\n    } catch (err) {\n      if (emitError)\n        return this.emit('error', err)\n      return console.error(err, 'attempting to parse:', data)\n    }\n    //ignore lines that where only whitespace.\n    if(obj !== undefined)\n      this.emit('data', obj)\n  })\n}\n//\n// stringify\n//\n\nes.stringify = function () {\n  var Buffer = require('buffer').Buffer\n  return es.mapSync(function (e){\n    return JSON.stringify(Buffer.isBuffer(e) ? e.toString() : e) + '\\n'\n  })\n}\n\n//\n// replace a string within a stream.\n//\n// warn: just concatenates the string and then does str.split().join().\n// probably not optimal.\n// for smallish responses, who cares?\n// I need this for shadow-npm so it's only relatively small json files.\n\nes.replace = function (from, to) {\n  return es.pipeline(es.split(from), es.join(to))\n}\n\n//\n// join chunks with a joiner. just like Array#join\n// also accepts a callback that is passed the chunks appended together\n// this is still supported for legacy reasons.\n//\n\nes.join = function (str) {\n\n  //legacy api\n  if('function' === typeof str)\n    return es.wait(str)\n\n  var first = true\n  return es.through(function (data) {\n    if(!first)\n      this.emit('data', str)\n    first = false\n    this.emit('data', data)\n    return true\n  })\n}\n\n\n//\n// wait. callback when 'end' is emitted, with all chunks appended as string.\n//\n\nes.wait = function (callback) {\n  var arr = []\n  return es.through(function (data) { arr.push(data) },\n    function () {\n      var body = Buffer.isBuffer(arr[0]) ? Buffer.concat(arr)\n        : arr.join('')\n      this.emit('data', body)\n      this.emit('end')\n      if(callback) callback(null, body)\n    })\n}\n\nes.pipeable = function () {\n  throw new Error('[EVENT-STREAM] es.pipeable is deprecated')\n}\n","const net = require(\"net\");\n\n// call method 1: (port, cb(err, freePort))\n// call method 2: (portBeg, portEnd, cb(err, freePort))\n// call method 3: (portBeg, host, cb(err, freePort))\n// call method 4: (portBeg, portEnd, host, cb(err, freePort))\n// call method 5: (portBeg, portEnd, host, howmany, cb(err, freePort1, freePort2, ...))\n\nfunction findFreePort(beg, ...rest){\n  const p = rest.slice(0, rest.length - 1), cb = rest[rest.length - 1];\n  let [end, ip, cnt] = Array.from(p);\n  if (!ip && end && !/^\\d+$/.test(end)) { // deal with method 3\n    ip = end;\n    end = 65534;\n  } else {\n    if (end == null) { end = 65534; }\n  }\n  if (cnt == null) { cnt = 1; }\n\n  const retcb = cb;\n  const res = [];\n  const probe = function(ip, port, cb){\n    const s = net.createConnection({port: port, host: ip})\n    s.on('connect', function(){ s.end(); cb(null, port + 1); });\n    s.on('error', err=> { cb(port); });  // can't connect, port is available\n  };\n  var onprobe = function(port, nextPort){\n    if (port) {\n      res.push(port);\n      if (res.length >= cnt) {\n        retcb(null, ...res)\n      } else {\n        setImmediate(()=> probe(ip, port+1, onprobe));\n      }\n    } else {\n      if (nextPort>=end) {\n        retcb(new Error(\"No available ports\"));\n      } else {\n        setImmediate(()=> probe(ip, nextPort, onprobe));\n      }\n    }\n  };\n  return probe(ip, beg, onprobe);\n};\n\nfunction findFreePortPmfy(beg, ...rest) {\n  const last = rest[rest.length - 1];\n  if (typeof last === 'function') {\n    findFreePort(beg, ...rest);\n  } else {\n    return new Promise((resolve, reject) => {\n      findFreePort(beg, ...rest, (err, ...ports) => {\n        if (err) reject(err)\n        else resolve(ports);\n      })\n    })\n  }\n}\nmodule.exports = findFreePortPmfy","\n'use strict';\n\nvar Stream = require('stream')\n\n// from\n//\n// a stream that reads from an source.\n// source may be an array, or a function.\n// from handles pause behaviour for you.\n\nmodule.exports =\nfunction from (source) {\n  if(Array.isArray(source)) {\n\t\tvar source_index = 0, source_len = source.length;\n    return from (function (i) {\n      if(source_index < source_len)\n        this.emit('data', source[source_index++])\n      else\n        this.emit('end')\n      return true\n    })\n  }\n  var s = new Stream(), i = 0\n  s.ended = false\n  s.started = false\n  s.readable = true\n  s.writable = false\n  s.paused = false\n  s.ended = false\n  s.pause = function () {\n    s.started = true\n    s.paused = true\n  }\n  function next () {\n    s.started = true\n    if(s.ended) return\n    while(!s.ended && !s.paused && source.call(s, i++, function () {\n      if(!s.ended && !s.paused)\n          process.nextTick(next);\n    }))\n      ;\n  }\n  s.resume = function () {\n    s.started = true\n    s.paused = false\n    next()\n  }\n  s.on('end', function () {\n    s.ended = true\n    s.readable = false\n    process.nextTick(s.destroy)\n  })\n  s.destroy = function () {\n    s.ended = true\n    s.emit('close') \n  }\n  /*\n    by default, the stream will start emitting at nextTick\n    if you want, you can pause it, after pipeing.\n    you can also resume before next tick, and that will also\n    work.\n  */\n  process.nextTick(function () {\n    if(!s.started) s.resume()\n  })\n  return s\n}\n","//filter will reemit the data if cb(err,pass) pass is truthy\n\n// reduce is more tricky\n// maybe we want to group the reductions or emit progress updates occasionally\n// the most basic reduce just emits one 'data' event after it has recieved 'end'\n\n\nvar Stream = require('stream').Stream\n\n\n//create an event stream and apply function to each .write\n//emitting each response as data\n//unless it's an empty callback\n\nmodule.exports = function (mapper, opts) {\n\n  var stream = new Stream()\n    , self = this\n    , inputs = 0\n    , outputs = 0\n    , ended = false\n    , paused = false\n    , destroyed = false\n    , lastWritten = 0\n    , inNext = false\n\n  this.opts = opts || {};\n  var errorEventName = this.opts.failures ? 'failure' : 'error';\n\n  // Items that are not ready to be written yet (because they would come out of\n  // order) get stuck in a queue for later.\n  var writeQueue = {}\n\n  stream.writable = true\n  stream.readable = true\n\n  function queueData (data, number) {\n    var nextToWrite = lastWritten + 1\n\n    if (number === nextToWrite) {\n      // If it's next, and its not undefined write it\n      if (data !== undefined) {\n        stream.emit.apply(stream, ['data', data])\n      }\n      lastWritten ++\n      nextToWrite ++\n    } else {\n      // Otherwise queue it for later.\n      writeQueue[number] = data\n    }\n\n    // If the next value is in the queue, write it\n    if (writeQueue.hasOwnProperty(nextToWrite)) {\n      var dataToWrite = writeQueue[nextToWrite]\n      delete writeQueue[nextToWrite]\n      return queueData(dataToWrite, nextToWrite)\n    }\n\n    outputs ++\n    if(inputs === outputs) {\n      if(paused) paused = false, stream.emit('drain') //written all the incoming events\n      if(ended) end()\n    }\n  }\n\n  function next (err, data, number) {\n    if(destroyed) return\n    inNext = true\n\n    if (!err || self.opts.failures) {\n      queueData(data, number)\n    }\n\n    if (err) {\n      stream.emit.apply(stream, [ errorEventName, err ]);\n    }\n\n    inNext = false;\n  }\n\n  // Wrap the mapper function by calling its callback with the order number of\n  // the item in the stream.\n  function wrappedMapper (input, number, callback) {\n    return mapper.call(null, input, function(err, data){\n      callback(err, data, number)\n    })\n  }\n\n  stream.write = function (data) {\n    if(ended) throw new Error('map stream is not writable')\n    inNext = false\n    inputs ++\n\n    try {\n      //catch sync errors and handle them like async errors\n      var written = wrappedMapper(data, inputs, next)\n      paused = (written === false)\n      return !paused\n    } catch (err) {\n      //if the callback has been called syncronously, and the error\n      //has occured in an listener, throw it again.\n      if(inNext)\n        throw err\n      next(err)\n      return !paused\n    }\n  }\n\n  function end (data) {\n    //if end was called with args, write it, \n    ended = true //write will emit 'end' if ended is true\n    stream.writable = false\n    if(data !== undefined) {\n      return queueData(data, inputs)\n    } else if (inputs == outputs) { //wait for processing \n      stream.readable = false, stream.emit('end'), stream.destroy() \n    }\n  }\n\n  stream.end = function (data) {\n    if(ended) return\n    end()\n  }\n\n  stream.destroy = function () {\n    ended = destroyed = true\n    stream.writable = stream.readable = paused = false\n    process.nextTick(function () {\n      stream.emit('close')\n    })\n  }\n  stream.pause = function () {\n    paused = true\n  }\n\n  stream.resume = function () {\n    paused = false\n  }\n\n  return stream\n}\n\n\n\n\n","//through@2 handles this by default!\nmodule.exports = require('through')\n\n","'use strict';\n\nvar spawn = require('child_process').spawn,\n    es    = require('event-stream');\n\nmodule.exports = function childrenOfPid(pid, callback) {\n  var headers = null;\n\n  if (typeof callback !== 'function') {\n    throw new Error('childrenOfPid(pid, callback) expects callback');\n  }\n\n  if (typeof pid === 'number') {\n    pid = pid.toString();\n  }\n\n  //\n  // The `ps-tree` module behaves differently on *nix vs. Windows\n  // by spawning different programs and parsing their output.\n  //\n  // Linux:\n  // 1. \" <defunct> \" need to be striped\n  // ```bash\n  // $ ps -A -o comm,ppid,pid,stat\n  // COMMAND          PPID   PID STAT\n  // bbsd             2899 16958 Ss\n  // watch <defunct>  1914 16964 Z\n  // ps              20688 16965 R+\n  // ```\n  //\n  // Win32:\n  // 1. wmic PROCESS WHERE ParentProcessId=4604 GET Name,ParentProcessId,ProcessId,Status)\n  // 2. The order of head columns is fixed\n  // ```shell\n  // > wmic PROCESS GET Name,ProcessId,ParentProcessId,Status\n  // Name                          ParentProcessId  ProcessId   Status\n  // System Idle Process           0                0\n  // System                        0                4\n  // smss.exe                      4                228\n  // ```\n\n  var processLister;\n  if (process.platform === 'win32') {\n    // See also: https://github.com/nodejs/node-v0.x-archive/issues/2318\n    processLister = spawn('wmic.exe', ['PROCESS', 'GET', 'Name,ProcessId,ParentProcessId,Status']);\n  } else {\n    processLister = spawn('ps', ['-A', '-o', 'ppid,pid,stat,comm']);\n  }\n\n  es.connect(\n    // spawn('ps', ['-A', '-o', 'ppid,pid,stat,comm']).stdout,\n    processLister.stdout,\n    es.split(),\n    es.map(function (line, cb) { //this could parse alot of unix command output\n      var columns = line.trim().split(/\\s+/);\n      if (!headers) {\n        headers = columns;\n\n        //\n        // Rename Win32 header name, to as same as the linux, for compatible.\n        //\n        headers = headers.map(normalizeHeader);\n        return cb();\n      }\n\n      var row = {};\n      // For each header\n      var h = headers.slice();\n      while (h.length) {\n        row[h.shift()] = h.length ? columns.shift() : columns.join(' ');\n      }\n\n      return cb(null, row);\n    }),\n    es.writeArray(function (err, ps) {\n      var parents = {},\n          children = [];\n\n      parents[pid] = true;\n      ps.forEach(function (proc) {\n        if (parents[proc.PPID]) {\n          parents[proc.PID] = true;\n          children.push(proc)\n        }\n      });\n\n      callback(null, children);\n    })\n  ).on('error', callback)\n}\n\n/**\n * Normalizes the given header `str` from the Windows\n * title to the *nix title.\n *\n * @param {string} str Header string to normalize\n */\nfunction normalizeHeader(str) {\n  if (process.platform !== 'win32') {\n    return str;\n  }\n\n  switch (str) {\n    case 'Name':\n      return 'COMMAND';\n      break;\n    case 'ParentProcessId':\n      return 'PPID';\n      break;\n    case 'ProcessId':\n      return 'PID';\n      break;\n    case 'Status':\n      return 'STAT';\n      break;\n    default:\n      throw new Error('Unknown process listing header: ' + str);\n  }\n}\n","//filter will reemit the data if cb(err,pass) pass is truthy\n\n// reduce is more tricky\n// maybe we want to group the reductions or emit progress updates occasionally\n// the most basic reduce just emits one 'data' event after it has recieved 'end'\n\n\nvar through = require('through')\nvar Decoder = require('string_decoder').StringDecoder\n\nmodule.exports = split\n\n//TODO pass in a function to map across the lines.\n\nfunction split (matcher, mapper, options) {\n  var decoder = new Decoder()\n  var soFar = ''\n  var maxLength = options && options.maxLength;\n  if('function' === typeof matcher)\n    mapper = matcher, matcher = null\n  if (!matcher)\n    matcher = /\\r?\\n/\n\n  function emit(stream, piece) {\n    if(mapper) {\n      try {\n        piece = mapper(piece)\n      }\n      catch (err) {\n        return stream.emit('error', err)\n      }\n      if('undefined' !== typeof piece)\n        stream.queue(piece)\n    }\n    else\n      stream.queue(piece)\n  }\n\n  function next (stream, buffer) {\n    var pieces = ((soFar != null ? soFar : '') + buffer).split(matcher)\n    soFar = pieces.pop()\n\n    if (maxLength && soFar.length > maxLength)\n      stream.emit('error', new Error('maximum buffer reached'))\n\n    for (var i = 0; i < pieces.length; i++) {\n      var piece = pieces[i]\n      emit(stream, piece)\n    }\n  }\n\n  return through(function (b) {\n    next(this, decoder.write(b))\n  },\n  function () {\n    if(decoder.end)\n      next(this, decoder.end())\n    if(soFar != null)\n      emit(this, soFar)\n    this.queue(null)\n  })\n}\n\n","var duplexer = require('duplexer')\n\nmodule.exports = function () {\n\n  var streams = [].slice.call(arguments)\n    , first = streams[0]\n    , last = streams[streams.length - 1]\n    , thepipe = duplexer(first, last)\n\n  if(streams.length == 1)\n    return streams[0]\n  else if (!streams.length)\n    throw new Error('connect called with empty args')\n\n  //pipe all the streams together\n\n  function recurse (streams) {\n    if(streams.length < 2)\n      return\n    streams[0].pipe(streams[1])\n    recurse(streams.slice(1))  \n  }\n  \n  recurse(streams)\n \n  function onerror () {\n    var args = [].slice.call(arguments)\n    args.unshift('error')\n    thepipe.emit.apply(thepipe, args)\n  }\n  \n  //es.duplex already reemits the error from the first and last stream.\n  //add a listener for the inner streams in the pipeline.\n  for(var i = 1; i < streams.length - 1; i ++)\n    streams[i].on('error', onerror)\n\n  return thepipe\n}\n\n","var Stream = require('stream')\n\n// through\n//\n// a stream that does nothing but re-emit the input.\n// useful for aggregating a series of changing but not ending streams into one stream)\n\nexports = module.exports = through\nthrough.through = through\n\n//create a readable writable stream.\n\nfunction through (write, end, opts) {\n  write = write || function (data) { this.queue(data) }\n  end = end || function () { this.queue(null) }\n\n  var ended = false, destroyed = false, buffer = [], _ended = false\n  var stream = new Stream()\n  stream.readable = stream.writable = true\n  stream.paused = false\n\n//  stream.autoPause   = !(opts && opts.autoPause   === false)\n  stream.autoDestroy = !(opts && opts.autoDestroy === false)\n\n  stream.write = function (data) {\n    write.call(this, data)\n    return !stream.paused\n  }\n\n  function drain() {\n    while(buffer.length && !stream.paused) {\n      var data = buffer.shift()\n      if(null === data)\n        return stream.emit('end')\n      else\n        stream.emit('data', data)\n    }\n  }\n\n  stream.queue = stream.push = function (data) {\n//    console.error(ended)\n    if(_ended) return stream\n    if(data === null) _ended = true\n    buffer.push(data)\n    drain()\n    return stream\n  }\n\n  //this will be registered as the first 'end' listener\n  //must call destroy next tick, to make sure we're after any\n  //stream piped from here.\n  //this is only a problem if end is not emitted synchronously.\n  //a nicer way to do this is to make sure this is the last listener for 'end'\n\n  stream.on('end', function () {\n    stream.readable = false\n    if(!stream.writable && stream.autoDestroy)\n      process.nextTick(function () {\n        stream.destroy()\n      })\n  })\n\n  function _end () {\n    stream.writable = false\n    end.call(stream)\n    if(!stream.readable && stream.autoDestroy)\n      stream.destroy()\n  }\n\n  stream.end = function (data) {\n    if(ended) return\n    ended = true\n    if(arguments.length) stream.write(data)\n    _end() // will emit or queue\n    return stream\n  }\n\n  stream.destroy = function () {\n    if(destroyed) return\n    destroyed = true\n    ended = true\n    buffer.length = 0\n    stream.writable = stream.readable = false\n    stream.emit('close')\n    return stream\n  }\n\n  stream.pause = function () {\n    if(stream.paused) return\n    stream.paused = true\n    return stream\n  }\n\n  stream.resume = function () {\n    if(stream.paused) {\n      stream.paused = false\n      stream.emit('resume')\n    }\n    drain()\n    //may have become paused again,\n    //as drain emits 'data'.\n    if(!stream.paused)\n      stream.emit('drain')\n    return stream\n  }\n  return stream\n}\n\n","import * as vscode from 'vscode';\nimport * as path from 'path';\nimport * as net from 'net';\nimport * as opn from \"open\";\nconst fp = require('find-free-port');\nconst psTree = require('ps-tree');\nimport * as cp from 'child_process';\nimport { \n\tLanguageClient,\n\tLanguageClientOptions,\n    NotificationType,\n\tServerOptions,\n\tTransportKind } from 'vscode-languageclient';\nimport { EEXIST } from 'constants';\nimport {WolframNotebook, WolframNotebookSerializer} from './notebook';\nconst fs = require('fs')\n\nlet client:LanguageClient;\nlet wolframClient:LanguageClient;\nlet wolframKernelClient:LanguageClient;\nlet wolframStatusBar:vscode.StatusBarItem = vscode.window.createStatusBarItem(vscode.StatusBarAlignment.Left);\nwolframStatusBar.command = \"wolfram.restart\";\nwolframStatusBar.text = \"$(repo-sync~spin) Loading Wolfram...\";\nwolframStatusBar.show();\nlet kernelStatusBar:vscode.StatusBarItem = vscode.window.createStatusBarItem(vscode.StatusBarAlignment.Left);\nkernelStatusBar.command = \"wolfram.launchKernel\";\nkernelStatusBar.text = \"$(lightbulb)\";\nkernelStatusBar.color = \"foreground\";\nkernelStatusBar.show();\n\nlet wolframNotebookProvider:WolframNotebookSerializer;\nlet PORT:any;\nlet kernelPORT:any;\nlet outputChannel = vscode.window.createOutputChannel('wolf-lsp');\nlet lspPath = '';\nlet kernelPath = '';\nlet theContext:vscode.ExtensionContext;\n\nvscode.workspace.onDidChangeTextDocument(didChangeTextDocument);\nvscode.workspace.onDidOpenTextDocument(didOpenTextDocument);\nvscode.workspace.onDidSaveTextDocument(didSaveTextDocument);\nvscode.window.onDidChangeWindowState(didChangeWindowState);\nvscode.commands.registerCommand('wolfram.runInWolfram', runInWolfram);\nvscode.commands.registerCommand('wolfram.runExpression', runExpression); \nvscode.commands.registerCommand('wolfram.runToLine', runToLine);\nvscode.commands.registerCommand('wolfram.printInWolfram', printInWolfram);\nvscode.commands.registerCommand('wolfram.wolframTerminal', startWolframTerminal);\nvscode.commands.registerCommand('wolfram.runInTerminal', runInTerminal);\nvscode.commands.registerCommand('wolfram.clearDecorations', clearDecorations);\nvscode.commands.registerCommand('wolfram.showOutput', showOutput);\nvscode.commands.registerCommand('wolfram.help', help);    \nvscode.commands.registerCommand('wolfram.restart', restartWolfram);   \nvscode.commands.registerCommand('wolfram.restartKernel', restartKernel); \nvscode.commands.registerCommand('wolfram.abort', abort); \nvscode.commands.registerCommand('wolfram.textToSection', textToSection);\nvscode.commands.registerCommand('wolfram.textFromSection', textFromSection);\nlet theDisposible:vscode.Disposable;\nlet theKernelDisposible:vscode.Disposable;\n\nfunction randomPort(){\n    return Math.round(Math.random()*(65535 - 49152)+49152)\n}\nexport function activate(context: vscode.ExtensionContext){\n    theContext = context;\n    lspPath = context.asAbsolutePath(path.join('wolfram', 'wolfram-lsp.wl'));\n    kernelPath = context.asAbsolutePath(path.join('wolfram', 'wolfram-kernel.wl'));\n    // wolframNotebookProvider = new WolframProvider(\"wolfram\", context.extensionPath.toString(), true, wolframClient);\n    context.subscriptions.push()\n    try{\n        // context.subscriptions.push(vscode.notebook.registerNotebookContentProvider('wolfram', wolframNotebookProvider));\n    } catch {}\n\n    \n    fp(randomPort()).then((freep:any) => { \n        PORT = freep[0];\n        outputChannel.appendLine(\"Port: \" + PORT.toString());\n        loadwolfram().then(async (success:any) => {\n            await new Promise(resolve => setTimeout(resolve, 5000));\n            theDisposible = loadWolframServer(outputChannel, context)\n            context.subscriptions.push(theDisposible);\n            // wolframNotebookProvider.setWolframClient(wolframClient);\n    \n        });\n    }); \n\n    fp(randomPort()).then((freep:any) => { \n        kernelPORT = freep[0];\n        outputChannel.appendLine(\"Port: \" + kernelPORT.toString());\n        loadwolframKernel().then(async (success:any) => {\n            await new Promise(resolve => setTimeout(resolve, 5000));\n            theKernelDisposible = loadWolframKernelClient(outputChannel, context)\n            context.subscriptions.push(theKernelDisposible);\n            // wolframNotebookProvider.setWolframClient(wolframClient);\n    \n        });\n    }); \n    \n}\n\nlet wolframKernel:cp.ChildProcess;\nlet loadwolframKernel = function() {\n    return new Promise((resolve, reject) =>  {\n        if (process.env.VSCODE_DEBUG_MODE === \"true\") {\n            PORT = 6589;\n        } else {\n        try {\n            if (process.platform === \"win32\") {\n                wolframKernel = cp.spawn('cmd.exe', ['/c', 'wolframscript.exe', '-file', kernelPath, kernelPORT.toString(), kernelPath], {detached:false});\n            } else {\n                wolframKernel = cp.spawn('wolframscript', ['-file', kernelPath, kernelPORT.toString(), kernelPath], {detached:true});\n            }\n            outputChannel.appendLine(\"Launching wolframkernel: \" + wolframKernel.pid.toString());\n\n            wolframKernel.stdout?.once('data', (data) => {\n                resolve(true);\n            });\n\n            wolframKernel.stdout?.on('data', (data) => {\n                outputChannel.appendLine(\"STDOUT: \" + data.toString());\n            });\n\n            wolframKernel.on('SIGPIPE', (data) => {\n                outputChannel.appendLine(\"SIGPIPE\");\n            });\n\n\n            wolframKernel.stdout?.on('error', (data) => {\n                outputChannel.appendLine(\"STDOUT Error\" + data.toString());\n            });\n\n            } catch (error) {\n                outputChannel.appendLine(error.message)\n                vscode.window.showErrorMessage(\"Wolframscript failed to load kernel.\")\n                return reject(false);\n            }  \n        \n        }\n    });\n\n}\n\n\nlet wolfram:cp.ChildProcess;\nlet loadwolfram = function() {\n    return new Promise((resolve, reject) =>  {\n        if (process.env.VSCODE_DEBUG_MODE === \"true\") {\n            PORT = 6589;\n        } else {\n        try {\n            if (process.platform === \"win32\") {\n                wolfram = cp.spawn('cmd.exe', ['/c', 'wolframscript.exe', '-file', lspPath, PORT.toString(), lspPath], {detached:false});\n            } else {\n                wolfram = cp.spawn('wolframscript', ['-file', lspPath, PORT.toString(), lspPath], {detached:true});\n            }\n            outputChannel.appendLine(\"Launching wolframscript: \" + wolfram.pid.toString());\n\n            wolfram.stdout?.once('data', (data) => {\n                resolve(true);\n            });\n\n            wolfram.stdout?.on('data', (data) => {\n                outputChannel.appendLine(\"STDOUT: \" + data.toString());\n            });\n\n            wolfram.on('SIGPIPE', (data) => {\n                outputChannel.appendLine(\"SIGPIPE\");\n            });\n\n\n            wolfram.stdout?.on('error', (data) => {\n                outputChannel.appendLine(\"STDOUT Error\" + data.toString());\n            });\n\n            } catch (error) {\n                outputChannel.appendLine(error.message)\n                vscode.window.showErrorMessage(\"Wolframscript failed to load.\")\n                return reject(false);\n            }  \n        \n        }\n    });\n};\n\nfunction loadWolframKernelClient(outputChannel:any, context:vscode.ExtensionContext) {\n    let serverOptions:ServerOptions = function () {\n        return new Promise((resolve, reject) => {\n            let client = new net.Socket();\n            client.connect(kernelPORT, \"127.0.0.1\", () => {\n                client.setKeepAlive(true, 3000); \n                resolve({\n                    reader: client,\n                    writer: client\n                })\n            })\n        })\n    };\n\n    let clientOptions: LanguageClientOptions = {\n        documentSelector: [\n            \"wolfram\"\n        ],\n        diagnosticCollectionName: 'wolfram-lsp',\n        outputChannel: outputChannel\n    };\n\n    wolframKernelClient = new LanguageClient('wolfram', 'Wolfram Language Server Kernel', serverOptions, clientOptions)\n    wolframKernelClient.onReady().then(() => {\n        wolframKernelClient.onNotification(\"onRunInWolfram\", onRunInWolfram);\n        wolframKernelClient.onNotification(\"wolframBusy\", wolframBusy);\n        wolframKernelClient.onNotification(\"updateDecorations\", updateDecorations);\n        wolframKernelClient.onNotification(\"updateVarTable\", updateVarTable);\n        wolframKernelClient.onNotification(\"moveCursor\", moveCursor);\n    });\n\n    let disposible = wolframKernelClient.start();\n    return disposible;\n}\n\n\nfunction loadWolframServer(outputChannel:any, context:vscode.ExtensionContext){\n    // let serverOptions = {\n    //     run: { module: serverModule, transport: TransportKind.ipc },\n    //     debug: { module: serverModule, transport: TransportKind.ipc, options: debugOptions }\n    // };\n    //logtime(\"start client\");\n    let serverOptions: ServerOptions = function() {\n        return new Promise ((resolve, reject) => {\n            let client = new net.Socket();\n            //setTimeout(() =>{\n                client.connect(PORT, \"127.0.0.1\", () => {\n                    client.setKeepAlive(true, 3000);\n                    resolve({\n                        reader: client,\n                        writer: client\n                    });\n                });\n\n                // client.on(\"error\", (e) => { \n                //     outputChannel.appendLine(\"Error:\" + e.message);\n                //     // loadWolframServer(outputChannel, context);\n                //     setTimeout(() =>  loadWolframServer(outputChannel, context), 1000);\n                //     client.destroy();\n                    \n                // });\n\n                // client.on(\"timeout\", () => { outputChannel.appendLine(\"Timeout\"); reject();});\n                //logtime(\"connected\");\n            //}, 10000);\n        });\n    };\n\n    let clientOptions: LanguageClientOptions = {\n        documentSelector: [\n            \"wolfram\"\n        ],\n        diagnosticCollectionName: 'wolfram-lsp',\n        outputChannel: outputChannel\n    };\n\n\n    wolframClient = new LanguageClient('wolfram', 'Wolfram Language Server', serverOptions, clientOptions);\n\n    wolframClient.onReady().then(() => {\n        //wolframClient.sendRequest(\"DocumentSymbolRequest\");\n        wolframClient.onNotification(\"wolframVersion\", wolframVersion);\n        // wolframClient.onNotification(\"moveCursor\", moveCursor);\n        // wolframClient.onNotification(\"wolframResult\", wolframResult);\n    });\n    let disposible = wolframClient.start();\n\n    return disposible;\n}\n\nlet wolframVersionText:string = \"\";\nfunction wolframVersion(data:any) {        \n    wolframVersionText = data[\"output\"];\n    wolframStatusBar.text = wolframVersionText;\n    wolframStatusBar.show();\n}\n\n// function wolframResult(result:any) {\n//     let e: vscode.TextEditor | undefined = vscode.window.activeTextEditor;\n//     let outputPosition = new vscode.Position(result[\"position\"][\"line\"], result[\"position\"][\"character\"]);\n\n//     printResults.push(result[\"output\"]);\n//     if (printResults.length > 20) {\n//         printResults.shift();\n//     }\n//     // showOutput(printResults);\n//     if(typeof(e) !== \"undefined\") {\n//         e.edit(editBuilder => {\n//             // if (result[\"output\"].indexOf(\"<img\") >= 0 ){\n//             //     printResults.push(result[\"output\"]);\n//             //     showOutput(printResults);\n//             // } \n//             if(result[\"print\"]){\n//                 editBuilder.insert(outputPosition, \"(* \" + result[\"output\"] + \" *)\\n\");\n//             }\n//         });\n//     }\n//     wolframStatusBar.text = wolframVersionText;\n// }\n\nfunction didOpenTextDocument(document:vscode.TextDocument): void{\n    if (document.languageId !== 'wolfram' || (document.uri.scheme !== 'file' && document.uri.scheme !== 'untitled')) {\n        return;\n    }\n    if (document.languageId===\"wolfram\"){\n        if (wolframClient !== undefined) {\n            wolframClient.onReady().then(ready => {\n                wolframClient.sendRequest(\"DocumentSymbolRequest\");\n            });\n        }\n    }\n\n    return;\n}\n\nfunction didChangeTextDocument(event:vscode.TextDocumentChangeEvent):void {\n    // didOpenTextDocument(event.document);\n    // remove old decorations\n    let editor = vscode.window.activeTextEditor;\n    let decorations:vscode.DecorationOptions[] = [];\n    if(editor == null){\n        return\n    } else {\n        let position = editor?.selection.active;\n\n        let uri = editor.document.uri.toString();\n\n        if ((workspaceDecorations == undefined) || (workspaceDecorations == null)) {\n            workspaceDecorations = {};\n        }\n\n        if (workspaceDecorations[uri] !== undefined) {\n            Object.keys(workspaceDecorations[uri]).forEach((line:any) => {\n                if (parseInt(line, 10) < position.line) {\n                    decorations.push(workspaceDecorations[uri][line]);\n                } else {\n                    delete workspaceDecorations[uri][line];\n                }\n            });\n    }\n\n        editor.setDecorations(variableDecorationType, decorations);\n    }\n    return;\n}\n\nfunction didSaveTextDocument(event:vscode.TextDocument):void {\n    didOpenTextDocument(event);\n    return;\n}\n\nfunction moveCursor(params:any) {\n    let e:vscode.TextEditor | undefined = vscode.window.activeTextEditor;\n    let outputPosition = new vscode.Position(params[\"position\"][\"line\"], params[\"position\"][\"character\"]);\n    if(e){\n        e.selection = new vscode.Selection(outputPosition, outputPosition);\n        e.revealRange(new vscode.Range(outputPosition, outputPosition), vscode.TextEditorRevealType.Default);\n\n        let decorationLine = e.document.lineAt(outputPosition.line-1)\n        let start = new vscode.Position(decorationLine.lineNumber, decorationLine.range.end.character)\n        let end = new vscode.Position(decorationLine.lineNumber, decorationLine.range.end.character)\n        let range = new vscode.Range(start, end)\n\n        let d:vscode.DecorationOptions = {\n            \"range\": range,\n            \"renderOptions\": {\n                \"after\": {\n                    \"contentText\": \"...\",\n                    \"color\":\"foreground\",\n                    \"margin\":\"20px\"\n                }\n            }\n        }\n        updateDecorations([d]);\n    }\n}\n\n\nfunction restartKernel(){\n    kernelStatusBar.color = \"yellow\";\n\n    wolframKernelClient.stop();\n\n    let isWin = /^win/.test(process.platform);\n    if(isWin) {\n        let cp = require('child_process');\n        cp.exec('taskkill /PID ' + wolfram.pid + ' /T /F', function (error:any, stdout:any, stderr:any) {\n        }); \n        cp.exec('taskkill /PID ' + wolframKernel.pid + ' /T /F', function (error:any, stdout:any, stderr:any) {\n        }); \n\n    } else {        \n        kill(wolframKernel.pid);\n    }\n    //let context = myContext;\n    wolframStatusBar.text = \"$(repo-sync~spin) Loading Wolfram...\";\n    wolframStatusBar.show();\n\n    vscode.window.showInformationMessage(\"Wolfram Kernel is restarting.\");\n    // context.subscriptions.forEach((sub:any) => {\n    //     try {\n    //         sub.dispose();\n    //     } catch (error) {\n    //         outputChannel.appendLine(\"subs: \" + error);\n    //     }\n    // });\n    // context.subscriptions.push(loadWolframServer(outputChannel, context));\n\n\n    fp(randomPort()).then((freep:any) => { \n        kernelPORT = freep[0];\n        outputChannel.appendLine(\"Port: \" + kernelPORT.toString());\n        loadwolframKernel().then(async (success:any) => {\n            await new Promise(resolve => setTimeout(resolve, 5000));\n            theKernelDisposible = loadWolframKernelClient(outputChannel, theContext)\n            theContext.subscriptions.push(theKernelDisposible);\n            // wolframNotebookProvider.setWolframClient(wolframClient);\n    \n        });\n    }); \n    \n}\n\nlet printResults:any[] = [];\nfunction runInWolfram(print=false){\n    let e: vscode.TextEditor | undefined = vscode.window.activeTextEditor;\n    let sel:vscode.Selection = e!.selection;\n    let outputPosition:vscode.Position = new vscode.Position(sel.active.line+1, 0);\n\n    \n    if (e?.document.lineCount == outputPosition.line) {\n        e?.edit(editBuilder => {\n            editBuilder.insert(outputPosition!, \"\\n\")\n        })\n    }\n\n    if(e?.document.uri.scheme==='vscode-notebook-cell') {\n        // let n:WolframNotebook | undefined = wolframNotebookProvider._notebooks.get(e.document.uri.toString());\n        // if (n){\n        //     wolframNotebookProvider.executeCell(n, n.cells[0])\n        // }\n        \n    }\n    else if (e?.document.uri.scheme === 'file' || e?.document.uri.scheme ==='untitled') {\n        e.selection = new vscode.Selection(outputPosition, outputPosition);\n        e.revealRange(new vscode.Range(outputPosition, outputPosition), vscode.TextEditorRevealType.Default);\n\n        // wolframKernelClient.sendNotification(\"moveCursor\", {range:sel, textDocument:e.document});\n        wolframKernelClient.sendNotification(\"runInWolfram\", {range:sel, textDocument:e.document, print:print});\n    }\n}\n\nfunction onRunInWolfram(result:any){\n    let editors:vscode.TextEditor[] = vscode.window.visibleTextEditors;\n    let e = editors.filter((e) => {return e.document.uri.path === result[\"document\"][\"path\"]})[0];\n    if(e){\n        updateResults(e, result, result[\"print\"]);\n    }\n}\n\nlet variableTable:any = {}\nfunction updateVarTable(vars:any) {\n    for (let index = 0; index < vars[\"values\"].length; index++) {\n        variableTable[vars[\"values\"][index][0]] = vars[\"values\"][index][1].slice(0, 200) + \"...\";\n    }\n    updateOutputPanel();\n}\n\nlet maxPrintResults = 20;\nfunction updateResults(e:vscode.TextEditor | undefined, result:any, print:boolean) {\n    if (printResults.length > maxPrintResults) {\n        printResults.shift();\n    }\n    \n    if(typeof(e) !== \"undefined\") {\n        e.edit(editBuilder => {\n\n            printResults.push(result[\"output\"].toString());\n            showOutput();\n\n            if(print){\n                let sel:vscode.Selection = e!.selection;\n                let outputPosition:vscode.Position = new vscode.Position(sel.active.line+1, 0);\n                editBuilder.insert(outputPosition, \"\\t\" + result[\"result\"] + \"\\n\");\n            }\n        });\n    };\n\n    updateOutputPanel();\n    wolframStatusBar.text = wolframVersionText;\n\n}\n\nfunction runCell() {\n    let e: vscode.TextEditor | undefined = vscode.window.activeTextEditor;\n    // let n: vscode.NotebookDocument| undefined = e?.document;\n    // let currentCell:vscode.NotebookCell;\n\n    \n    // if (n?.cells) {\n    //     for (let index = 0; index < n.cells.length; index++) {\n    //         if (n.cells[index].document.getText() === e?.document.getText()) {\n    //             currentCell = n.cells[index]\n    //             wolframNotebookProvider.executeCell(e, currentCell)\n    //             break\n    //         }\n            \n    //     }\n    // }\n}\n\n\n\nfunction runExpression(expression:string, line:0, end:100) {\n    let e: vscode.TextEditor | undefined = (vscode.window.activeTextEditor == null) ? vscode.window.visibleTextEditors[0] : vscode.window.activeTextEditor;\n    \n    wolframKernelClient.sendNotification(\"runExpression\", {print:false, expression:expression, textDocument:e?.document, line:line, end:end});\n}\n\n\n\nfunction printInWolfram(){\n    let print = true;\n    runInWolfram(print);\n}\n\n\nfunction textToSection() {\n    let e: vscode.TextEditor | undefined = vscode.window.activeTextEditor;\n    \n    let lines: string[];\n    let newlines: string = \"\";\n\n    if (e){\n        let sel: vscode.Selection = e.selection;\n        lines = e?.document.getText(new vscode.Range(sel.start, sel.end)).split('\\n');\n        \n        lines.forEach(l => {\n            newlines += \"(*\" + l + \"*)\\n\"\n        });\n\n\n        e.edit(editbuilder => {    \n            editbuilder.replace(sel, newlines.trimRight())\n        })\n    }\n}\n\nfunction textFromSection() {\n    let e: vscode.TextEditor | undefined = vscode.window.activeTextEditor;\n    \n    let lines: string[];\n    let newlines: string = \"\";\n\n    if (e){\n        let sel: vscode.Selection = e.selection;\n        lines = e?.document.getText(new vscode.Range(sel.start, sel.end)).split('\\n');\n        \n        lines.forEach(l => {\n            newlines += l.replace(/^\\(\\*/, \"\").replace(/\\*\\)$/, \"\") + \"\\n\"\n        });\n\n\n        e.edit(editbuilder => {    \n            editbuilder.replace(sel, newlines.trimRight())\n        })\n    }\n}\n\nfunction abort() {\n    wolframClient.sendRequest(\"abort\");\n    wolframStatusBar.text = wolframVersionText;\n}\n\nfunction restartWolfram() {\n    // try {\n    //     kill(wolfram.pid);\n    // } catch {\n    //     outputChannel.appendLine(\"Failed to stop wolfram: \" + wolfram.pid.toString());\n    // }\n    outputChannel.appendLine(\"Restarting\");\n    wolframStatusBar.text = \"$(repo-sync~spin) Loading Wolfram...\";\n    wolframStatusBar.show();\n\n    vscode.window.showInformationMessage(\"Wolfram is restarting.\");\n\n    wolframClient.stop();\n    wolframKernelClient.stop();\n\n    let isWin = /^win/.test(process.platform);\n    if(isWin) {\n        let cp = require('child_process');\n        cp.exec('taskkill /PID ' + wolfram.pid + ' /T /F', function (error:any, stdout:any, stderr:any) {\n        }); \n        cp.exec('taskkill /PID ' + wolframKernel.pid + ' /T /F', function (error:any, stdout:any, stderr:any) {\n        }); \n\n    } else {        \n        kill(wolfram.pid);\n        kill(wolframKernel.pid);\n    }\n\n    //let context = myContext;\n    // context.subscriptions.forEach((sub:any) => {\n    //     try {\n    //         sub.dispose();\n    //     } catch (error) {\n    //         outputChannel.appendLine(\"subs: \" + error);\n    //     }\n    // });\n    // context.subscriptions.push(loadWolframServer(outputChannel, context));\n    \n    theContext.subscriptions.length = 0;\n\n\n    fp(randomPort()).then((freep:any) => { \n        kernelPORT = freep[0];\n        outputChannel.appendLine(\"Kernel Port: \" + kernelPORT.toString());\n        loadwolframKernel().then(async (success:any) => {\n            await new Promise(resolve => setTimeout(resolve, 5000));\n            theKernelDisposible.dispose();\n            theKernelDisposible = loadWolframKernelClient(outputChannel, theContext)\n            theContext.subscriptions.push(theKernelDisposible);\n            // wolframNotebookProvider.setWolframClient(wolframClient);\n    \n        });\n    }); \n\n    fp(randomPort()).then((freep:any) => { \n        PORT = freep[0];\n        outputChannel.appendLine(\"LSP Port: \" + PORT.toString());\n        loadwolfram().then(async (success:any) => {\n            await new Promise(resolve => setTimeout(resolve, 5000));\n            // loadWolframServer(outputChannel, context)\n            theDisposible.dispose();\n            theDisposible = loadWolframServer(outputChannel, theContext);\n            // wolframNotebookProvider.setWolframClient(wolframClient);\n            try{\n                // theContext.subscriptions.push(vscode.notebook.registerNotebookContentProvider('wolfram', wolframNotebookProvider));\n            } catch {}\n            theContext.subscriptions.push(theDisposible);\n            wolframStatusBar.text = wolframVersionText;\n    \n        });\n    \n    }); \n}\n\nlet kill = function (pid:any) {\n    let signal   = 'SIGKILL';\n    let callback = function () {};\n    var killTree = true;\n    if(killTree) {\n        psTree(pid, function (err:any, children:any) {\n            [pid].concat(\n                children.map(function (p:any) {\n                    return p.PID;\n                })\n            ).forEach(function (tpid) {\n                try { process.kill(tpid, signal);}\n                catch (ex) {\n                    outputChannel.appendLine(\"Failed to kill: \" + tpid.toString())\n                 }\n            });\n            callback();\n        });\n    } else {\n        try { process.kill(pid, signal); }\n        catch (ex) { \n            outputChannel.appendLine(\"Failed to kill: \" + pid.toString())}\n        callback();\n    }\n};\n\nfunction runToLine() {\n    let e:any = vscode.window.activeTextEditor;\n    let sel:vscode.Position = e?.selection.active;\n    let outputPosition:vscode.Position = new vscode.Position(sel.line+1, 0);\n    let r:vscode.Selection = new vscode.Selection(\n        0,\n        0,\n        sel.line,\n        sel.character\n    );\n  \n    e.revealRange(r, vscode.TextEditorRevealType.Default);\n\n    wolframClient.sendRequest(\"runInWolfram\", {range:r, textDocument:e.document, print:false}).then((result:any) => {\n        // cursor has not moved yet\n        if (e.selection.active.line === outputPosition.line-1 && e.selection.active.character === outputPosition.character){\n            outputPosition = new vscode.Position(result[\"position\"][\"line\"], result[\"position\"][\"character\"]);\n            e.selection = new vscode.Selection(outputPosition, outputPosition);\n            e.revealRange(new vscode.Range(outputPosition, outputPosition), vscode.TextEditorRevealType.Default);\n        }\n\n        updateResults(e, result, false);\n    });\n}\n\nfunction didChangeWindowState(state:vscode.WindowState) {\n    if (wolframClient !== null || wolframClient !== undefined) {\n        if(state.focused === true){\n            wolframClient.onReady().then(ready  => {\n                wolframClient.sendNotification(\"windowFocused\", true);\n            });\n        } else {\n            wolframClient.onReady().then(ready  => {\n                wolframClient.sendNotification(\"windowFocused\", false);\n            });\n        }\n    }\n}\n\nlet variableDecorationType: vscode.TextEditorDecorationType = vscode.window.createTextEditorDecorationType(\n    { \n        backgroundColor: 'none', \n        light: {\n            color: new vscode.ThemeColor(\"foreground\")\n        },\n        dark: {\n            color: new vscode.ThemeColor(\"foreground\")\n        }\n    }\n);\n\nlet workspaceDecorations:{ [index:string]: vscode.DecorationOptions[];} = {};\nfunction clearDecorations() {\n    let e = vscode.window.activeTextEditor;\n\n    workspaceDecorations = {};\n    e?.setDecorations(variableDecorationType, []);\n}\n\nfunction updateDecorations(decorations:vscode.DecorationOptions[]) {\n    let editor = vscode.window.activeTextEditor;\n    if(editor?.document.uri.scheme==='file') {\n        //editor.setDecorations(variableDecorationType, []);\n\n        if(typeof(editor) === \"undefined\"){\n            return;\n        }\n        let uri = editor.document.uri.toString();\n\n        workspaceDecorations[uri] = {} as vscode.DecorationOptions[];\n        decorations.forEach(d => {\n            workspaceDecorations[uri][d.range.start.line] = d;\n        });\n\n        let editorDecorations:vscode.DecorationOptions[] = [];\n        Object.keys(workspaceDecorations[uri]).forEach((d:any) => {\n            editorDecorations.push(workspaceDecorations[uri][d]);\n        });\n        \n        editor.setDecorations(variableDecorationType, editorDecorations);\n    }\n}\n\nfunction wolframBusy(params:any) {\n    if(params.busy === true){\n        kernelStatusBar.color = \"red\";\n        wolframStatusBar.text = \"$(repo-sync~spin) Wolfram Running\";\n        wolframStatusBar.show();\n    } else {\n        kernelStatusBar.color = \"yellow\";\n        wolframStatusBar.text = wolframVersionText;\n        wolframStatusBar.show();\n    }\n}\n\n\nfunction startWolframTerminal() {\n    let cmd: string;\n    let args: string[];\n    if (process.platform === \"win32\") {\n        cmd = 'cmd.exe';\n        args = ['/c', 'wolframscript.exe'];\n    } else {\n        cmd = 'rlwrap wolframscript';\n        args = [];\n    }\n    let activeWolframTerminal: vscode.Terminal;\n    activeWolframTerminal = vscode.window.createTerminal(\"wolfram terminal\", cmd, args);\n    activeWolframTerminal.show(true);\n}\n\nfunction runInTerminal(){\n    if(!vscode.window.activeTerminal) {\n        startWolframTerminal();\n    }\n\n    let e:any = vscode.window.activeTextEditor;\n    let d:vscode.TextDocument = e!.document;\n    let sel = e!.selections;\n    vscode.window.activeTerminal?.sendText(d.getText(new vscode.Range(e.selection.start, e?.selection.end)));\n}\n\nfunction help() {\n    let e: vscode.TextEditor | undefined = vscode.window.activeTextEditor;\n    let d = e!.document;\n    let sel = e!.selections;\n    let txt = \"\";\n    let dataString = \"\";\n    for(var x = 0; x < sel.length; x++) {\n        txt = txt + d.getText(new vscode.Range(sel[x].start, sel[x].end));\n    }\n\n    let url = \"https://reference.wolfram.com/language/ref/\" + txt + \".html\";\n    // opn(url);\n\n    let helpPanel = vscode.window.createWebviewPanel(\n        \"wolframHelp\",\n        \"Wolfram Help\",\n        2,\n        {\n            enableScripts: true,\n            retainContextWhenHidden: true\n        }\n    );\n    helpPanel.webview.html = `<!DOCTYPE html>\n    <html lang=\"en\">\n    <head>\n    \n    <meta http-equiv=\"Content-Security-Policy\" content=\"default-src 'self' https://reference.wolfram.com 'unsafe-inline'\">\n    \n    </head>\n    <body>\n        <iframe src=\"${url}\" style=\"height:100vh; width:100%\" sandbox=\"allow-same-origin allow-scripts allow-popups allow-forms allow-top-navigation allow-modals\"></iframe>\n    </body>\n    </html>\n    `\n}\n\n\nlet outputPanel:vscode.WebviewPanel | undefined;\nfunction showOutput() {\n    let outputColumn:vscode.ViewColumn | undefined  = vscode.window.activeTextEditor?.viewColumn;\n    //let out = \"<table id='outputs'>\";\n\n    if(outputPanel) {\n        if (outputPanel.visible){\n\n        } else {\n            if(outputColumn){\n                outputPanel.reveal(outputColumn+1, true);\n        } else{\n            outputPanel.reveal(1, true);\n        }\n    }\n    } else {\n        if (outputColumn){\n        outputPanel = vscode.window.createWebviewPanel(\n            'WolframOutput',\n            \"Wolfram Output\",\n            {viewColumn:outputColumn+1, preserveFocus:true},\n            {\n                localResourceRoots: [vscode.Uri.file(path.join(theContext.extensionPath, 'wolfram'))],\n                enableScripts: true,\n                retainContextWhenHidden: true\n            });\n        \n        outputPanel.webview.html = getOutputContent(outputPanel.webview);\n\n        outputPanel.webview.onDidReceiveMessage(\n            message => {\n                runExpression(message.text, 0, 100);\n                return;\n            }\n        , undefined, theContext.subscriptions);\n\n        outputPanel.onDidDispose(() => {\n            outputPanel = undefined;\n        }, null);\n\n\n        updateOutputPanel()\n        }\n    }\n\n}\n\nfunction updateOutputPanel(){\n    let out = \"\";\n\n    for (let i = 0; i < printResults.length; i++) {\n        // out += \"<tr><td>\" + i.toString() + \": </td><td>\" + img3 + \"</td></tr>\";\n\n        \n        let data = \"\";\n        try{\n            data += fs.readFileSync(printResults[i], 'utf8');\n        } catch(e){\n            data += \"Error reading result\";\n        }\n\n        out += \"<div id='result'>\" + \n        // printResults[i].replace(/(?:\\r\\n|\\r|\\n)/g, '<br><br>') + // .replace(/^\\\"/, '').replace(/\\\"$/, '')\n        data + \n        \"</div>\";\n    }\n    //out += \"</table>\";\n\n    // if(typeof(outputPanel) === \"undefined\") {\n    //     loadOutputPanel(myContext, 2);\n    // }\n\n    let vars = \"<tr><th>Var</th><th>Value</th></tr>\\n\";\n\n    let i = 0;\n    Object.keys(variableTable).forEach(k => {\n        if (i % 2 === 0) {\n            vars += \"<tr><td style='background:var(--vscode-editor-foreground) !important; color:var(--vscode-editor-background) !important;'>\" + k + \"</td><td style='background:var(--vscode-editor-foreground) !important; color:var(--vscode-editor-background) !important;'>\" + variableTable[k] + \"</td></tr>\\n\"\n        } else {\n            vars += \"<tr><td>\" + k + \"</td><td>\" + variableTable[k] + \"</td></tr>\\n\"\n        }\n        i++;\n    });\n\n    outputPanel?.webview.postMessage({text:out, vars:vars});\n}\n\nfunction getOutputContent(webview:any) {\n    let timeNow = new Date().getTime();\n    let result = `<!DOCTYPE html>\n    <html lang=\"en\">\n    <head>\n        <style type=\"text/css\">\n\n            body{\n                overflow:scroll;\n                height:100%;\n            }\n\n            body.vscode-light {\n                background: var(--vscode-editor-background);\n                color: var(--vscode-editor-foreground);\n                font: var(--vscode-editor-font-family);\n            }\n\n            body.vscode-dark {\n                background: var(--vscode-editor-background);\n                color: var(--vscode-editor-foreground);\n                font: var(--vscode-editor-font-family);\n            }\n\n            body.vscode-high-contrast {\n                background: var(--vscode-editor-background);\n                color: var(--vscode-editor-foreground);\n                font: var(--vscode-editor-font-family);\n            }\n\n            #expression {\n                background: var(--vscode-editor-background);\n                color: var(--vscode-editor-foreground);\n                font: var(--vscode-editor-font-family);\n                width: 100%;\n            }\n\n            #vars {\n                height:38vh;\n                position:relative;\n                top:0;\n                border-bottom: solid white 1px;\n                overflow-y:scroll;\n                width:93vw;\n            }\n\n            .outer {\n                height:100vh;\n                display:block;\n                position:relative;\n                top:0;\n            }\n            #scratch {\n                position:fixed;\n                width:95vw;\n                bottom:0px;\n                height: 8vh;\n            }\n\n            #scratch textarea {\n                border-radius:2px;\n                color: var(--vscode-editor-foreground);\n                font: var(--vscode-editor-font-family);\n            }\n\n            #outputs {\n                display: block;\n                height: 50vh;\n                position: fixed;\n                top: 40vh;\n                overflow-y: scroll;\n            }\n\n            #result {\n                border-bottom: var(--vscode-editor-foreground) 2px solid;\n                margin-top: 5px;\n                padding: 5px;\n                display: block;\n                margin:0px;\n                width:93vw;\n                /* height:48vh; */\n                overflow:scroll;\n            }\n\n            #result img{\n                max-width: 100%;\n                max-height: 90%;\n                /* margin: 0; */\n                /* min-height: 200px; */\n                width: auto;\n                margin-left: auto;\n                margin-right: auto;\n                display: block;\n                height: auto;\n            }\n\n\n        </style>\n        <meta charset=\"UTF-8\">\n\n        <!--\n        Use a content security policy to only allow loading printResults from https or from our extension directory,\n        and only allow scripts that have a specific nonce.\n        \n        <meta http-equiv=\"Content-Security-Policy\" content=\"default-src 'none';\">\n\n        <meta http-equiv=\"Content-Security-Policy\" content=\"default-src 'all'; img-src ${webview.cspSource} https: data:; script-src ${webview.cspSource} 'unsafe-inline'; style-src ${webview.cspSource};\"/>\n        -->\n        <meta http-equiv=\"Content-Security-Policy\" content=\"default-src *; img-src ${webview.cspSource} https: data:; script-src ${webview.cspSource} 'unsafe-inline'; style-src ${webview.cspSource} 'unsafe-inline';\"/>\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n        <title>Wolfram Output</title>\n        <script>\n            const vscode = acquireVsCodeApi();\n            function scrollToBottom() {\n                // window.scrollTo(0,document.body.scrollHeight);\n\n                var color = '';\n                var fontFamily = '';\n                var fontSize = '';\n                var theme = '';\n                var fontWeight = '';\n                try {\n                    computedStyle = window.getComputedStyle(document.body);\n                    color = computedStyle.color + '';\n                    backgroundColor = computedStyle.backgroundColor + '';\n                    fontFamily = computedStyle.fontFamily;\n                    fontSize = computedStyle.fontSize;\n                    fontWeight = computedStyle.fontWeight;\n                    theme = document.body.className;\n                } catch(ex) { }\n            }\n\n        function run(input) {\n            if(event.key === 'Enter') {\n                if(event.shiftKey) {\n                    vscode.postMessage({\n                        text: input.value\n                    });\n                    input.value = \"\"\n                }\n            }\n        }\n\n        window.addEventListener('message', event => {\n            const message = event.data;\n\n            const outputDiv = document.getElementById('outputs');\n            outputDiv.innerHTML = message.text;\n\n            outputDiv.scrollTop = outputDiv.scrollHeight;\n\n            const varT = document.getElementById('varTable');\n            varT.innerHTML = message.vars;\n        })\n        </script>\n    </head>\n    <body onload=\"scrollToBottom()\">\n        <div class=\"outer\">\n            <div id=\"vars\">\n                <table id=\"varTable\">\n                    <th><td>Var</td><td>Value</td></th>\n                    <tr><td></td><td>No values defined yet</td></tr>\n                </table>\n            </div>\n            <div class=\"inner\" id='outputs'>\n            </div>\n            <div id=\"scratch\">\n                <textarea id=\"expression\" onkeydown=\"run(this)\" rows=\"3\" placeholder=\"Shift+Enter to run\"></textarea>\n            </div> \n        </div>\n    </body>\n    </html>`;\n    return result;\n}","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nvar CancellationToken;\r\n(function (CancellationToken) {\r\n    CancellationToken.None = Object.freeze({\r\n        isCancellationRequested: false,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    CancellationToken.Cancelled = Object.freeze({\r\n        isCancellationRequested: true,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && (candidate === CancellationToken.None\r\n            || candidate === CancellationToken.Cancelled\r\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\r\n    }\r\n    CancellationToken.is = is;\r\n})(CancellationToken = exports.CancellationToken || (exports.CancellationToken = {}));\r\nconst shortcutEvent = Object.freeze(function (callback, context) {\r\n    let handle = setTimeout(callback.bind(context), 0);\r\n    return { dispose() { clearTimeout(handle); } };\r\n});\r\nclass MutableToken {\r\n    constructor() {\r\n        this._isCancelled = false;\r\n    }\r\n    cancel() {\r\n        if (!this._isCancelled) {\r\n            this._isCancelled = true;\r\n            if (this._emitter) {\r\n                this._emitter.fire(undefined);\r\n                this.dispose();\r\n            }\r\n        }\r\n    }\r\n    get isCancellationRequested() {\r\n        return this._isCancelled;\r\n    }\r\n    get onCancellationRequested() {\r\n        if (this._isCancelled) {\r\n            return shortcutEvent;\r\n        }\r\n        if (!this._emitter) {\r\n            this._emitter = new events_1.Emitter();\r\n        }\r\n        return this._emitter.event;\r\n    }\r\n    dispose() {\r\n        if (this._emitter) {\r\n            this._emitter.dispose();\r\n            this._emitter = undefined;\r\n        }\r\n    }\r\n}\r\nclass CancellationTokenSource {\r\n    get token() {\r\n        if (!this._token) {\r\n            // be lazy and create the token only when\r\n            // actually needed\r\n            this._token = new MutableToken();\r\n        }\r\n        return this._token;\r\n    }\r\n    cancel() {\r\n        if (!this._token) {\r\n            // save an object by returning the default\r\n            // cancelled token when cancellation happens\r\n            // before someone asks for the token\r\n            this._token = CancellationToken.Cancelled;\r\n        }\r\n        else {\r\n            this._token.cancel();\r\n        }\r\n    }\r\n    dispose() {\r\n        if (!this._token) {\r\n            // ensure to initialize with an empty token if we had none\r\n            this._token = CancellationToken.None;\r\n        }\r\n        else if (this._token instanceof MutableToken) {\r\n            // actually dispose\r\n            this._token.dispose();\r\n        }\r\n    }\r\n}\r\nexports.CancellationTokenSource = CancellationTokenSource;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Disposable;\r\n(function (Disposable) {\r\n    function create(func) {\r\n        return {\r\n            dispose: func\r\n        };\r\n    }\r\n    Disposable.create = create;\r\n})(Disposable = exports.Disposable || (exports.Disposable = {}));\r\nvar Event;\r\n(function (Event) {\r\n    const _disposable = { dispose() { } };\r\n    Event.None = function () { return _disposable; };\r\n})(Event = exports.Event || (exports.Event = {}));\r\nclass CallbackList {\r\n    add(callback, context = null, bucket) {\r\n        if (!this._callbacks) {\r\n            this._callbacks = [];\r\n            this._contexts = [];\r\n        }\r\n        this._callbacks.push(callback);\r\n        this._contexts.push(context);\r\n        if (Array.isArray(bucket)) {\r\n            bucket.push({ dispose: () => this.remove(callback, context) });\r\n        }\r\n    }\r\n    remove(callback, context = null) {\r\n        if (!this._callbacks) {\r\n            return;\r\n        }\r\n        var foundCallbackWithDifferentContext = false;\r\n        for (var i = 0, len = this._callbacks.length; i < len; i++) {\r\n            if (this._callbacks[i] === callback) {\r\n                if (this._contexts[i] === context) {\r\n                    // callback & context match => remove it\r\n                    this._callbacks.splice(i, 1);\r\n                    this._contexts.splice(i, 1);\r\n                    return;\r\n                }\r\n                else {\r\n                    foundCallbackWithDifferentContext = true;\r\n                }\r\n            }\r\n        }\r\n        if (foundCallbackWithDifferentContext) {\r\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\r\n        }\r\n    }\r\n    invoke(...args) {\r\n        if (!this._callbacks) {\r\n            return [];\r\n        }\r\n        var ret = [], callbacks = this._callbacks.slice(0), contexts = this._contexts.slice(0);\r\n        for (var i = 0, len = callbacks.length; i < len; i++) {\r\n            try {\r\n                ret.push(callbacks[i].apply(contexts[i], args));\r\n            }\r\n            catch (e) {\r\n                // eslint-disable-next-line no-console\r\n                console.error(e);\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n    isEmpty() {\r\n        return !this._callbacks || this._callbacks.length === 0;\r\n    }\r\n    dispose() {\r\n        this._callbacks = undefined;\r\n        this._contexts = undefined;\r\n    }\r\n}\r\nclass Emitter {\r\n    constructor(_options) {\r\n        this._options = _options;\r\n    }\r\n    /**\r\n     * For the public to allow to subscribe\r\n     * to events from this Emitter\r\n     */\r\n    get event() {\r\n        if (!this._event) {\r\n            this._event = (listener, thisArgs, disposables) => {\r\n                if (!this._callbacks) {\r\n                    this._callbacks = new CallbackList();\r\n                }\r\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\r\n                    this._options.onFirstListenerAdd(this);\r\n                }\r\n                this._callbacks.add(listener, thisArgs);\r\n                let result;\r\n                result = {\r\n                    dispose: () => {\r\n                        this._callbacks.remove(listener, thisArgs);\r\n                        result.dispose = Emitter._noop;\r\n                        if (this._options && this._options.onLastListenerRemove && this._callbacks.isEmpty()) {\r\n                            this._options.onLastListenerRemove(this);\r\n                        }\r\n                    }\r\n                };\r\n                if (Array.isArray(disposables)) {\r\n                    disposables.push(result);\r\n                }\r\n                return result;\r\n            };\r\n        }\r\n        return this._event;\r\n    }\r\n    /**\r\n     * To be kept private to fire an event to\r\n     * subscribers\r\n     */\r\n    fire(event) {\r\n        if (this._callbacks) {\r\n            this._callbacks.invoke.call(this._callbacks, event);\r\n        }\r\n    }\r\n    dispose() {\r\n        if (this._callbacks) {\r\n            this._callbacks.dispose();\r\n            this._callbacks = undefined;\r\n        }\r\n    }\r\n}\r\nexports.Emitter = Emitter;\r\nEmitter._noop = function () { };\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Touch;\r\n(function (Touch) {\r\n    Touch.None = 0;\r\n    Touch.First = 1;\r\n    Touch.Last = 2;\r\n})(Touch = exports.Touch || (exports.Touch = {}));\r\nclass LinkedMap {\r\n    constructor() {\r\n        this._map = new Map();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    clear() {\r\n        this._map.clear();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    isEmpty() {\r\n        return !this._head && !this._tail;\r\n    }\r\n    get size() {\r\n        return this._size;\r\n    }\r\n    has(key) {\r\n        return this._map.has(key);\r\n    }\r\n    get(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return item.value;\r\n    }\r\n    set(key, value, touch = Touch.None) {\r\n        let item = this._map.get(key);\r\n        if (item) {\r\n            item.value = value;\r\n            if (touch !== Touch.None) {\r\n                this.touch(item, touch);\r\n            }\r\n        }\r\n        else {\r\n            item = { key, value, next: undefined, previous: undefined };\r\n            switch (touch) {\r\n                case Touch.None:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                case Touch.First:\r\n                    this.addItemFirst(item);\r\n                    break;\r\n                case Touch.Last:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                default:\r\n                    this.addItemLast(item);\r\n                    break;\r\n            }\r\n            this._map.set(key, item);\r\n            this._size++;\r\n        }\r\n    }\r\n    delete(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return false;\r\n        }\r\n        this._map.delete(key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return true;\r\n    }\r\n    shift() {\r\n        if (!this._head && !this._tail) {\r\n            return undefined;\r\n        }\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        const item = this._head;\r\n        this._map.delete(item.key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return item.value;\r\n    }\r\n    forEach(callbackfn, thisArg) {\r\n        let current = this._head;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.next;\r\n        }\r\n    }\r\n    forEachReverse(callbackfn, thisArg) {\r\n        let current = this._tail;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.previous;\r\n        }\r\n    }\r\n    values() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.value);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    keys() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.key);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    /* JSON RPC run on es5 which has no Symbol.iterator\r\n    public keys(): IterableIterator<K> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<K> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<K> {\r\n                if (current) {\r\n                    let result = { value: current.key, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n\r\n    public values(): IterableIterator<V> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<V> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<V> {\r\n                if (current) {\r\n                    let result = { value: current.value, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n    */\r\n    addItemFirst(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._tail = item;\r\n        }\r\n        else if (!this._head) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n        }\r\n        this._head = item;\r\n    }\r\n    addItemLast(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._head = item;\r\n        }\r\n        else if (!this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n        }\r\n        this._tail = item;\r\n    }\r\n    removeItem(item) {\r\n        if (item === this._head && item === this._tail) {\r\n            this._head = undefined;\r\n            this._tail = undefined;\r\n        }\r\n        else if (item === this._head) {\r\n            this._head = item.next;\r\n        }\r\n        else if (item === this._tail) {\r\n            this._tail = item.previous;\r\n        }\r\n        else {\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            if (!next || !previous) {\r\n                throw new Error('Invalid list');\r\n            }\r\n            next.previous = previous;\r\n            previous.next = next;\r\n        }\r\n    }\r\n    touch(item, touch) {\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        if ((touch !== Touch.First && touch !== Touch.Last)) {\r\n            return;\r\n        }\r\n        if (touch === Touch.First) {\r\n            if (item === this._head) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item\r\n            if (item === this._tail) {\r\n                // previous must be defined since item was not head but is tail\r\n                // So there are more than on item in the map\r\n                previous.next = undefined;\r\n                this._tail = previous;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            // Insert the node at head\r\n            item.previous = undefined;\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n            this._head = item;\r\n        }\r\n        else if (touch === Touch.Last) {\r\n            if (item === this._tail) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item.\r\n            if (item === this._head) {\r\n                // next must be defined since item was not tail but is head\r\n                // So there are more than on item in the map\r\n                next.previous = undefined;\r\n                this._head = next;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            item.next = undefined;\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n            this._tail = item;\r\n        }\r\n    }\r\n}\r\nexports.LinkedMap = LinkedMap;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n/// <reference path=\"../typings/thenable.d.ts\" />\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./is\");\r\nconst messages_1 = require(\"./messages\");\r\nexports.RequestType = messages_1.RequestType;\r\nexports.RequestType0 = messages_1.RequestType0;\r\nexports.RequestType1 = messages_1.RequestType1;\r\nexports.RequestType2 = messages_1.RequestType2;\r\nexports.RequestType3 = messages_1.RequestType3;\r\nexports.RequestType4 = messages_1.RequestType4;\r\nexports.RequestType5 = messages_1.RequestType5;\r\nexports.RequestType6 = messages_1.RequestType6;\r\nexports.RequestType7 = messages_1.RequestType7;\r\nexports.RequestType8 = messages_1.RequestType8;\r\nexports.RequestType9 = messages_1.RequestType9;\r\nexports.ResponseError = messages_1.ResponseError;\r\nexports.ErrorCodes = messages_1.ErrorCodes;\r\nexports.NotificationType = messages_1.NotificationType;\r\nexports.NotificationType0 = messages_1.NotificationType0;\r\nexports.NotificationType1 = messages_1.NotificationType1;\r\nexports.NotificationType2 = messages_1.NotificationType2;\r\nexports.NotificationType3 = messages_1.NotificationType3;\r\nexports.NotificationType4 = messages_1.NotificationType4;\r\nexports.NotificationType5 = messages_1.NotificationType5;\r\nexports.NotificationType6 = messages_1.NotificationType6;\r\nexports.NotificationType7 = messages_1.NotificationType7;\r\nexports.NotificationType8 = messages_1.NotificationType8;\r\nexports.NotificationType9 = messages_1.NotificationType9;\r\nconst messageReader_1 = require(\"./messageReader\");\r\nexports.MessageReader = messageReader_1.MessageReader;\r\nexports.StreamMessageReader = messageReader_1.StreamMessageReader;\r\nexports.IPCMessageReader = messageReader_1.IPCMessageReader;\r\nexports.SocketMessageReader = messageReader_1.SocketMessageReader;\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nexports.MessageWriter = messageWriter_1.MessageWriter;\r\nexports.StreamMessageWriter = messageWriter_1.StreamMessageWriter;\r\nexports.IPCMessageWriter = messageWriter_1.IPCMessageWriter;\r\nexports.SocketMessageWriter = messageWriter_1.SocketMessageWriter;\r\nconst events_1 = require(\"./events\");\r\nexports.Disposable = events_1.Disposable;\r\nexports.Event = events_1.Event;\r\nexports.Emitter = events_1.Emitter;\r\nconst cancellation_1 = require(\"./cancellation\");\r\nexports.CancellationTokenSource = cancellation_1.CancellationTokenSource;\r\nexports.CancellationToken = cancellation_1.CancellationToken;\r\nconst linkedMap_1 = require(\"./linkedMap\");\r\n__export(require(\"./pipeSupport\"));\r\n__export(require(\"./socketSupport\"));\r\nvar CancelNotification;\r\n(function (CancelNotification) {\r\n    CancelNotification.type = new messages_1.NotificationType('$/cancelRequest');\r\n})(CancelNotification || (CancelNotification = {}));\r\nvar ProgressNotification;\r\n(function (ProgressNotification) {\r\n    ProgressNotification.type = new messages_1.NotificationType('$/progress');\r\n})(ProgressNotification || (ProgressNotification = {}));\r\nclass ProgressType {\r\n    constructor() {\r\n    }\r\n}\r\nexports.ProgressType = ProgressType;\r\nexports.NullLogger = Object.freeze({\r\n    error: () => { },\r\n    warn: () => { },\r\n    info: () => { },\r\n    log: () => { }\r\n});\r\nvar Trace;\r\n(function (Trace) {\r\n    Trace[Trace[\"Off\"] = 0] = \"Off\";\r\n    Trace[Trace[\"Messages\"] = 1] = \"Messages\";\r\n    Trace[Trace[\"Verbose\"] = 2] = \"Verbose\";\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\n(function (Trace) {\r\n    function fromString(value) {\r\n        if (!Is.string(value)) {\r\n            return Trace.Off;\r\n        }\r\n        value = value.toLowerCase();\r\n        switch (value) {\r\n            case 'off':\r\n                return Trace.Off;\r\n            case 'messages':\r\n                return Trace.Messages;\r\n            case 'verbose':\r\n                return Trace.Verbose;\r\n            default:\r\n                return Trace.Off;\r\n        }\r\n    }\r\n    Trace.fromString = fromString;\r\n    function toString(value) {\r\n        switch (value) {\r\n            case Trace.Off:\r\n                return 'off';\r\n            case Trace.Messages:\r\n                return 'messages';\r\n            case Trace.Verbose:\r\n                return 'verbose';\r\n            default:\r\n                return 'off';\r\n        }\r\n    }\r\n    Trace.toString = toString;\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\nvar TraceFormat;\r\n(function (TraceFormat) {\r\n    TraceFormat[\"Text\"] = \"text\";\r\n    TraceFormat[\"JSON\"] = \"json\";\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\n(function (TraceFormat) {\r\n    function fromString(value) {\r\n        value = value.toLowerCase();\r\n        if (value === 'json') {\r\n            return TraceFormat.JSON;\r\n        }\r\n        else {\r\n            return TraceFormat.Text;\r\n        }\r\n    }\r\n    TraceFormat.fromString = fromString;\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\nvar SetTraceNotification;\r\n(function (SetTraceNotification) {\r\n    SetTraceNotification.type = new messages_1.NotificationType('$/setTraceNotification');\r\n})(SetTraceNotification = exports.SetTraceNotification || (exports.SetTraceNotification = {}));\r\nvar LogTraceNotification;\r\n(function (LogTraceNotification) {\r\n    LogTraceNotification.type = new messages_1.NotificationType('$/logTraceNotification');\r\n})(LogTraceNotification = exports.LogTraceNotification || (exports.LogTraceNotification = {}));\r\nvar ConnectionErrors;\r\n(function (ConnectionErrors) {\r\n    /**\r\n     * The connection is closed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Closed\"] = 1] = \"Closed\";\r\n    /**\r\n     * The connection got disposed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Disposed\"] = 2] = \"Disposed\";\r\n    /**\r\n     * The connection is already in listening mode.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"AlreadyListening\"] = 3] = \"AlreadyListening\";\r\n})(ConnectionErrors = exports.ConnectionErrors || (exports.ConnectionErrors = {}));\r\nclass ConnectionError extends Error {\r\n    constructor(code, message) {\r\n        super(message);\r\n        this.code = code;\r\n        Object.setPrototypeOf(this, ConnectionError.prototype);\r\n    }\r\n}\r\nexports.ConnectionError = ConnectionError;\r\nvar ConnectionStrategy;\r\n(function (ConnectionStrategy) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.cancelUndispatched);\r\n    }\r\n    ConnectionStrategy.is = is;\r\n})(ConnectionStrategy = exports.ConnectionStrategy || (exports.ConnectionStrategy = {}));\r\nvar ConnectionState;\r\n(function (ConnectionState) {\r\n    ConnectionState[ConnectionState[\"New\"] = 1] = \"New\";\r\n    ConnectionState[ConnectionState[\"Listening\"] = 2] = \"Listening\";\r\n    ConnectionState[ConnectionState[\"Closed\"] = 3] = \"Closed\";\r\n    ConnectionState[ConnectionState[\"Disposed\"] = 4] = \"Disposed\";\r\n})(ConnectionState || (ConnectionState = {}));\r\nfunction _createMessageConnection(messageReader, messageWriter, logger, strategy) {\r\n    let sequenceNumber = 0;\r\n    let notificationSquenceNumber = 0;\r\n    let unknownResponseSquenceNumber = 0;\r\n    const version = '2.0';\r\n    let starRequestHandler = undefined;\r\n    let requestHandlers = Object.create(null);\r\n    let starNotificationHandler = undefined;\r\n    let notificationHandlers = Object.create(null);\r\n    let progressHandlers = new Map();\r\n    let timer;\r\n    let messageQueue = new linkedMap_1.LinkedMap();\r\n    let responsePromises = Object.create(null);\r\n    let requestTokens = Object.create(null);\r\n    let trace = Trace.Off;\r\n    let traceFormat = TraceFormat.Text;\r\n    let tracer;\r\n    let state = ConnectionState.New;\r\n    let errorEmitter = new events_1.Emitter();\r\n    let closeEmitter = new events_1.Emitter();\r\n    let unhandledNotificationEmitter = new events_1.Emitter();\r\n    let unhandledProgressEmitter = new events_1.Emitter();\r\n    let disposeEmitter = new events_1.Emitter();\r\n    function createRequestQueueKey(id) {\r\n        return 'req-' + id.toString();\r\n    }\r\n    function createResponseQueueKey(id) {\r\n        if (id === null) {\r\n            return 'res-unknown-' + (++unknownResponseSquenceNumber).toString();\r\n        }\r\n        else {\r\n            return 'res-' + id.toString();\r\n        }\r\n    }\r\n    function createNotificationQueueKey() {\r\n        return 'not-' + (++notificationSquenceNumber).toString();\r\n    }\r\n    function addMessageToQueue(queue, message) {\r\n        if (messages_1.isRequestMessage(message)) {\r\n            queue.set(createRequestQueueKey(message.id), message);\r\n        }\r\n        else if (messages_1.isResponseMessage(message)) {\r\n            queue.set(createResponseQueueKey(message.id), message);\r\n        }\r\n        else {\r\n            queue.set(createNotificationQueueKey(), message);\r\n        }\r\n    }\r\n    function cancelUndispatched(_message) {\r\n        return undefined;\r\n    }\r\n    function isListening() {\r\n        return state === ConnectionState.Listening;\r\n    }\r\n    function isClosed() {\r\n        return state === ConnectionState.Closed;\r\n    }\r\n    function isDisposed() {\r\n        return state === ConnectionState.Disposed;\r\n    }\r\n    function closeHandler() {\r\n        if (state === ConnectionState.New || state === ConnectionState.Listening) {\r\n            state = ConnectionState.Closed;\r\n            closeEmitter.fire(undefined);\r\n        }\r\n        // If the connection is disposed don't sent close events.\r\n    }\r\n    function readErrorHandler(error) {\r\n        errorEmitter.fire([error, undefined, undefined]);\r\n    }\r\n    function writeErrorHandler(data) {\r\n        errorEmitter.fire(data);\r\n    }\r\n    messageReader.onClose(closeHandler);\r\n    messageReader.onError(readErrorHandler);\r\n    messageWriter.onClose(closeHandler);\r\n    messageWriter.onError(writeErrorHandler);\r\n    function triggerMessageQueue() {\r\n        if (timer || messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        timer = setImmediate(() => {\r\n            timer = undefined;\r\n            processMessageQueue();\r\n        });\r\n    }\r\n    function processMessageQueue() {\r\n        if (messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        let message = messageQueue.shift();\r\n        try {\r\n            if (messages_1.isRequestMessage(message)) {\r\n                handleRequest(message);\r\n            }\r\n            else if (messages_1.isNotificationMessage(message)) {\r\n                handleNotification(message);\r\n            }\r\n            else if (messages_1.isResponseMessage(message)) {\r\n                handleResponse(message);\r\n            }\r\n            else {\r\n                handleInvalidMessage(message);\r\n            }\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    }\r\n    let callback = (message) => {\r\n        try {\r\n            // We have received a cancellation message. Check if the message is still in the queue\r\n            // and cancel it if allowed to do so.\r\n            if (messages_1.isNotificationMessage(message) && message.method === CancelNotification.type.method) {\r\n                let key = createRequestQueueKey(message.params.id);\r\n                let toCancel = messageQueue.get(key);\r\n                if (messages_1.isRequestMessage(toCancel)) {\r\n                    let response = strategy && strategy.cancelUndispatched ? strategy.cancelUndispatched(toCancel, cancelUndispatched) : cancelUndispatched(toCancel);\r\n                    if (response && (response.error !== void 0 || response.result !== void 0)) {\r\n                        messageQueue.delete(key);\r\n                        response.id = toCancel.id;\r\n                        traceSendingResponse(response, message.method, Date.now());\r\n                        messageWriter.write(response);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n            addMessageToQueue(messageQueue, message);\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    };\r\n    function handleRequest(requestMessage) {\r\n        if (isDisposed()) {\r\n            // we return here silently since we fired an event when the\r\n            // connection got disposed.\r\n            return;\r\n        }\r\n        function reply(resultOrError, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id\r\n            };\r\n            if (resultOrError instanceof messages_1.ResponseError) {\r\n                message.error = resultOrError.toJson();\r\n            }\r\n            else {\r\n                message.result = resultOrError === void 0 ? null : resultOrError;\r\n            }\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replyError(error, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                error: error.toJson()\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replySuccess(result, method, startTime) {\r\n            // The JSON RPC defines that a response must either have a result or an error\r\n            // So we can't treat undefined as a valid response result.\r\n            if (result === void 0) {\r\n                result = null;\r\n            }\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                result: result\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        traceReceivedRequest(requestMessage);\r\n        let element = requestHandlers[requestMessage.method];\r\n        let type;\r\n        let requestHandler;\r\n        if (element) {\r\n            type = element.type;\r\n            requestHandler = element.handler;\r\n        }\r\n        let startTime = Date.now();\r\n        if (requestHandler || starRequestHandler) {\r\n            let cancellationSource = new cancellation_1.CancellationTokenSource();\r\n            let tokenKey = String(requestMessage.id);\r\n            requestTokens[tokenKey] = cancellationSource;\r\n            try {\r\n                let handlerResult;\r\n                if (requestMessage.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, cancellationSource.token);\r\n                }\r\n                else if (Is.array(requestMessage.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(...requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, ...requestMessage.params, cancellationSource.token);\r\n                }\r\n                else {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, requestMessage.params, cancellationSource.token);\r\n                }\r\n                let promise = handlerResult;\r\n                if (!handlerResult) {\r\n                    delete requestTokens[tokenKey];\r\n                    replySuccess(handlerResult, requestMessage.method, startTime);\r\n                }\r\n                else if (promise.then) {\r\n                    promise.then((resultOrError) => {\r\n                        delete requestTokens[tokenKey];\r\n                        reply(resultOrError, requestMessage.method, startTime);\r\n                    }, error => {\r\n                        delete requestTokens[tokenKey];\r\n                        if (error instanceof messages_1.ResponseError) {\r\n                            replyError(error, requestMessage.method, startTime);\r\n                        }\r\n                        else if (error && Is.string(error.message)) {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                        }\r\n                        else {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    delete requestTokens[tokenKey];\r\n                    reply(handlerResult, requestMessage.method, startTime);\r\n                }\r\n            }\r\n            catch (error) {\r\n                delete requestTokens[tokenKey];\r\n                if (error instanceof messages_1.ResponseError) {\r\n                    reply(error, requestMessage.method, startTime);\r\n                }\r\n                else if (error && Is.string(error.message)) {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                }\r\n                else {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound, `Unhandled method ${requestMessage.method}`), requestMessage.method, startTime);\r\n        }\r\n    }\r\n    function handleResponse(responseMessage) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        if (responseMessage.id === null) {\r\n            if (responseMessage.error) {\r\n                logger.error(`Received response message without id: Error is: \\n${JSON.stringify(responseMessage.error, undefined, 4)}`);\r\n            }\r\n            else {\r\n                logger.error(`Received response message without id. No further error information provided.`);\r\n            }\r\n        }\r\n        else {\r\n            let key = String(responseMessage.id);\r\n            let responsePromise = responsePromises[key];\r\n            traceReceivedResponse(responseMessage, responsePromise);\r\n            if (responsePromise) {\r\n                delete responsePromises[key];\r\n                try {\r\n                    if (responseMessage.error) {\r\n                        let error = responseMessage.error;\r\n                        responsePromise.reject(new messages_1.ResponseError(error.code, error.message, error.data));\r\n                    }\r\n                    else if (responseMessage.result !== void 0) {\r\n                        responsePromise.resolve(responseMessage.result);\r\n                    }\r\n                    else {\r\n                        throw new Error('Should never happen.');\r\n                    }\r\n                }\r\n                catch (error) {\r\n                    if (error.message) {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed with message: ${error.message}`);\r\n                    }\r\n                    else {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed unexpectedly.`);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function handleNotification(message) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        let type = undefined;\r\n        let notificationHandler;\r\n        if (message.method === CancelNotification.type.method) {\r\n            notificationHandler = (params) => {\r\n                let id = params.id;\r\n                let source = requestTokens[String(id)];\r\n                if (source) {\r\n                    source.cancel();\r\n                }\r\n            };\r\n        }\r\n        else {\r\n            let element = notificationHandlers[message.method];\r\n            if (element) {\r\n                notificationHandler = element.handler;\r\n                type = element.type;\r\n            }\r\n        }\r\n        if (notificationHandler || starNotificationHandler) {\r\n            try {\r\n                traceReceivedNotification(message);\r\n                if (message.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    notificationHandler ? notificationHandler() : starNotificationHandler(message.method);\r\n                }\r\n                else if (Is.array(message.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    notificationHandler ? notificationHandler(...message.params) : starNotificationHandler(message.method, ...message.params);\r\n                }\r\n                else {\r\n                    notificationHandler ? notificationHandler(message.params) : starNotificationHandler(message.method, message.params);\r\n                }\r\n            }\r\n            catch (error) {\r\n                if (error.message) {\r\n                    logger.error(`Notification handler '${message.method}' failed with message: ${error.message}`);\r\n                }\r\n                else {\r\n                    logger.error(`Notification handler '${message.method}' failed unexpectedly.`);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            unhandledNotificationEmitter.fire(message);\r\n        }\r\n    }\r\n    function handleInvalidMessage(message) {\r\n        if (!message) {\r\n            logger.error('Received empty message.');\r\n            return;\r\n        }\r\n        logger.error(`Received message which is neither a response nor a notification message:\\n${JSON.stringify(message, null, 4)}`);\r\n        // Test whether we find an id to reject the promise\r\n        let responseMessage = message;\r\n        if (Is.string(responseMessage.id) || Is.number(responseMessage.id)) {\r\n            let key = String(responseMessage.id);\r\n            let responseHandler = responsePromises[key];\r\n            if (responseHandler) {\r\n                responseHandler.reject(new Error('The received response has neither a result nor an error property.'));\r\n            }\r\n        }\r\n    }\r\n    function traceSendingRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Sending request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-request', message);\r\n        }\r\n    }\r\n    function traceSendingNotification(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Sending notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-notification', message);\r\n        }\r\n    }\r\n    function traceSendingResponse(message, method, startTime) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            tracer.log(`Sending response '${method} - (${message.id})'. Processing request took ${Date.now() - startTime}ms`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-response', message);\r\n        }\r\n    }\r\n    function traceReceivedRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Received request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-request', message);\r\n        }\r\n    }\r\n    function traceReceivedNotification(message) {\r\n        if (trace === Trace.Off || !tracer || message.method === LogTraceNotification.type.method) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Received notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-notification', message);\r\n        }\r\n    }\r\n    function traceReceivedResponse(message, responsePromise) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            if (responsePromise) {\r\n                let error = message.error ? ` Request failed: ${message.error.message} (${message.error.code}).` : '';\r\n                tracer.log(`Received response '${responsePromise.method} - (${message.id})' in ${Date.now() - responsePromise.timerStart}ms.${error}`, data);\r\n            }\r\n            else {\r\n                tracer.log(`Received response ${message.id} without active response promise.`, data);\r\n            }\r\n        }\r\n        else {\r\n            logLSPMessage('receive-response', message);\r\n        }\r\n    }\r\n    function logLSPMessage(type, message) {\r\n        if (!tracer || trace === Trace.Off) {\r\n            return;\r\n        }\r\n        const lspMessage = {\r\n            isLSPMessage: true,\r\n            type,\r\n            message,\r\n            timestamp: Date.now()\r\n        };\r\n        tracer.log(lspMessage);\r\n    }\r\n    function throwIfClosedOrDisposed() {\r\n        if (isClosed()) {\r\n            throw new ConnectionError(ConnectionErrors.Closed, 'Connection is closed.');\r\n        }\r\n        if (isDisposed()) {\r\n            throw new ConnectionError(ConnectionErrors.Disposed, 'Connection is disposed.');\r\n        }\r\n    }\r\n    function throwIfListening() {\r\n        if (isListening()) {\r\n            throw new ConnectionError(ConnectionErrors.AlreadyListening, 'Connection is already listening');\r\n        }\r\n    }\r\n    function throwIfNotListening() {\r\n        if (!isListening()) {\r\n            throw new Error('Call listen() first.');\r\n        }\r\n    }\r\n    function undefinedToNull(param) {\r\n        if (param === void 0) {\r\n            return null;\r\n        }\r\n        else {\r\n            return param;\r\n        }\r\n    }\r\n    function computeMessageParams(type, params) {\r\n        let result;\r\n        let numberOfParams = type.numberOfParams;\r\n        switch (numberOfParams) {\r\n            case 0:\r\n                result = null;\r\n                break;\r\n            case 1:\r\n                result = undefinedToNull(params[0]);\r\n                break;\r\n            default:\r\n                result = [];\r\n                for (let i = 0; i < params.length && i < numberOfParams; i++) {\r\n                    result.push(undefinedToNull(params[i]));\r\n                }\r\n                if (params.length < numberOfParams) {\r\n                    for (let i = params.length; i < numberOfParams; i++) {\r\n                        result.push(null);\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n        return result;\r\n    }\r\n    let connection = {\r\n        sendNotification: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            let method;\r\n            let messageParams;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        messageParams = params[0];\r\n                        break;\r\n                    default:\r\n                        messageParams = params;\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n            }\r\n            let notificationMessage = {\r\n                jsonrpc: version,\r\n                method: method,\r\n                params: messageParams\r\n            };\r\n            traceSendingNotification(notificationMessage);\r\n            messageWriter.write(notificationMessage);\r\n        },\r\n        onNotification: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starNotificationHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    notificationHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    notificationHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        onProgress: (_type, token, handler) => {\r\n            if (progressHandlers.has(token)) {\r\n                throw new Error(`Progress handler for token ${token} already registered`);\r\n            }\r\n            progressHandlers.set(token, handler);\r\n            return {\r\n                dispose: () => {\r\n                    progressHandlers.delete(token);\r\n                }\r\n            };\r\n        },\r\n        sendProgress: (_type, token, value) => {\r\n            connection.sendNotification(ProgressNotification.type, { token, value });\r\n        },\r\n        onUnhandledProgress: unhandledProgressEmitter.event,\r\n        sendRequest: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfNotListening();\r\n            let method;\r\n            let messageParams;\r\n            let token = undefined;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        // The cancellation token is optional so it can also be undefined.\r\n                        if (cancellation_1.CancellationToken.is(params[0])) {\r\n                            messageParams = null;\r\n                            token = params[0];\r\n                        }\r\n                        else {\r\n                            messageParams = undefinedToNull(params[0]);\r\n                        }\r\n                        break;\r\n                    default:\r\n                        const last = params.length - 1;\r\n                        if (cancellation_1.CancellationToken.is(params[last])) {\r\n                            token = params[last];\r\n                            if (params.length === 2) {\r\n                                messageParams = undefinedToNull(params[0]);\r\n                            }\r\n                            else {\r\n                                messageParams = params.slice(0, last).map(value => undefinedToNull(value));\r\n                            }\r\n                        }\r\n                        else {\r\n                            messageParams = params.map(value => undefinedToNull(value));\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n                let numberOfParams = type.numberOfParams;\r\n                token = cancellation_1.CancellationToken.is(params[numberOfParams]) ? params[numberOfParams] : undefined;\r\n            }\r\n            let id = sequenceNumber++;\r\n            let result = new Promise((resolve, reject) => {\r\n                let requestMessage = {\r\n                    jsonrpc: version,\r\n                    id: id,\r\n                    method: method,\r\n                    params: messageParams\r\n                };\r\n                let responsePromise = { method: method, timerStart: Date.now(), resolve, reject };\r\n                traceSendingRequest(requestMessage);\r\n                try {\r\n                    messageWriter.write(requestMessage);\r\n                }\r\n                catch (e) {\r\n                    // Writing the message failed. So we need to reject the promise.\r\n                    responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError, e.message ? e.message : 'Unknown reason'));\r\n                    responsePromise = null;\r\n                }\r\n                if (responsePromise) {\r\n                    responsePromises[String(id)] = responsePromise;\r\n                }\r\n            });\r\n            if (token) {\r\n                token.onCancellationRequested(() => {\r\n                    connection.sendNotification(CancelNotification.type, { id });\r\n                });\r\n            }\r\n            return result;\r\n        },\r\n        onRequest: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starRequestHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    requestHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    requestHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        trace: (_value, _tracer, sendNotificationOrTraceOptions) => {\r\n            let _sendNotification = false;\r\n            let _traceFormat = TraceFormat.Text;\r\n            if (sendNotificationOrTraceOptions !== void 0) {\r\n                if (Is.boolean(sendNotificationOrTraceOptions)) {\r\n                    _sendNotification = sendNotificationOrTraceOptions;\r\n                }\r\n                else {\r\n                    _sendNotification = sendNotificationOrTraceOptions.sendNotification || false;\r\n                    _traceFormat = sendNotificationOrTraceOptions.traceFormat || TraceFormat.Text;\r\n                }\r\n            }\r\n            trace = _value;\r\n            traceFormat = _traceFormat;\r\n            if (trace === Trace.Off) {\r\n                tracer = undefined;\r\n            }\r\n            else {\r\n                tracer = _tracer;\r\n            }\r\n            if (_sendNotification && !isClosed() && !isDisposed()) {\r\n                connection.sendNotification(SetTraceNotification.type, { value: Trace.toString(_value) });\r\n            }\r\n        },\r\n        onError: errorEmitter.event,\r\n        onClose: closeEmitter.event,\r\n        onUnhandledNotification: unhandledNotificationEmitter.event,\r\n        onDispose: disposeEmitter.event,\r\n        dispose: () => {\r\n            if (isDisposed()) {\r\n                return;\r\n            }\r\n            state = ConnectionState.Disposed;\r\n            disposeEmitter.fire(undefined);\r\n            let error = new Error('Connection got disposed.');\r\n            Object.keys(responsePromises).forEach((key) => {\r\n                responsePromises[key].reject(error);\r\n            });\r\n            responsePromises = Object.create(null);\r\n            requestTokens = Object.create(null);\r\n            messageQueue = new linkedMap_1.LinkedMap();\r\n            // Test for backwards compatibility\r\n            if (Is.func(messageWriter.dispose)) {\r\n                messageWriter.dispose();\r\n            }\r\n            if (Is.func(messageReader.dispose)) {\r\n                messageReader.dispose();\r\n            }\r\n        },\r\n        listen: () => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfListening();\r\n            state = ConnectionState.Listening;\r\n            messageReader.listen(callback);\r\n        },\r\n        inspect: () => {\r\n            // eslint-disable-next-line no-console\r\n            console.log('inspect');\r\n        }\r\n    };\r\n    connection.onNotification(LogTraceNotification.type, (params) => {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        tracer.log(params.message, trace === Trace.Verbose ? params.verbose : undefined);\r\n    });\r\n    connection.onNotification(ProgressNotification.type, (params) => {\r\n        const handler = progressHandlers.get(params.token);\r\n        if (handler) {\r\n            handler(params.value);\r\n        }\r\n        else {\r\n            unhandledProgressEmitter.fire(params);\r\n        }\r\n    });\r\n    return connection;\r\n}\r\nfunction isMessageReader(value) {\r\n    return value.listen !== void 0 && value.read === void 0;\r\n}\r\nfunction isMessageWriter(value) {\r\n    return value.write !== void 0 && value.end === void 0;\r\n}\r\nfunction createMessageConnection(input, output, logger, strategy) {\r\n    if (!logger) {\r\n        logger = exports.NullLogger;\r\n    }\r\n    let reader = isMessageReader(input) ? input : new messageReader_1.StreamMessageReader(input);\r\n    let writer = isMessageWriter(output) ? output : new messageWriter_1.StreamMessageWriter(output);\r\n    return _createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createMessageConnection = createMessageConnection;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet DefaultSize = 8192;\r\nlet CR = Buffer.from('\\r', 'ascii')[0];\r\nlet LF = Buffer.from('\\n', 'ascii')[0];\r\nlet CRLF = '\\r\\n';\r\nclass MessageBuffer {\r\n    constructor(encoding = 'utf8') {\r\n        this.encoding = encoding;\r\n        this.index = 0;\r\n        this.buffer = Buffer.allocUnsafe(DefaultSize);\r\n    }\r\n    append(chunk) {\r\n        var toAppend = chunk;\r\n        if (typeof (chunk) === 'string') {\r\n            var str = chunk;\r\n            var bufferLen = Buffer.byteLength(str, this.encoding);\r\n            toAppend = Buffer.allocUnsafe(bufferLen);\r\n            toAppend.write(str, 0, bufferLen, this.encoding);\r\n        }\r\n        if (this.buffer.length - this.index >= toAppend.length) {\r\n            toAppend.copy(this.buffer, this.index, 0, toAppend.length);\r\n        }\r\n        else {\r\n            var newSize = (Math.ceil((this.index + toAppend.length) / DefaultSize) + 1) * DefaultSize;\r\n            if (this.index === 0) {\r\n                this.buffer = Buffer.allocUnsafe(newSize);\r\n                toAppend.copy(this.buffer, 0, 0, toAppend.length);\r\n            }\r\n            else {\r\n                this.buffer = Buffer.concat([this.buffer.slice(0, this.index), toAppend], newSize);\r\n            }\r\n        }\r\n        this.index += toAppend.length;\r\n    }\r\n    tryReadHeaders() {\r\n        let result = undefined;\r\n        let current = 0;\r\n        while (current + 3 < this.index && (this.buffer[current] !== CR || this.buffer[current + 1] !== LF || this.buffer[current + 2] !== CR || this.buffer[current + 3] !== LF)) {\r\n            current++;\r\n        }\r\n        // No header / body separator found (e.g CRLFCRLF)\r\n        if (current + 3 >= this.index) {\r\n            return result;\r\n        }\r\n        result = Object.create(null);\r\n        let headers = this.buffer.toString('ascii', 0, current).split(CRLF);\r\n        headers.forEach((header) => {\r\n            let index = header.indexOf(':');\r\n            if (index === -1) {\r\n                throw new Error('Message header must separate key and value using :');\r\n            }\r\n            let key = header.substr(0, index);\r\n            let value = header.substr(index + 1).trim();\r\n            result[key] = value;\r\n        });\r\n        let nextStart = current + 4;\r\n        this.buffer = this.buffer.slice(nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    tryReadContent(length) {\r\n        if (this.index < length) {\r\n            return null;\r\n        }\r\n        let result = this.buffer.toString(this.encoding, 0, length);\r\n        let nextStart = length;\r\n        this.buffer.copy(this.buffer, 0, nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    get numberOfBytes() {\r\n        return this.index;\r\n    }\r\n}\r\nvar MessageReader;\r\n(function (MessageReader) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.listen) && Is.func(candidate.dispose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.onClose) && Is.func(candidate.onPartialMessage);\r\n    }\r\n    MessageReader.is = is;\r\n})(MessageReader = exports.MessageReader || (exports.MessageReader = {}));\r\nclass AbstractMessageReader {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n        this.partialMessageEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error) {\r\n        this.errorEmitter.fire(this.asError(error));\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    get onPartialMessage() {\r\n        return this.partialMessageEmitter.event;\r\n    }\r\n    firePartialMessage(info) {\r\n        this.partialMessageEmitter.fire(info);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Reader received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageReader = AbstractMessageReader;\r\nclass StreamMessageReader extends AbstractMessageReader {\r\n    constructor(readable, encoding = 'utf8') {\r\n        super();\r\n        this.readable = readable;\r\n        this.buffer = new MessageBuffer(encoding);\r\n        this._partialMessageTimeout = 10000;\r\n    }\r\n    set partialMessageTimeout(timeout) {\r\n        this._partialMessageTimeout = timeout;\r\n    }\r\n    get partialMessageTimeout() {\r\n        return this._partialMessageTimeout;\r\n    }\r\n    listen(callback) {\r\n        this.nextMessageLength = -1;\r\n        this.messageToken = 0;\r\n        this.partialMessageTimer = undefined;\r\n        this.callback = callback;\r\n        this.readable.on('data', (data) => {\r\n            this.onData(data);\r\n        });\r\n        this.readable.on('error', (error) => this.fireError(error));\r\n        this.readable.on('close', () => this.fireClose());\r\n    }\r\n    onData(data) {\r\n        this.buffer.append(data);\r\n        while (true) {\r\n            if (this.nextMessageLength === -1) {\r\n                let headers = this.buffer.tryReadHeaders();\r\n                if (!headers) {\r\n                    return;\r\n                }\r\n                let contentLength = headers['Content-Length'];\r\n                if (!contentLength) {\r\n                    throw new Error('Header must provide a Content-Length property.');\r\n                }\r\n                let length = parseInt(contentLength);\r\n                if (isNaN(length)) {\r\n                    throw new Error('Content-Length value must be a number.');\r\n                }\r\n                this.nextMessageLength = length;\r\n                // Take the encoding form the header. For compatibility\r\n                // treat both utf-8 and utf8 as node utf8\r\n            }\r\n            var msg = this.buffer.tryReadContent(this.nextMessageLength);\r\n            if (msg === null) {\r\n                /** We haven't received the full message yet. */\r\n                this.setPartialMessageTimer();\r\n                return;\r\n            }\r\n            this.clearPartialMessageTimer();\r\n            this.nextMessageLength = -1;\r\n            this.messageToken++;\r\n            var json = JSON.parse(msg);\r\n            this.callback(json);\r\n        }\r\n    }\r\n    clearPartialMessageTimer() {\r\n        if (this.partialMessageTimer) {\r\n            clearTimeout(this.partialMessageTimer);\r\n            this.partialMessageTimer = undefined;\r\n        }\r\n    }\r\n    setPartialMessageTimer() {\r\n        this.clearPartialMessageTimer();\r\n        if (this._partialMessageTimeout <= 0) {\r\n            return;\r\n        }\r\n        this.partialMessageTimer = setTimeout((token, timeout) => {\r\n            this.partialMessageTimer = undefined;\r\n            if (token === this.messageToken) {\r\n                this.firePartialMessage({ messageToken: token, waitingTime: timeout });\r\n                this.setPartialMessageTimer();\r\n            }\r\n        }, this._partialMessageTimeout, this.messageToken, this._partialMessageTimeout);\r\n    }\r\n}\r\nexports.StreamMessageReader = StreamMessageReader;\r\nclass IPCMessageReader extends AbstractMessageReader {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose());\r\n    }\r\n    listen(callback) {\r\n        this.process.on('message', callback);\r\n    }\r\n}\r\nexports.IPCMessageReader = IPCMessageReader;\r\nclass SocketMessageReader extends StreamMessageReader {\r\n    constructor(socket, encoding = 'utf-8') {\r\n        super(socket, encoding);\r\n    }\r\n}\r\nexports.SocketMessageReader = SocketMessageReader;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet ContentLength = 'Content-Length: ';\r\nlet CRLF = '\\r\\n';\r\nvar MessageWriter;\r\n(function (MessageWriter) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.dispose) && Is.func(candidate.onClose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.write);\r\n    }\r\n    MessageWriter.is = is;\r\n})(MessageWriter = exports.MessageWriter || (exports.MessageWriter = {}));\r\nclass AbstractMessageWriter {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error, message, count) {\r\n        this.errorEmitter.fire([this.asError(error), message, count]);\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Writer received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageWriter = AbstractMessageWriter;\r\nclass StreamMessageWriter extends AbstractMessageWriter {\r\n    constructor(writable, encoding = 'utf8') {\r\n        super();\r\n        this.writable = writable;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.writable.on('error', (error) => this.fireError(error));\r\n        this.writable.on('close', () => this.fireClose());\r\n    }\r\n    write(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.writable.write(headers.join(''), 'ascii');\r\n            // Now write the content. This can be written in any encoding\r\n            this.writable.write(json, this.encoding);\r\n            this.errorCount = 0;\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.StreamMessageWriter = StreamMessageWriter;\r\nclass IPCMessageWriter extends AbstractMessageWriter {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        this.errorCount = 0;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose);\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        try {\r\n            if (this.process.send) {\r\n                this.sending = true;\r\n                this.process.send(msg, undefined, undefined, (error) => {\r\n                    this.sending = false;\r\n                    if (error) {\r\n                        this.errorCount++;\r\n                        this.fireError(error, msg, this.errorCount);\r\n                    }\r\n                    else {\r\n                        this.errorCount = 0;\r\n                    }\r\n                    if (this.queue.length > 0) {\r\n                        this.doWriteMessage(this.queue.shift());\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.IPCMessageWriter = IPCMessageWriter;\r\nclass SocketMessageWriter extends AbstractMessageWriter {\r\n    constructor(socket, encoding = 'utf8') {\r\n        super();\r\n        this.socket = socket;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.socket.on('error', (error) => this.fireError(error));\r\n        this.socket.on('close', () => this.fireClose());\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        this.socket.destroy();\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.sending = true;\r\n            this.socket.write(headers.join(''), 'ascii', (error) => {\r\n                if (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n                try {\r\n                    // Now write the content. This can be written in any encoding\r\n                    this.socket.write(json, this.encoding, (error) => {\r\n                        this.sending = false;\r\n                        if (error) {\r\n                            this.handleError(error, msg);\r\n                        }\r\n                        else {\r\n                            this.errorCount = 0;\r\n                        }\r\n                        if (this.queue.length > 0) {\r\n                            this.doWriteMessage(this.queue.shift());\r\n                        }\r\n                    });\r\n                }\r\n                catch (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n            });\r\n        }\r\n        catch (error) {\r\n            this.handleError(error, msg);\r\n        }\r\n    }\r\n    handleError(error, msg) {\r\n        this.errorCount++;\r\n        this.fireError(error, msg, this.errorCount);\r\n    }\r\n}\r\nexports.SocketMessageWriter = SocketMessageWriter;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst is = require(\"./is\");\r\n/**\r\n * Predefined error codes.\r\n */\r\nvar ErrorCodes;\r\n(function (ErrorCodes) {\r\n    // Defined by JSON RPC\r\n    ErrorCodes.ParseError = -32700;\r\n    ErrorCodes.InvalidRequest = -32600;\r\n    ErrorCodes.MethodNotFound = -32601;\r\n    ErrorCodes.InvalidParams = -32602;\r\n    ErrorCodes.InternalError = -32603;\r\n    ErrorCodes.serverErrorStart = -32099;\r\n    ErrorCodes.serverErrorEnd = -32000;\r\n    ErrorCodes.ServerNotInitialized = -32002;\r\n    ErrorCodes.UnknownErrorCode = -32001;\r\n    // Defined by the protocol.\r\n    ErrorCodes.RequestCancelled = -32800;\r\n    ErrorCodes.ContentModified = -32801;\r\n    // Defined by VSCode library.\r\n    ErrorCodes.MessageWriteError = 1;\r\n    ErrorCodes.MessageReadError = 2;\r\n})(ErrorCodes = exports.ErrorCodes || (exports.ErrorCodes = {}));\r\n/**\r\n * An error object return in a response in case a request\r\n * has failed.\r\n */\r\nclass ResponseError extends Error {\r\n    constructor(code, message, data) {\r\n        super(message);\r\n        this.code = is.number(code) ? code : ErrorCodes.UnknownErrorCode;\r\n        this.data = data;\r\n        Object.setPrototypeOf(this, ResponseError.prototype);\r\n    }\r\n    toJson() {\r\n        return {\r\n            code: this.code,\r\n            message: this.message,\r\n            data: this.data,\r\n        };\r\n    }\r\n}\r\nexports.ResponseError = ResponseError;\r\n/**\r\n * An abstract implementation of a MessageType.\r\n */\r\nclass AbstractMessageType {\r\n    constructor(_method, _numberOfParams) {\r\n        this._method = _method;\r\n        this._numberOfParams = _numberOfParams;\r\n    }\r\n    get method() {\r\n        return this._method;\r\n    }\r\n    get numberOfParams() {\r\n        return this._numberOfParams;\r\n    }\r\n}\r\nexports.AbstractMessageType = AbstractMessageType;\r\n/**\r\n * Classes to type request response pairs\r\n *\r\n * The type parameter RO will be removed in the next major version\r\n * of the JSON RPC library since it is a LSP concept and doesn't\r\n * belong here. For now it is tagged as default never.\r\n */\r\nclass RequestType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n    }\r\n}\r\nexports.RequestType0 = RequestType0;\r\nclass RequestType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n    }\r\n}\r\nexports.RequestType = RequestType;\r\nclass RequestType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n    }\r\n}\r\nexports.RequestType1 = RequestType1;\r\nclass RequestType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n    }\r\n}\r\nexports.RequestType2 = RequestType2;\r\nclass RequestType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n    }\r\n}\r\nexports.RequestType3 = RequestType3;\r\nclass RequestType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n    }\r\n}\r\nexports.RequestType4 = RequestType4;\r\nclass RequestType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n    }\r\n}\r\nexports.RequestType5 = RequestType5;\r\nclass RequestType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n    }\r\n}\r\nexports.RequestType6 = RequestType6;\r\nclass RequestType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n    }\r\n}\r\nexports.RequestType7 = RequestType7;\r\nclass RequestType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n    }\r\n}\r\nexports.RequestType8 = RequestType8;\r\nclass RequestType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n    }\r\n}\r\nexports.RequestType9 = RequestType9;\r\n/**\r\n * The type parameter RO will be removed in the next major version\r\n * of the JSON RPC library since it is a LSP concept and doesn't\r\n * belong here. For now it is tagged as default never.\r\n */\r\nclass NotificationType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType = NotificationType;\r\nclass NotificationType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n    }\r\n}\r\nexports.NotificationType0 = NotificationType0;\r\nclass NotificationType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n    }\r\n}\r\nexports.NotificationType1 = NotificationType1;\r\nclass NotificationType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n    }\r\n}\r\nexports.NotificationType2 = NotificationType2;\r\nclass NotificationType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n    }\r\n}\r\nexports.NotificationType3 = NotificationType3;\r\nclass NotificationType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n    }\r\n}\r\nexports.NotificationType4 = NotificationType4;\r\nclass NotificationType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n    }\r\n}\r\nexports.NotificationType5 = NotificationType5;\r\nclass NotificationType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n    }\r\n}\r\nexports.NotificationType6 = NotificationType6;\r\nclass NotificationType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n    }\r\n}\r\nexports.NotificationType7 = NotificationType7;\r\nclass NotificationType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n    }\r\n}\r\nexports.NotificationType8 = NotificationType8;\r\nclass NotificationType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n    }\r\n}\r\nexports.NotificationType9 = NotificationType9;\r\n/**\r\n * Tests if the given message is a request message\r\n */\r\nfunction isRequestMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && (is.string(candidate.id) || is.number(candidate.id));\r\n}\r\nexports.isRequestMessage = isRequestMessage;\r\n/**\r\n * Tests if the given message is a notification message\r\n */\r\nfunction isNotificationMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && message.id === void 0;\r\n}\r\nexports.isNotificationMessage = isNotificationMessage;\r\n/**\r\n * Tests if the given message is a response message\r\n */\r\nfunction isResponseMessage(message) {\r\n    let candidate = message;\r\n    return candidate && (candidate.result !== void 0 || !!candidate.error) && (is.string(candidate.id) || is.number(candidate.id) || candidate.id === null);\r\n}\r\nexports.isResponseMessage = isResponseMessage;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst path_1 = require(\"path\");\r\nconst os_1 = require(\"os\");\r\nconst crypto_1 = require(\"crypto\");\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction generateRandomPipeName() {\r\n    const randomSuffix = crypto_1.randomBytes(21).toString('hex');\r\n    if (process.platform === 'win32') {\r\n        return `\\\\\\\\.\\\\pipe\\\\vscode-jsonrpc-${randomSuffix}-sock`;\r\n    }\r\n    else {\r\n        // Mac/Unix: use socket file\r\n        return path_1.join(os_1.tmpdir(), `vscode-${randomSuffix}.sock`);\r\n    }\r\n}\r\nexports.generateRandomPipeName = generateRandomPipeName;\r\nfunction createClientPipeTransport(pipeName, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(pipeName, () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientPipeTransport = createClientPipeTransport;\r\nfunction createServerPipeTransport(pipeName, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(pipeName);\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerPipeTransport = createServerPipeTransport;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction createClientSocketTransport(port, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(port, '127.0.0.1', () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientSocketTransport = createClientSocketTransport;\r\nfunction createServerSocketTransport(port, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(port, '127.0.0.1');\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerSocketTransport = createServerSocketTransport;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nvar protocol2code;\r\n(function (protocol2code) {\r\n    function asCallHierarchyItem(converter, item) {\r\n        if (item === null) {\r\n            return undefined;\r\n        }\r\n        let result = new vscode_1.CallHierarchyItem(converter.asSymbolKind(item.kind), item.name, item.detail || '', converter.asUri(item.uri), converter.asRange(item.range), converter.asRange(item.selectionRange));\r\n        if (item.tags !== undefined) {\r\n            result.tags = converter.asSymbolTags(item.tags);\r\n        }\r\n        return result;\r\n    }\r\n    protocol2code.asCallHierarchyItem = asCallHierarchyItem;\r\n    function asCallHierarchyItems(converter, items) {\r\n        if (items === null) {\r\n            return undefined;\r\n        }\r\n        let result = items.map(item => asCallHierarchyItem(converter, item));\r\n        return result[0];\r\n    }\r\n    protocol2code.asCallHierarchyItems = asCallHierarchyItems;\r\n    function asCallHierarchyIncomingCall(converter, item) {\r\n        return new vscode_1.CallHierarchyIncomingCall(asCallHierarchyItem(converter, item.from), converter.asRanges(item.fromRanges));\r\n    }\r\n    protocol2code.asCallHierarchyIncomingCall = asCallHierarchyIncomingCall;\r\n    function asCallHierarchyIncomingCalls(converter, items) {\r\n        if (items === null) {\r\n            return undefined;\r\n        }\r\n        return items.map(item => asCallHierarchyIncomingCall(converter, item));\r\n    }\r\n    protocol2code.asCallHierarchyIncomingCalls = asCallHierarchyIncomingCalls;\r\n    function asCallHierarchyOutgoingCall(converter, item) {\r\n        return new vscode_1.CallHierarchyOutgoingCall(asCallHierarchyItem(converter, item.to), converter.asRanges(item.fromRanges));\r\n    }\r\n    protocol2code.asCallHierarchyOutgoingCall = asCallHierarchyOutgoingCall;\r\n    function asCallHierarchyOutgoingCalls(converter, items) {\r\n        if (items === null) {\r\n            return undefined;\r\n        }\r\n        return items.map(item => asCallHierarchyOutgoingCall(converter, item));\r\n    }\r\n    protocol2code.asCallHierarchyOutgoingCalls = asCallHierarchyOutgoingCalls;\r\n})(protocol2code || (protocol2code = {}));\r\nvar code2protocol;\r\n(function (code2protocol) {\r\n    function asCallHierarchyItem(converter, value) {\r\n        const result = {\r\n            name: value.name,\r\n            kind: converter.asSymbolKind(value.kind),\r\n            uri: converter.asUri(value.uri),\r\n            range: converter.asRange(value.range),\r\n            selectionRange: converter.asRange(value.selectionRange)\r\n        };\r\n        if (value.detail !== undefined && value.detail.length > 0) {\r\n            result.detail = value.detail;\r\n        }\r\n        if (value.tags !== undefined) {\r\n            result.tags = converter.asSymbolTags(value.tags);\r\n        }\r\n        return result;\r\n    }\r\n    code2protocol.asCallHierarchyItem = asCallHierarchyItem;\r\n})(code2protocol || (code2protocol = {}));\r\nclass CallHierarchyProvider {\r\n    constructor(client) {\r\n        this.client = client;\r\n        this.middleware = client.clientOptions.middleware;\r\n    }\r\n    prepareCallHierarchy(document, position, token) {\r\n        const client = this.client;\r\n        const middleware = this.middleware;\r\n        const prepareCallHierarchy = (document, position, token) => {\r\n            const params = client.code2ProtocolConverter.asTextDocumentPositionParams(document, position);\r\n            return client.sendRequest(vscode_languageserver_protocol_1.Proposed.CallHierarchyPrepareRequest.type, params, token).then((result) => {\r\n                return protocol2code.asCallHierarchyItems(this.client.protocol2CodeConverter, result);\r\n            }, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.Proposed.CallHierarchyPrepareRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        return middleware.prepareCallHierarchy\r\n            ? middleware.prepareCallHierarchy(document, position, token, prepareCallHierarchy)\r\n            : prepareCallHierarchy(document, position, token);\r\n    }\r\n    provideCallHierarchyIncomingCalls(item, token) {\r\n        const client = this.client;\r\n        const middleware = this.middleware;\r\n        const provideCallHierarchyIncomingCalls = (item, token) => {\r\n            const params = {\r\n                item: code2protocol.asCallHierarchyItem(client.code2ProtocolConverter, item)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.Proposed.CallHierarchyIncomingCallsRequest.type, params, token).then((result) => {\r\n                return protocol2code.asCallHierarchyIncomingCalls(client.protocol2CodeConverter, result);\r\n            }, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.Proposed.CallHierarchyIncomingCallsRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        return middleware.provideCallHierarchyIncomingCalls\r\n            ? middleware.provideCallHierarchyIncomingCalls(item, token, provideCallHierarchyIncomingCalls)\r\n            : provideCallHierarchyIncomingCalls(item, token);\r\n    }\r\n    provideCallHierarchyOutgoingCalls(item, token) {\r\n        const client = this.client;\r\n        const middleware = this.middleware;\r\n        const provideCallHierarchyOutgoingCalls = (item, token) => {\r\n            const params = {\r\n                item: code2protocol.asCallHierarchyItem(client.code2ProtocolConverter, item)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.Proposed.CallHierarchyOutgoingCallsRequest.type, params, token).then((result) => {\r\n                return protocol2code.asCallHierarchyOutgoingCalls(client.protocol2CodeConverter, result);\r\n            }, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.Proposed.CallHierarchyOutgoingCallsRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        return middleware.provideCallHierarchyOutgingCalls\r\n            ? middleware.provideCallHierarchyOutgingCalls(item, token, provideCallHierarchyOutgoingCalls)\r\n            : provideCallHierarchyOutgoingCalls(item, token);\r\n    }\r\n}\r\nclass CallHierarchyFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.Proposed.CallHierarchyPrepareRequest.type);\r\n    }\r\n    fillClientCapabilities(cap) {\r\n        const capabilites = cap;\r\n        const capability = ensure(ensure(capabilites, 'textDocument'), 'callHierarchy');\r\n        capability.dynamicRegistration = true;\r\n    }\r\n    initialize(cap, documentSelector) {\r\n        const capabilities = cap;\r\n        const [id, options] = this.getRegistration(documentSelector, capabilities.callHierarchyProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const client = this._client;\r\n        const provider = new CallHierarchyProvider(client);\r\n        return [vscode_1.languages.registerCallHierarchyProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nexports.CallHierarchyFeature = CallHierarchyFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst c2p = require(\"./codeConverter\");\r\nconst p2c = require(\"./protocolConverter\");\r\nconst Is = require(\"./utils/is\");\r\nconst async_1 = require(\"./utils/async\");\r\nconst UUID = require(\"./utils/uuid\");\r\nconst progressPart_1 = require(\"./progressPart\");\r\n__export(require(\"vscode-languageserver-protocol\"));\r\nclass ConsoleLogger {\r\n    error(message) {\r\n        console.error(message);\r\n    }\r\n    warn(message) {\r\n        console.warn(message);\r\n    }\r\n    info(message) {\r\n        console.info(message);\r\n    }\r\n    log(message) {\r\n        console.log(message);\r\n    }\r\n}\r\nfunction createConnection(input, output, errorHandler, closeHandler) {\r\n    let logger = new ConsoleLogger();\r\n    let connection = vscode_languageserver_protocol_1.createProtocolConnection(input, output, logger);\r\n    connection.onError((data) => { errorHandler(data[0], data[1], data[2]); });\r\n    connection.onClose(closeHandler);\r\n    let result = {\r\n        listen: () => connection.listen(),\r\n        sendRequest: (type, ...params) => connection.sendRequest(Is.string(type) ? type : type.method, ...params),\r\n        onRequest: (type, handler) => connection.onRequest(Is.string(type) ? type : type.method, handler),\r\n        sendNotification: (type, params) => connection.sendNotification(Is.string(type) ? type : type.method, params),\r\n        onNotification: (type, handler) => connection.onNotification(Is.string(type) ? type : type.method, handler),\r\n        onProgress: connection.onProgress,\r\n        sendProgress: connection.sendProgress,\r\n        trace: (value, tracer, sendNotificationOrTraceOptions) => {\r\n            const defaultTraceOptions = {\r\n                sendNotification: false,\r\n                traceFormat: vscode_languageserver_protocol_1.TraceFormat.Text\r\n            };\r\n            if (sendNotificationOrTraceOptions === void 0) {\r\n                connection.trace(value, tracer, defaultTraceOptions);\r\n            }\r\n            else if (Is.boolean(sendNotificationOrTraceOptions)) {\r\n                connection.trace(value, tracer, sendNotificationOrTraceOptions);\r\n            }\r\n            else {\r\n                connection.trace(value, tracer, sendNotificationOrTraceOptions);\r\n            }\r\n        },\r\n        initialize: (params) => connection.sendRequest(vscode_languageserver_protocol_1.InitializeRequest.type, params),\r\n        shutdown: () => connection.sendRequest(vscode_languageserver_protocol_1.ShutdownRequest.type, undefined),\r\n        exit: () => connection.sendNotification(vscode_languageserver_protocol_1.ExitNotification.type),\r\n        onLogMessage: (handler) => connection.onNotification(vscode_languageserver_protocol_1.LogMessageNotification.type, handler),\r\n        onShowMessage: (handler) => connection.onNotification(vscode_languageserver_protocol_1.ShowMessageNotification.type, handler),\r\n        onTelemetry: (handler) => connection.onNotification(vscode_languageserver_protocol_1.TelemetryEventNotification.type, handler),\r\n        didChangeConfiguration: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, params),\r\n        didChangeWatchedFiles: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type, params),\r\n        didOpenTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, params),\r\n        didChangeTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params),\r\n        didCloseTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, params),\r\n        didSaveTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, params),\r\n        onDiagnostics: (handler) => connection.onNotification(vscode_languageserver_protocol_1.PublishDiagnosticsNotification.type, handler),\r\n        dispose: () => connection.dispose()\r\n    };\r\n    return result;\r\n}\r\n/**\r\n * An action to be performed when the connection is producing errors.\r\n */\r\nvar ErrorAction;\r\n(function (ErrorAction) {\r\n    /**\r\n     * Continue running the server.\r\n     */\r\n    ErrorAction[ErrorAction[\"Continue\"] = 1] = \"Continue\";\r\n    /**\r\n     * Shutdown the server.\r\n     */\r\n    ErrorAction[ErrorAction[\"Shutdown\"] = 2] = \"Shutdown\";\r\n})(ErrorAction = exports.ErrorAction || (exports.ErrorAction = {}));\r\n/**\r\n * An action to be performed when the connection to a server got closed.\r\n */\r\nvar CloseAction;\r\n(function (CloseAction) {\r\n    /**\r\n     * Don't restart the server. The connection stays closed.\r\n     */\r\n    CloseAction[CloseAction[\"DoNotRestart\"] = 1] = \"DoNotRestart\";\r\n    /**\r\n     * Restart the server.\r\n     */\r\n    CloseAction[CloseAction[\"Restart\"] = 2] = \"Restart\";\r\n})(CloseAction = exports.CloseAction || (exports.CloseAction = {}));\r\nclass DefaultErrorHandler {\r\n    constructor(name) {\r\n        this.name = name;\r\n        this.restarts = [];\r\n    }\r\n    error(_error, _message, count) {\r\n        if (count && count <= 3) {\r\n            return ErrorAction.Continue;\r\n        }\r\n        return ErrorAction.Shutdown;\r\n    }\r\n    closed() {\r\n        this.restarts.push(Date.now());\r\n        if (this.restarts.length < 5) {\r\n            return CloseAction.Restart;\r\n        }\r\n        else {\r\n            let diff = this.restarts[this.restarts.length - 1] - this.restarts[0];\r\n            if (diff <= 3 * 60 * 1000) {\r\n                vscode_1.window.showErrorMessage(`The ${this.name} server crashed 5 times in the last 3 minutes. The server will not be restarted.`);\r\n                return CloseAction.DoNotRestart;\r\n            }\r\n            else {\r\n                this.restarts.shift();\r\n                return CloseAction.Restart;\r\n            }\r\n        }\r\n    }\r\n}\r\nvar RevealOutputChannelOn;\r\n(function (RevealOutputChannelOn) {\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Info\"] = 1] = \"Info\";\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Warn\"] = 2] = \"Warn\";\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Error\"] = 3] = \"Error\";\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Never\"] = 4] = \"Never\";\r\n})(RevealOutputChannelOn = exports.RevealOutputChannelOn || (exports.RevealOutputChannelOn = {}));\r\nvar State;\r\n(function (State) {\r\n    State[State[\"Stopped\"] = 1] = \"Stopped\";\r\n    State[State[\"Starting\"] = 3] = \"Starting\";\r\n    State[State[\"Running\"] = 2] = \"Running\";\r\n})(State = exports.State || (exports.State = {}));\r\nvar ClientState;\r\n(function (ClientState) {\r\n    ClientState[ClientState[\"Initial\"] = 0] = \"Initial\";\r\n    ClientState[ClientState[\"Starting\"] = 1] = \"Starting\";\r\n    ClientState[ClientState[\"StartFailed\"] = 2] = \"StartFailed\";\r\n    ClientState[ClientState[\"Running\"] = 3] = \"Running\";\r\n    ClientState[ClientState[\"Stopping\"] = 4] = \"Stopping\";\r\n    ClientState[ClientState[\"Stopped\"] = 5] = \"Stopped\";\r\n})(ClientState || (ClientState = {}));\r\nconst SupportedSymbolKinds = [\r\n    vscode_languageserver_protocol_1.SymbolKind.File,\r\n    vscode_languageserver_protocol_1.SymbolKind.Module,\r\n    vscode_languageserver_protocol_1.SymbolKind.Namespace,\r\n    vscode_languageserver_protocol_1.SymbolKind.Package,\r\n    vscode_languageserver_protocol_1.SymbolKind.Class,\r\n    vscode_languageserver_protocol_1.SymbolKind.Method,\r\n    vscode_languageserver_protocol_1.SymbolKind.Property,\r\n    vscode_languageserver_protocol_1.SymbolKind.Field,\r\n    vscode_languageserver_protocol_1.SymbolKind.Constructor,\r\n    vscode_languageserver_protocol_1.SymbolKind.Enum,\r\n    vscode_languageserver_protocol_1.SymbolKind.Interface,\r\n    vscode_languageserver_protocol_1.SymbolKind.Function,\r\n    vscode_languageserver_protocol_1.SymbolKind.Variable,\r\n    vscode_languageserver_protocol_1.SymbolKind.Constant,\r\n    vscode_languageserver_protocol_1.SymbolKind.String,\r\n    vscode_languageserver_protocol_1.SymbolKind.Number,\r\n    vscode_languageserver_protocol_1.SymbolKind.Boolean,\r\n    vscode_languageserver_protocol_1.SymbolKind.Array,\r\n    vscode_languageserver_protocol_1.SymbolKind.Object,\r\n    vscode_languageserver_protocol_1.SymbolKind.Key,\r\n    vscode_languageserver_protocol_1.SymbolKind.Null,\r\n    vscode_languageserver_protocol_1.SymbolKind.EnumMember,\r\n    vscode_languageserver_protocol_1.SymbolKind.Struct,\r\n    vscode_languageserver_protocol_1.SymbolKind.Event,\r\n    vscode_languageserver_protocol_1.SymbolKind.Operator,\r\n    vscode_languageserver_protocol_1.SymbolKind.TypeParameter\r\n];\r\nconst SupportedCompletionItemKinds = [\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Text,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Method,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Function,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Constructor,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Field,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Variable,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Class,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Interface,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Module,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Property,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Unit,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Value,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Enum,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Keyword,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Snippet,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Color,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.File,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Reference,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Folder,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.EnumMember,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Constant,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Struct,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Event,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Operator,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.TypeParameter\r\n];\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nvar DynamicFeature;\r\n(function (DynamicFeature) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.register) && Is.func(candidate.unregister) && Is.func(candidate.dispose) && candidate.messages !== void 0;\r\n    }\r\n    DynamicFeature.is = is;\r\n})(DynamicFeature || (DynamicFeature = {}));\r\nclass DocumentNotifiactions {\r\n    constructor(_client, _event, _type, _middleware, _createParams, _selectorFilter) {\r\n        this._client = _client;\r\n        this._event = _event;\r\n        this._type = _type;\r\n        this._middleware = _middleware;\r\n        this._createParams = _createParams;\r\n        this._selectorFilter = _selectorFilter;\r\n        this._selectors = new Map();\r\n    }\r\n    static textDocumentFilter(selectors, textDocument) {\r\n        for (const selector of selectors) {\r\n            if (vscode_1.languages.match(selector, textDocument)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    register(_message, data) {\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        if (!this._listener) {\r\n            this._listener = this._event(this.callback, this);\r\n        }\r\n        this._selectors.set(data.id, data.registerOptions.documentSelector);\r\n    }\r\n    callback(data) {\r\n        if (!this._selectorFilter || this._selectorFilter(this._selectors.values(), data)) {\r\n            if (this._middleware) {\r\n                this._middleware(data, (data) => this._client.sendNotification(this._type, this._createParams(data)));\r\n            }\r\n            else {\r\n                this._client.sendNotification(this._type, this._createParams(data));\r\n            }\r\n            this.notificationSent(data);\r\n        }\r\n    }\r\n    notificationSent(_data) {\r\n    }\r\n    unregister(id) {\r\n        this._selectors.delete(id);\r\n        if (this._selectors.size === 0 && this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    dispose() {\r\n        this._selectors.clear();\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    getProvider(document) {\r\n        for (const selector of this._selectors.values()) {\r\n            if (vscode_1.languages.match(selector, document)) {\r\n                return {\r\n                    send: (data) => {\r\n                        this.callback(data);\r\n                    }\r\n                };\r\n            }\r\n        }\r\n        throw new Error(`No provider available for the given text document`);\r\n    }\r\n}\r\nclass DidOpenTextDocumentFeature extends DocumentNotifiactions {\r\n    constructor(client, _syncedDocuments) {\r\n        super(client, vscode_1.workspace.onDidOpenTextDocument, vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, client.clientOptions.middleware.didOpen, (textDocument) => client.code2ProtocolConverter.asOpenTextDocumentParams(textDocument), DocumentNotifiactions.textDocumentFilter);\r\n        this._syncedDocuments = _syncedDocuments;\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.openClose) {\r\n            this.register(this.messages, { id: UUID.generateUuid(), registerOptions: { documentSelector: documentSelector } });\r\n        }\r\n    }\r\n    register(message, data) {\r\n        super.register(message, data);\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        let documentSelector = data.registerOptions.documentSelector;\r\n        vscode_1.workspace.textDocuments.forEach((textDocument) => {\r\n            let uri = textDocument.uri.toString();\r\n            if (this._syncedDocuments.has(uri)) {\r\n                return;\r\n            }\r\n            if (vscode_1.languages.match(documentSelector, textDocument)) {\r\n                let middleware = this._client.clientOptions.middleware;\r\n                let didOpen = (textDocument) => {\r\n                    this._client.sendNotification(this._type, this._createParams(textDocument));\r\n                };\r\n                if (middleware.didOpen) {\r\n                    middleware.didOpen(textDocument, didOpen);\r\n                }\r\n                else {\r\n                    didOpen(textDocument);\r\n                }\r\n                this._syncedDocuments.set(uri, textDocument);\r\n            }\r\n        });\r\n    }\r\n    notificationSent(textDocument) {\r\n        super.notificationSent(textDocument);\r\n        this._syncedDocuments.set(textDocument.uri.toString(), textDocument);\r\n    }\r\n}\r\nclass DidCloseTextDocumentFeature extends DocumentNotifiactions {\r\n    constructor(client, _syncedDocuments) {\r\n        super(client, vscode_1.workspace.onDidCloseTextDocument, vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, client.clientOptions.middleware.didClose, (textDocument) => client.code2ProtocolConverter.asCloseTextDocumentParams(textDocument), DocumentNotifiactions.textDocumentFilter);\r\n        this._syncedDocuments = _syncedDocuments;\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.openClose) {\r\n            this.register(this.messages, { id: UUID.generateUuid(), registerOptions: { documentSelector: documentSelector } });\r\n        }\r\n    }\r\n    notificationSent(textDocument) {\r\n        super.notificationSent(textDocument);\r\n        this._syncedDocuments.delete(textDocument.uri.toString());\r\n    }\r\n    unregister(id) {\r\n        let selector = this._selectors.get(id);\r\n        // The super call removed the selector from the map\r\n        // of selectors.\r\n        super.unregister(id);\r\n        let selectors = this._selectors.values();\r\n        this._syncedDocuments.forEach((textDocument) => {\r\n            if (vscode_1.languages.match(selector, textDocument) && !this._selectorFilter(selectors, textDocument)) {\r\n                let middleware = this._client.clientOptions.middleware;\r\n                let didClose = (textDocument) => {\r\n                    this._client.sendNotification(this._type, this._createParams(textDocument));\r\n                };\r\n                this._syncedDocuments.delete(textDocument.uri.toString());\r\n                if (middleware.didClose) {\r\n                    middleware.didClose(textDocument, didClose);\r\n                }\r\n                else {\r\n                    didClose(textDocument);\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DidChangeTextDocumentFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._changeData = new Map();\r\n        this._forcingDelivery = false;\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.change !== void 0 && textDocumentSyncOptions.change !== vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, { syncKind: textDocumentSyncOptions.change })\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        if (!this._listener) {\r\n            this._listener = vscode_1.workspace.onDidChangeTextDocument(this.callback, this);\r\n        }\r\n        this._changeData.set(data.id, {\r\n            documentSelector: data.registerOptions.documentSelector,\r\n            syncKind: data.registerOptions.syncKind\r\n        });\r\n    }\r\n    callback(event) {\r\n        // Text document changes are send for dirty changes as well. We don't\r\n        // have dirty / undirty events in the LSP so we ignore content changes\r\n        // with length zero.\r\n        if (event.contentChanges.length === 0) {\r\n            return;\r\n        }\r\n        for (const changeData of this._changeData.values()) {\r\n            if (vscode_1.languages.match(changeData.documentSelector, event.document)) {\r\n                let middleware = this._client.clientOptions.middleware;\r\n                if (changeData.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Incremental) {\r\n                    let params = this._client.code2ProtocolConverter.asChangeTextDocumentParams(event);\r\n                    if (middleware.didChange) {\r\n                        middleware.didChange(event, () => this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params));\r\n                    }\r\n                    else {\r\n                        this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params);\r\n                    }\r\n                }\r\n                else if (changeData.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Full) {\r\n                    let didChange = (event) => {\r\n                        if (this._changeDelayer) {\r\n                            if (this._changeDelayer.uri !== event.document.uri.toString()) {\r\n                                // Use this force delivery to track boolean state. Otherwise we might call two times.\r\n                                this.forceDelivery();\r\n                                this._changeDelayer.uri = event.document.uri.toString();\r\n                            }\r\n                            this._changeDelayer.delayer.trigger(() => {\r\n                                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, this._client.code2ProtocolConverter.asChangeTextDocumentParams(event.document));\r\n                            });\r\n                        }\r\n                        else {\r\n                            this._changeDelayer = {\r\n                                uri: event.document.uri.toString(),\r\n                                delayer: new async_1.Delayer(200)\r\n                            };\r\n                            this._changeDelayer.delayer.trigger(() => {\r\n                                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, this._client.code2ProtocolConverter.asChangeTextDocumentParams(event.document));\r\n                            }, -1);\r\n                        }\r\n                    };\r\n                    if (middleware.didChange) {\r\n                        middleware.didChange(event, didChange);\r\n                    }\r\n                    else {\r\n                        didChange(event);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    unregister(id) {\r\n        this._changeData.delete(id);\r\n        if (this._changeData.size === 0 && this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    dispose() {\r\n        this._changeDelayer = undefined;\r\n        this._forcingDelivery = false;\r\n        this._changeData.clear();\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    forceDelivery() {\r\n        if (this._forcingDelivery || !this._changeDelayer) {\r\n            return;\r\n        }\r\n        try {\r\n            this._forcingDelivery = true;\r\n            this._changeDelayer.delayer.forceDelivery();\r\n        }\r\n        finally {\r\n            this._forcingDelivery = false;\r\n        }\r\n    }\r\n    getProvider(document) {\r\n        for (const changeData of this._changeData.values()) {\r\n            if (vscode_1.languages.match(changeData.documentSelector, document)) {\r\n                return {\r\n                    send: (event) => {\r\n                        this.callback(event);\r\n                    }\r\n                };\r\n            }\r\n        }\r\n        throw new Error(`No provider available for the given text document`);\r\n    }\r\n}\r\nclass WillSaveFeature extends DocumentNotifiactions {\r\n    constructor(client) {\r\n        super(client, vscode_1.workspace.onWillSaveTextDocument, vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type, client.clientOptions.middleware.willSave, (willSaveEvent) => client.code2ProtocolConverter.asWillSaveTextDocumentParams(willSaveEvent), (selectors, willSaveEvent) => DocumentNotifiactions.textDocumentFilter(selectors, willSaveEvent.document));\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        let value = ensure(ensure(capabilities, 'textDocument'), 'synchronization');\r\n        value.willSave = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.willSave) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: { documentSelector: documentSelector }\r\n            });\r\n        }\r\n    }\r\n}\r\nclass WillSaveWaitUntilFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._selectors = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        let value = ensure(ensure(capabilities, 'textDocument'), 'synchronization');\r\n        value.willSaveWaitUntil = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.willSaveWaitUntil) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: { documentSelector: documentSelector }\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        if (!this._listener) {\r\n            this._listener = vscode_1.workspace.onWillSaveTextDocument(this.callback, this);\r\n        }\r\n        this._selectors.set(data.id, data.registerOptions.documentSelector);\r\n    }\r\n    callback(event) {\r\n        if (DocumentNotifiactions.textDocumentFilter(this._selectors.values(), event.document)) {\r\n            let middleware = this._client.clientOptions.middleware;\r\n            let willSaveWaitUntil = (event) => {\r\n                return this._client.sendRequest(vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type, this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(event)).then((edits) => {\r\n                    let vEdits = this._client.protocol2CodeConverter.asTextEdits(edits);\r\n                    return vEdits === void 0 ? [] : vEdits;\r\n                });\r\n            };\r\n            event.waitUntil(middleware.willSaveWaitUntil\r\n                ? middleware.willSaveWaitUntil(event, willSaveWaitUntil)\r\n                : willSaveWaitUntil(event));\r\n        }\r\n    }\r\n    unregister(id) {\r\n        this._selectors.delete(id);\r\n        if (this._selectors.size === 0 && this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    dispose() {\r\n        this._selectors.clear();\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n}\r\nclass DidSaveTextDocumentFeature extends DocumentNotifiactions {\r\n    constructor(client) {\r\n        super(client, vscode_1.workspace.onDidSaveTextDocument, vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, client.clientOptions.middleware.didSave, (textDocument) => client.code2ProtocolConverter.asSaveTextDocumentParams(textDocument, this._includeText), DocumentNotifiactions.textDocumentFilter);\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').didSave = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.save) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, { includeText: !!textDocumentSyncOptions.save.includeText })\r\n            });\r\n        }\r\n    }\r\n    register(method, data) {\r\n        this._includeText = !!data.registerOptions.includeText;\r\n        super.register(method, data);\r\n    }\r\n}\r\nclass FileSystemWatcherFeature {\r\n    constructor(_client, _notifyFileEvent) {\r\n        this._client = _client;\r\n        this._notifyFileEvent = _notifyFileEvent;\r\n        this._watchers = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'workspace'), 'didChangeWatchedFiles').dynamicRegistration = true;\r\n    }\r\n    initialize(_capabilities, _documentSelector) {\r\n    }\r\n    register(_method, data) {\r\n        if (!Array.isArray(data.registerOptions.watchers)) {\r\n            return;\r\n        }\r\n        let disposeables = [];\r\n        for (let watcher of data.registerOptions.watchers) {\r\n            if (!Is.string(watcher.globPattern)) {\r\n                continue;\r\n            }\r\n            let watchCreate = true, watchChange = true, watchDelete = true;\r\n            if (watcher.kind !== void 0 && watcher.kind !== null) {\r\n                watchCreate = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Create) !== 0;\r\n                watchChange = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Change) !== 0;\r\n                watchDelete = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Delete) !== 0;\r\n            }\r\n            let fileSystemWatcher = vscode_1.workspace.createFileSystemWatcher(watcher.globPattern, !watchCreate, !watchChange, !watchDelete);\r\n            this.hookListeners(fileSystemWatcher, watchCreate, watchChange, watchDelete);\r\n            disposeables.push(fileSystemWatcher);\r\n        }\r\n        this._watchers.set(data.id, disposeables);\r\n    }\r\n    registerRaw(id, fileSystemWatchers) {\r\n        let disposeables = [];\r\n        for (let fileSystemWatcher of fileSystemWatchers) {\r\n            this.hookListeners(fileSystemWatcher, true, true, true, disposeables);\r\n        }\r\n        this._watchers.set(id, disposeables);\r\n    }\r\n    hookListeners(fileSystemWatcher, watchCreate, watchChange, watchDelete, listeners) {\r\n        if (watchCreate) {\r\n            fileSystemWatcher.onDidCreate((resource) => this._notifyFileEvent({\r\n                uri: this._client.code2ProtocolConverter.asUri(resource),\r\n                type: vscode_languageserver_protocol_1.FileChangeType.Created\r\n            }), null, listeners);\r\n        }\r\n        if (watchChange) {\r\n            fileSystemWatcher.onDidChange((resource) => this._notifyFileEvent({\r\n                uri: this._client.code2ProtocolConverter.asUri(resource),\r\n                type: vscode_languageserver_protocol_1.FileChangeType.Changed\r\n            }), null, listeners);\r\n        }\r\n        if (watchDelete) {\r\n            fileSystemWatcher.onDidDelete((resource) => this._notifyFileEvent({\r\n                uri: this._client.code2ProtocolConverter.asUri(resource),\r\n                type: vscode_languageserver_protocol_1.FileChangeType.Deleted\r\n            }), null, listeners);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let disposeables = this._watchers.get(id);\r\n        if (disposeables) {\r\n            for (let disposable of disposeables) {\r\n                disposable.dispose();\r\n            }\r\n        }\r\n    }\r\n    dispose() {\r\n        this._watchers.forEach((disposeables) => {\r\n            for (let disposable of disposeables) {\r\n                disposable.dispose();\r\n            }\r\n        });\r\n        this._watchers.clear();\r\n    }\r\n}\r\nclass TextDocumentFeature {\r\n    constructor(_client, _message) {\r\n        this._client = _client;\r\n        this._message = _message;\r\n        this._registrations = new Map();\r\n    }\r\n    get messages() {\r\n        return this._message;\r\n    }\r\n    register(message, data) {\r\n        if (message.method !== this.messages.method) {\r\n            throw new Error(`Register called on wrong feature. Requested ${message.method} but reached feature ${this.messages.method}`);\r\n        }\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        let registration = this.registerLanguageProvider(data.registerOptions);\r\n        this._registrations.set(data.id, { disposable: registration[0], data, provider: registration[1] });\r\n    }\r\n    unregister(id) {\r\n        let registration = this._registrations.get(id);\r\n        if (registration !== undefined) {\r\n            registration.disposable.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        this._registrations.forEach((value) => {\r\n            value.disposable.dispose();\r\n        });\r\n        this._registrations.clear();\r\n    }\r\n    getRegistration(documentSelector, capability) {\r\n        if (!capability) {\r\n            return [undefined, undefined];\r\n        }\r\n        else if (vscode_languageserver_protocol_1.TextDocumentRegistrationOptions.is(capability)) {\r\n            const id = vscode_languageserver_protocol_1.StaticRegistrationOptions.hasId(capability) ? capability.id : UUID.generateUuid();\r\n            const selector = capability.documentSelector || documentSelector;\r\n            if (selector) {\r\n                return [id, Object.assign({}, capability, { documentSelector: selector })];\r\n            }\r\n        }\r\n        else if (Is.boolean(capability) && capability === true || vscode_languageserver_protocol_1.WorkDoneProgressOptions.is(capability)) {\r\n            if (!documentSelector) {\r\n                return [undefined, undefined];\r\n            }\r\n            let options = (Is.boolean(capability) && capability === true ? { documentSelector } : Object.assign({}, capability, { documentSelector }));\r\n            return [UUID.generateUuid(), options];\r\n        }\r\n        return [undefined, undefined];\r\n    }\r\n    getRegistrationOptions(documentSelector, capability) {\r\n        if (!documentSelector || !capability) {\r\n            return undefined;\r\n        }\r\n        return (Is.boolean(capability) && capability === true ? { documentSelector } : Object.assign({}, capability, { documentSelector }));\r\n    }\r\n    getProvider(textDocument) {\r\n        for (const registration of this._registrations.values()) {\r\n            let selector = registration.data.registerOptions.documentSelector;\r\n            if (selector !== null && vscode_1.languages.match(selector, textDocument)) {\r\n                return registration.provider;\r\n            }\r\n        }\r\n        throw new Error(`The feature has no registration for the provided text document ${textDocument.uri.toString()}`);\r\n    }\r\n}\r\nexports.TextDocumentFeature = TextDocumentFeature;\r\nclass WorkspaceFeature {\r\n    constructor(_client, _message) {\r\n        this._client = _client;\r\n        this._message = _message;\r\n        this._registrations = new Map();\r\n    }\r\n    get messages() {\r\n        return this._message;\r\n    }\r\n    register(message, data) {\r\n        if (message.method !== this.messages.method) {\r\n            throw new Error(`Register called on wron feature. Requested ${message.method} but reached feature ${this.messages.method}`);\r\n        }\r\n        const registration = this.registerLanguageProvider(data.registerOptions);\r\n        this._registrations.set(data.id, { disposable: registration[0], provider: registration[1] });\r\n    }\r\n    unregister(id) {\r\n        let registration = this._registrations.get(id);\r\n        if (registration !== undefined) {\r\n            registration.disposable.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        this._registrations.forEach((registration) => {\r\n            registration.disposable.dispose();\r\n        });\r\n        this._registrations.clear();\r\n    }\r\n    getProviders() {\r\n        const result = [];\r\n        for (const registration of this._registrations.values()) {\r\n            result.push(registration.provider);\r\n        }\r\n        return result;\r\n    }\r\n}\r\nclass CompletionItemFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.CompletionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let completion = ensure(ensure(capabilites, 'textDocument'), 'completion');\r\n        completion.dynamicRegistration = true;\r\n        completion.contextSupport = true;\r\n        completion.completionItem = {\r\n            snippetSupport: true,\r\n            commitCharactersSupport: true,\r\n            documentationFormat: [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText],\r\n            deprecatedSupport: true,\r\n            preselectSupport: true,\r\n            tagSupport: { valueSet: [vscode_languageserver_protocol_1.CompletionItemTag.Deprecated] }\r\n        };\r\n        completion.completionItemKind = { valueSet: SupportedCompletionItemKinds };\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.completionProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: options\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const triggerCharacters = options.triggerCharacters || [];\r\n        const provider = {\r\n            provideCompletionItems: (document, position, token, context) => {\r\n                const client = this._client;\r\n                const middleware = this._client.clientOptions.middleware;\r\n                const provideCompletionItems = (document, position, context, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.CompletionRequest.type, client.code2ProtocolConverter.asCompletionParams(document, position, context), token).then(client.protocol2CodeConverter.asCompletionResult, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.CompletionRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                return middleware.provideCompletionItem\r\n                    ? middleware.provideCompletionItem(document, position, context, token, provideCompletionItems)\r\n                    : provideCompletionItems(document, position, context, token);\r\n            },\r\n            resolveCompletionItem: options.resolveProvider\r\n                ? (item, token) => {\r\n                    const client = this._client;\r\n                    const middleware = this._client.clientOptions.middleware;\r\n                    const resolveCompletionItem = (item, token) => {\r\n                        return client.sendRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, client.code2ProtocolConverter.asCompletionItem(item), token).then(client.protocol2CodeConverter.asCompletionItem, (error) => {\r\n                            client.logFailedRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, error);\r\n                            return Promise.resolve(item);\r\n                        });\r\n                    };\r\n                    return middleware.resolveCompletionItem\r\n                        ? middleware.resolveCompletionItem(item, token, resolveCompletionItem)\r\n                        : resolveCompletionItem(item, token);\r\n                }\r\n                : undefined\r\n        };\r\n        return [vscode_1.languages.registerCompletionItemProvider(options.documentSelector, provider, ...triggerCharacters), provider];\r\n    }\r\n}\r\nclass HoverFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.HoverRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        const hoverCapability = (ensure(ensure(capabilites, 'textDocument'), 'hover'));\r\n        hoverCapability.dynamicRegistration = true;\r\n        hoverCapability.contentFormat = [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText];\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.hoverProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: options\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideHover: (document, position, token) => {\r\n                const client = this._client;\r\n                const provideHover = (document, position, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.HoverRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asHover, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.HoverRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideHover\r\n                    ? middleware.provideHover(document, position, token, provideHover)\r\n                    : provideHover(document, position, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerHoverProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass SignatureHelpFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.SignatureHelpRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let config = ensure(ensure(capabilites, 'textDocument'), 'signatureHelp');\r\n        config.dynamicRegistration = true;\r\n        config.signatureInformation = { documentationFormat: [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText] };\r\n        config.signatureInformation.parameterInformation = { labelOffsetSupport: true };\r\n        config.contextSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.signatureHelpProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: options\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideSignatureHelp: (document, position, token, context) => {\r\n                const client = this._client;\r\n                const providerSignatureHelp = (document, position, context, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, client.code2ProtocolConverter.asSignatureHelpParams(document, position, context), token).then(client.protocol2CodeConverter.asSignatureHelp, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideSignatureHelp\r\n                    ? middleware.provideSignatureHelp(document, position, context, token, providerSignatureHelp)\r\n                    : providerSignatureHelp(document, position, context, token);\r\n            }\r\n        };\r\n        let disposable;\r\n        if (options.retriggerCharacters === undefined) {\r\n            const triggerCharacters = options.triggerCharacters || [];\r\n            disposable = vscode_1.languages.registerSignatureHelpProvider(options.documentSelector, provider, ...triggerCharacters);\r\n        }\r\n        else {\r\n            const metaData = {\r\n                triggerCharacters: options.triggerCharacters || [],\r\n                retriggerCharacters: options.retriggerCharacters || []\r\n            };\r\n            disposable = vscode_1.languages.registerSignatureHelpProvider(options.documentSelector, provider, metaData);\r\n        }\r\n        return [disposable, provider];\r\n    }\r\n}\r\nclass DefinitionFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DefinitionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let definitionSupport = ensure(ensure(capabilites, 'textDocument'), 'definition');\r\n        definitionSupport.dynamicRegistration = true;\r\n        definitionSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.definitionProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideDefinition: (document, position, token) => {\r\n                const client = this._client;\r\n                const provideDefinition = (document, position, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideDefinition\r\n                    ? middleware.provideDefinition(document, position, token, provideDefinition)\r\n                    : provideDefinition(document, position, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerDefinitionProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass ReferencesFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.ReferencesRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'references').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.referencesProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideReferences: (document, position, options, token) => {\r\n                const client = this._client;\r\n                const _providerReferences = (document, position, options, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, client.code2ProtocolConverter.asReferenceParams(document, position, options), token).then(client.protocol2CodeConverter.asReferences, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideReferences\r\n                    ? middleware.provideReferences(document, position, options, token, _providerReferences)\r\n                    : _providerReferences(document, position, options, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerReferenceProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass DocumentHighlightFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentHighlightRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'documentHighlight').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentHighlightProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideDocumentHighlights: (document, position, token) => {\r\n                const client = this._client;\r\n                const _provideDocumentHighlights = (document, position, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDocumentHighlights, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideDocumentHighlights\r\n                    ? middleware.provideDocumentHighlights(document, position, token, _provideDocumentHighlights)\r\n                    : _provideDocumentHighlights(document, position, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerDocumentHighlightProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass DocumentSymbolFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentSymbolRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let symbolCapabilities = ensure(ensure(capabilites, 'textDocument'), 'documentSymbol');\r\n        symbolCapabilities.dynamicRegistration = true;\r\n        symbolCapabilities.symbolKind = {\r\n            valueSet: SupportedSymbolKinds\r\n        };\r\n        symbolCapabilities.hierarchicalDocumentSymbolSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentSymbolProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideDocumentSymbols: (document, token) => {\r\n                const client = this._client;\r\n                const _provideDocumentSymbols = (document, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, client.code2ProtocolConverter.asDocumentSymbolParams(document), token).then((data) => {\r\n                        if (data === null) {\r\n                            return undefined;\r\n                        }\r\n                        if (data.length === 0) {\r\n                            return [];\r\n                        }\r\n                        else {\r\n                            let element = data[0];\r\n                            if (vscode_languageserver_protocol_1.DocumentSymbol.is(element)) {\r\n                                return client.protocol2CodeConverter.asDocumentSymbols(data);\r\n                            }\r\n                            else {\r\n                                return client.protocol2CodeConverter.asSymbolInformations(data);\r\n                            }\r\n                        }\r\n                    }, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideDocumentSymbols\r\n                    ? middleware.provideDocumentSymbols(document, token, _provideDocumentSymbols)\r\n                    : _provideDocumentSymbols(document, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerDocumentSymbolProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass WorkspaceSymbolFeature extends WorkspaceFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let symbolCapabilities = ensure(ensure(capabilites, 'workspace'), 'symbol');\r\n        symbolCapabilities.dynamicRegistration = true;\r\n        symbolCapabilities.symbolKind = {\r\n            valueSet: SupportedSymbolKinds\r\n        };\r\n    }\r\n    initialize(capabilities) {\r\n        if (!capabilities.workspaceSymbolProvider) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: capabilities.workspaceSymbolProvider === true ? { workDoneProgress: false } : capabilities.workspaceSymbolProvider\r\n        });\r\n    }\r\n    registerLanguageProvider(_options) {\r\n        const provider = {\r\n            provideWorkspaceSymbols: (query, token) => {\r\n                const client = this._client;\r\n                const provideWorkspaceSymbols = (query, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, { query }, token).then(client.protocol2CodeConverter.asSymbolInformations, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideWorkspaceSymbols\r\n                    ? middleware.provideWorkspaceSymbols(query, token, provideWorkspaceSymbols)\r\n                    : provideWorkspaceSymbols(query, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerWorkspaceSymbolProvider(provider), provider];\r\n    }\r\n}\r\nclass CodeActionFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.CodeActionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        const cap = ensure(ensure(capabilites, 'textDocument'), 'codeAction');\r\n        cap.dynamicRegistration = true;\r\n        cap.isPreferredSupport = true;\r\n        cap.codeActionLiteralSupport = {\r\n            codeActionKind: {\r\n                valueSet: [\r\n                    vscode_languageserver_protocol_1.CodeActionKind.Empty,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.QuickFix,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.Refactor,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorExtract,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorInline,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorRewrite,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.Source,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.SourceOrganizeImports\r\n                ]\r\n            }\r\n        };\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.codeActionProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideCodeActions: (document, range, context, token) => {\r\n                const client = this._client;\r\n                const _provideCodeActions = (document, range, context, token) => {\r\n                    const params = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                        range: client.code2ProtocolConverter.asRange(range),\r\n                        context: client.code2ProtocolConverter.asCodeActionContext(context)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, params, token).then((values) => {\r\n                        if (values === null) {\r\n                            return undefined;\r\n                        }\r\n                        const result = [];\r\n                        for (let item of values) {\r\n                            if (vscode_languageserver_protocol_1.Command.is(item)) {\r\n                                result.push(client.protocol2CodeConverter.asCommand(item));\r\n                            }\r\n                            else {\r\n                                result.push(client.protocol2CodeConverter.asCodeAction(item));\r\n                            }\r\n                        }\r\n                        return result;\r\n                    }, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideCodeActions\r\n                    ? middleware.provideCodeActions(document, range, context, token, _provideCodeActions)\r\n                    : _provideCodeActions(document, range, context, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerCodeActionsProvider(options.documentSelector, provider, (options.codeActionKinds\r\n                ? { providedCodeActionKinds: this._client.protocol2CodeConverter.asCodeActionKinds(options.codeActionKinds) }\r\n                : undefined)), provider];\r\n    }\r\n}\r\nclass CodeLensFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.CodeLensRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'codeLens').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.codeLensProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideCodeLenses: (document, token) => {\r\n                const client = this._client;\r\n                const provideCodeLenses = (document, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, client.code2ProtocolConverter.asCodeLensParams(document), token).then(client.protocol2CodeConverter.asCodeLenses, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideCodeLenses\r\n                    ? middleware.provideCodeLenses(document, token, provideCodeLenses)\r\n                    : provideCodeLenses(document, token);\r\n            },\r\n            resolveCodeLens: (options.resolveProvider)\r\n                ? (codeLens, token) => {\r\n                    const client = this._client;\r\n                    const resolveCodeLens = (codeLens, token) => {\r\n                        return client.sendRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, client.code2ProtocolConverter.asCodeLens(codeLens), token).then(client.protocol2CodeConverter.asCodeLens, (error) => {\r\n                            client.logFailedRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, error);\r\n                            return codeLens;\r\n                        });\r\n                    };\r\n                    const middleware = client.clientOptions.middleware;\r\n                    return middleware.resolveCodeLens\r\n                        ? middleware.resolveCodeLens(codeLens, token, resolveCodeLens)\r\n                        : resolveCodeLens(codeLens, token);\r\n                }\r\n                : undefined\r\n        };\r\n        return [vscode_1.languages.registerCodeLensProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass DocumentFormattingFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentFormattingRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'formatting').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentFormattingProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideDocumentFormattingEdits: (document, options, token) => {\r\n                const client = this._client;\r\n                const provideDocumentFormattingEdits = (document, options, token) => {\r\n                    const params = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                        options: client.code2ProtocolConverter.asFormattingOptions(options)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideDocumentFormattingEdits\r\n                    ? middleware.provideDocumentFormattingEdits(document, options, token, provideDocumentFormattingEdits)\r\n                    : provideDocumentFormattingEdits(document, options, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerDocumentFormattingEditProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass DocumentRangeFormattingFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'rangeFormatting').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentRangeFormattingProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideDocumentRangeFormattingEdits: (document, range, options, token) => {\r\n                const client = this._client;\r\n                const provideDocumentRangeFormattingEdits = (document, range, options, token) => {\r\n                    let params = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                        range: client.code2ProtocolConverter.asRange(range),\r\n                        options: client.code2ProtocolConverter.asFormattingOptions(options)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                let middleware = client.clientOptions.middleware;\r\n                return middleware.provideDocumentRangeFormattingEdits\r\n                    ? middleware.provideDocumentRangeFormattingEdits(document, range, options, token, provideDocumentRangeFormattingEdits)\r\n                    : provideDocumentRangeFormattingEdits(document, range, options, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerDocumentRangeFormattingEditProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass DocumentOnTypeFormattingFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'onTypeFormatting').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentOnTypeFormattingProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideOnTypeFormattingEdits: (document, position, ch, options, token) => {\r\n                const client = this._client;\r\n                const provideOnTypeFormattingEdits = (document, position, ch, options, token) => {\r\n                    let params = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                        position: client.code2ProtocolConverter.asPosition(position),\r\n                        ch: ch,\r\n                        options: client.code2ProtocolConverter.asFormattingOptions(options)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideOnTypeFormattingEdits\r\n                    ? middleware.provideOnTypeFormattingEdits(document, position, ch, options, token, provideOnTypeFormattingEdits)\r\n                    : provideOnTypeFormattingEdits(document, position, ch, options, token);\r\n            }\r\n        };\r\n        const moreTriggerCharacter = options.moreTriggerCharacter || [];\r\n        return [vscode_1.languages.registerOnTypeFormattingEditProvider(options.documentSelector, provider, options.firstTriggerCharacter, ...moreTriggerCharacter), provider];\r\n    }\r\n}\r\nclass RenameFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.RenameRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let rename = ensure(ensure(capabilites, 'textDocument'), 'rename');\r\n        rename.dynamicRegistration = true;\r\n        rename.prepareSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.renameProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        if (Is.boolean(capabilities.renameProvider)) {\r\n            options.prepareProvider = false;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideRenameEdits: (document, position, newName, token) => {\r\n                const client = this._client;\r\n                const provideRenameEdits = (document, position, newName, token) => {\r\n                    let params = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                        position: client.code2ProtocolConverter.asPosition(position),\r\n                        newName: newName\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.RenameRequest.type, params, token).then(client.protocol2CodeConverter.asWorkspaceEdit, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.RenameRequest.type, error);\r\n                        return Promise.reject(new Error(error.message));\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideRenameEdits\r\n                    ? middleware.provideRenameEdits(document, position, newName, token, provideRenameEdits)\r\n                    : provideRenameEdits(document, position, newName, token);\r\n            },\r\n            prepareRename: options.prepareProvider\r\n                ? (document, position, token) => {\r\n                    const client = this._client;\r\n                    const prepareRename = (document, position, token) => {\r\n                        let params = {\r\n                            textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                            position: client.code2ProtocolConverter.asPosition(position),\r\n                        };\r\n                        return client.sendRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, params, token).then((result) => {\r\n                            if (vscode_languageserver_protocol_1.Range.is(result)) {\r\n                                return client.protocol2CodeConverter.asRange(result);\r\n                            }\r\n                            else if (result && vscode_languageserver_protocol_1.Range.is(result.range)) {\r\n                                return {\r\n                                    range: client.protocol2CodeConverter.asRange(result.range),\r\n                                    placeholder: result.placeholder\r\n                                };\r\n                            }\r\n                            // To cancel the rename vscode API expects a rejected promise.\r\n                            return Promise.reject(new Error(`The element can't be renamed.`));\r\n                        }, (error) => {\r\n                            client.logFailedRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, error);\r\n                            return Promise.reject(new Error(error.message));\r\n                        });\r\n                    };\r\n                    const middleware = client.clientOptions.middleware;\r\n                    return middleware.prepareRename\r\n                        ? middleware.prepareRename(document, position, token, prepareRename)\r\n                        : prepareRename(document, position, token);\r\n                }\r\n                : undefined\r\n        };\r\n        return [vscode_1.languages.registerRenameProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass DocumentLinkFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentLinkRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        const documentLinkCapabilities = ensure(ensure(capabilites, 'textDocument'), 'documentLink');\r\n        documentLinkCapabilities.dynamicRegistration = true;\r\n        documentLinkCapabilities.tooltipSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentLinkProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideDocumentLinks: (document, token) => {\r\n                const client = this._client;\r\n                const provideDocumentLinks = (document, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, client.code2ProtocolConverter.asDocumentLinkParams(document), token).then(client.protocol2CodeConverter.asDocumentLinks, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideDocumentLinks\r\n                    ? middleware.provideDocumentLinks(document, token, provideDocumentLinks)\r\n                    : provideDocumentLinks(document, token);\r\n            },\r\n            resolveDocumentLink: options.resolveProvider\r\n                ? (link, token) => {\r\n                    const client = this._client;\r\n                    let resolveDocumentLink = (link, token) => {\r\n                        return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, client.code2ProtocolConverter.asDocumentLink(link), token).then(client.protocol2CodeConverter.asDocumentLink, (error) => {\r\n                            client.logFailedRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, error);\r\n                            return Promise.resolve(link);\r\n                        });\r\n                    };\r\n                    const middleware = client.clientOptions.middleware;\r\n                    return middleware.resolveDocumentLink\r\n                        ? middleware.resolveDocumentLink(link, token, resolveDocumentLink)\r\n                        : resolveDocumentLink(link, token);\r\n                }\r\n                : undefined\r\n        };\r\n        return [vscode_1.languages.registerDocumentLinkProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass ConfigurationFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._listeners = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'workspace'), 'didChangeConfiguration').dynamicRegistration = true;\r\n    }\r\n    initialize() {\r\n        let section = this._client.clientOptions.synchronize.configurationSection;\r\n        if (section !== void 0) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: {\r\n                    section: section\r\n                }\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        let disposable = vscode_1.workspace.onDidChangeConfiguration((event) => {\r\n            this.onDidChangeConfiguration(data.registerOptions.section, event);\r\n        });\r\n        this._listeners.set(data.id, disposable);\r\n        if (data.registerOptions.section !== void 0) {\r\n            this.onDidChangeConfiguration(data.registerOptions.section, undefined);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let disposable = this._listeners.get(id);\r\n        if (disposable) {\r\n            this._listeners.delete(id);\r\n            disposable.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        for (let disposable of this._listeners.values()) {\r\n            disposable.dispose();\r\n        }\r\n        this._listeners.clear();\r\n    }\r\n    onDidChangeConfiguration(configurationSection, event) {\r\n        let sections;\r\n        if (Is.string(configurationSection)) {\r\n            sections = [configurationSection];\r\n        }\r\n        else {\r\n            sections = configurationSection;\r\n        }\r\n        if (sections !== void 0 && event !== void 0) {\r\n            let affected = sections.some((section) => event.affectsConfiguration(section));\r\n            if (!affected) {\r\n                return;\r\n            }\r\n        }\r\n        let didChangeConfiguration = (sections) => {\r\n            if (sections === void 0) {\r\n                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, { settings: null });\r\n                return;\r\n            }\r\n            this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, { settings: this.extractSettingsInformation(sections) });\r\n        };\r\n        let middleware = this.getMiddleware();\r\n        middleware\r\n            ? middleware(sections, didChangeConfiguration)\r\n            : didChangeConfiguration(sections);\r\n    }\r\n    extractSettingsInformation(keys) {\r\n        function ensurePath(config, path) {\r\n            let current = config;\r\n            for (let i = 0; i < path.length - 1; i++) {\r\n                let obj = current[path[i]];\r\n                if (!obj) {\r\n                    obj = Object.create(null);\r\n                    current[path[i]] = obj;\r\n                }\r\n                current = obj;\r\n            }\r\n            return current;\r\n        }\r\n        let resource = this._client.clientOptions.workspaceFolder\r\n            ? this._client.clientOptions.workspaceFolder.uri\r\n            : undefined;\r\n        let result = Object.create(null);\r\n        for (let i = 0; i < keys.length; i++) {\r\n            let key = keys[i];\r\n            let index = key.indexOf('.');\r\n            let config = null;\r\n            if (index >= 0) {\r\n                config = vscode_1.workspace.getConfiguration(key.substr(0, index), resource).get(key.substr(index + 1));\r\n            }\r\n            else {\r\n                config = vscode_1.workspace.getConfiguration(key, resource);\r\n            }\r\n            if (config) {\r\n                let path = keys[i].split('.');\r\n                ensurePath(result, path)[path[path.length - 1]] = config;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    getMiddleware() {\r\n        let middleware = this._client.clientOptions.middleware;\r\n        if (middleware.workspace && middleware.workspace.didChangeConfiguration) {\r\n            return middleware.workspace.didChangeConfiguration;\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n}\r\nclass ExecuteCommandFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._commands = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.ExecuteCommandRequest.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'workspace'), 'executeCommand').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities) {\r\n        if (!capabilities.executeCommandProvider) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, capabilities.executeCommandProvider)\r\n        });\r\n    }\r\n    register(_message, data) {\r\n        const client = this._client;\r\n        const middleware = client.clientOptions.middleware;\r\n        const executeCommand = (command, args) => {\r\n            let params = {\r\n                command,\r\n                arguments: args\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, params).then(undefined, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, error);\r\n            });\r\n        };\r\n        if (data.registerOptions.commands) {\r\n            const disposeables = [];\r\n            for (const command of data.registerOptions.commands) {\r\n                disposeables.push(vscode_1.commands.registerCommand(command, (...args) => {\r\n                    return middleware.executeCommand\r\n                        ? middleware.executeCommand(command, args, executeCommand)\r\n                        : executeCommand(command, args);\r\n                }));\r\n            }\r\n            this._commands.set(data.id, disposeables);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let disposeables = this._commands.get(id);\r\n        if (disposeables) {\r\n            disposeables.forEach(disposable => disposable.dispose());\r\n        }\r\n    }\r\n    dispose() {\r\n        this._commands.forEach((value) => {\r\n            value.forEach(disposable => disposable.dispose());\r\n        });\r\n        this._commands.clear();\r\n    }\r\n}\r\nvar MessageTransports;\r\n(function (MessageTransports) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && vscode_languageserver_protocol_1.MessageReader.is(value.reader) && vscode_languageserver_protocol_1.MessageWriter.is(value.writer);\r\n    }\r\n    MessageTransports.is = is;\r\n})(MessageTransports = exports.MessageTransports || (exports.MessageTransports = {}));\r\nclass OnReady {\r\n    constructor(_resolve, _reject) {\r\n        this._resolve = _resolve;\r\n        this._reject = _reject;\r\n        this._used = false;\r\n    }\r\n    get isUsed() {\r\n        return this._used;\r\n    }\r\n    resolve() {\r\n        this._used = true;\r\n        this._resolve();\r\n    }\r\n    reject(error) {\r\n        this._used = true;\r\n        this._reject(error);\r\n    }\r\n}\r\nclass BaseLanguageClient {\r\n    constructor(id, name, clientOptions) {\r\n        this._traceFormat = vscode_languageserver_protocol_1.TraceFormat.Text;\r\n        this._features = [];\r\n        this._method2Message = new Map();\r\n        this._dynamicFeatures = new Map();\r\n        this._id = id;\r\n        this._name = name;\r\n        clientOptions = clientOptions || {};\r\n        this._clientOptions = {\r\n            documentSelector: clientOptions.documentSelector || [],\r\n            synchronize: clientOptions.synchronize || {},\r\n            diagnosticCollectionName: clientOptions.diagnosticCollectionName,\r\n            outputChannelName: clientOptions.outputChannelName || this._name,\r\n            revealOutputChannelOn: clientOptions.revealOutputChannelOn || RevealOutputChannelOn.Error,\r\n            stdioEncoding: clientOptions.stdioEncoding || 'utf8',\r\n            initializationOptions: clientOptions.initializationOptions,\r\n            initializationFailedHandler: clientOptions.initializationFailedHandler,\r\n            progressOnInitialization: !!clientOptions.progressOnInitialization,\r\n            errorHandler: clientOptions.errorHandler || new DefaultErrorHandler(this._name),\r\n            middleware: clientOptions.middleware || {},\r\n            uriConverters: clientOptions.uriConverters,\r\n            workspaceFolder: clientOptions.workspaceFolder\r\n        };\r\n        this._clientOptions.synchronize = this._clientOptions.synchronize || {};\r\n        this.state = ClientState.Initial;\r\n        this._connectionPromise = undefined;\r\n        this._resolvedConnection = undefined;\r\n        this._initializeResult = undefined;\r\n        if (clientOptions.outputChannel) {\r\n            this._outputChannel = clientOptions.outputChannel;\r\n            this._disposeOutputChannel = false;\r\n        }\r\n        else {\r\n            this._outputChannel = undefined;\r\n            this._disposeOutputChannel = true;\r\n        }\r\n        this._traceOutputChannel = clientOptions.traceOutputChannel;\r\n        this._listeners = undefined;\r\n        this._providers = undefined;\r\n        this._diagnostics = undefined;\r\n        this._fileEvents = [];\r\n        this._fileEventDelayer = new async_1.Delayer(250);\r\n        this._onReady = new Promise((resolve, reject) => {\r\n            this._onReadyCallbacks = new OnReady(resolve, reject);\r\n        });\r\n        this._onStop = undefined;\r\n        this._telemetryEmitter = new vscode_languageserver_protocol_1.Emitter();\r\n        this._stateChangeEmitter = new vscode_languageserver_protocol_1.Emitter();\r\n        this._tracer = {\r\n            log: (messageOrDataObject, data) => {\r\n                if (Is.string(messageOrDataObject)) {\r\n                    this.logTrace(messageOrDataObject, data);\r\n                }\r\n                else {\r\n                    this.logObjectTrace(messageOrDataObject);\r\n                }\r\n            },\r\n        };\r\n        this._c2p = c2p.createConverter(clientOptions.uriConverters ? clientOptions.uriConverters.code2Protocol : undefined);\r\n        this._p2c = p2c.createConverter(clientOptions.uriConverters ? clientOptions.uriConverters.protocol2Code : undefined);\r\n        this._syncedDocuments = new Map();\r\n        this.registerBuiltinFeatures();\r\n    }\r\n    get state() {\r\n        return this._state;\r\n    }\r\n    set state(value) {\r\n        let oldState = this.getPublicState();\r\n        this._state = value;\r\n        let newState = this.getPublicState();\r\n        if (newState !== oldState) {\r\n            this._stateChangeEmitter.fire({ oldState, newState });\r\n        }\r\n    }\r\n    getPublicState() {\r\n        if (this.state === ClientState.Running) {\r\n            return State.Running;\r\n        }\r\n        else if (this.state === ClientState.Starting) {\r\n            return State.Starting;\r\n        }\r\n        else {\r\n            return State.Stopped;\r\n        }\r\n    }\r\n    get initializeResult() {\r\n        return this._initializeResult;\r\n    }\r\n    sendRequest(type, ...params) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        this.forceDocumentSync();\r\n        try {\r\n            return this._resolvedConnection.sendRequest(type, ...params);\r\n        }\r\n        catch (error) {\r\n            this.error(`Sending request ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    onRequest(type, handler) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        try {\r\n            this._resolvedConnection.onRequest(type, handler);\r\n        }\r\n        catch (error) {\r\n            this.error(`Registering request handler ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    sendNotification(type, params) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        this.forceDocumentSync();\r\n        try {\r\n            this._resolvedConnection.sendNotification(type, params);\r\n        }\r\n        catch (error) {\r\n            this.error(`Sending notification ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    onNotification(type, handler) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        try {\r\n            this._resolvedConnection.onNotification(type, handler);\r\n        }\r\n        catch (error) {\r\n            this.error(`Registering notification handler ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    onProgress(type, token, handler) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        try {\r\n            return this._resolvedConnection.onProgress(type, token, handler);\r\n        }\r\n        catch (error) {\r\n            this.error(`Registering progress handler for token ${token} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    sendProgress(type, token, value) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        this.forceDocumentSync();\r\n        try {\r\n            this._resolvedConnection.sendProgress(type, token, value);\r\n        }\r\n        catch (error) {\r\n            this.error(`Sending progress for token ${token} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    get clientOptions() {\r\n        return this._clientOptions;\r\n    }\r\n    get protocol2CodeConverter() {\r\n        return this._p2c;\r\n    }\r\n    get code2ProtocolConverter() {\r\n        return this._c2p;\r\n    }\r\n    get onTelemetry() {\r\n        return this._telemetryEmitter.event;\r\n    }\r\n    get onDidChangeState() {\r\n        return this._stateChangeEmitter.event;\r\n    }\r\n    get outputChannel() {\r\n        if (!this._outputChannel) {\r\n            this._outputChannel = vscode_1.window.createOutputChannel(this._clientOptions.outputChannelName ? this._clientOptions.outputChannelName : this._name);\r\n        }\r\n        return this._outputChannel;\r\n    }\r\n    get traceOutputChannel() {\r\n        if (this._traceOutputChannel) {\r\n            return this._traceOutputChannel;\r\n        }\r\n        return this.outputChannel;\r\n    }\r\n    get diagnostics() {\r\n        return this._diagnostics;\r\n    }\r\n    createDefaultErrorHandler() {\r\n        return new DefaultErrorHandler(this._name);\r\n    }\r\n    set trace(value) {\r\n        this._trace = value;\r\n        this.onReady().then(() => {\r\n            this.resolveConnection().then((connection) => {\r\n                connection.trace(this._trace, this._tracer, {\r\n                    sendNotification: false,\r\n                    traceFormat: this._traceFormat\r\n                });\r\n            });\r\n        }, () => {\r\n        });\r\n    }\r\n    data2String(data) {\r\n        if (data instanceof vscode_languageserver_protocol_1.ResponseError) {\r\n            const responseError = data;\r\n            return `  Message: ${responseError.message}\\n  Code: ${responseError.code} ${responseError.data ? '\\n' + responseError.data.toString() : ''}`;\r\n        }\r\n        if (data instanceof Error) {\r\n            if (Is.string(data.stack)) {\r\n                return data.stack;\r\n            }\r\n            return data.message;\r\n        }\r\n        if (Is.string(data)) {\r\n            return data;\r\n        }\r\n        return data.toString();\r\n    }\r\n    info(message, data, showNotification = true) {\r\n        this.outputChannel.appendLine(`[Info  - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n        if (showNotification && this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Info) {\r\n            this.showNotificationMessage();\r\n        }\r\n    }\r\n    warn(message, data, showNotification = true) {\r\n        this.outputChannel.appendLine(`[Warn  - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n        if (showNotification && this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Warn) {\r\n            this.showNotificationMessage();\r\n        }\r\n    }\r\n    error(message, data, showNotification = true) {\r\n        this.outputChannel.appendLine(`[Error - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n        if (showNotification && this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Error) {\r\n            this.showNotificationMessage();\r\n        }\r\n    }\r\n    showNotificationMessage() {\r\n        vscode_1.window.showInformationMessage('A request has failed. See the output for more information.', 'Go to output').then(() => {\r\n            this.outputChannel.show(true);\r\n        });\r\n    }\r\n    logTrace(message, data) {\r\n        this.traceOutputChannel.appendLine(`[Trace - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.traceOutputChannel.appendLine(this.data2String(data));\r\n        }\r\n    }\r\n    logObjectTrace(data) {\r\n        if (data.isLSPMessage && data.type) {\r\n            this.traceOutputChannel.append(`[LSP   - ${(new Date().toLocaleTimeString())}] `);\r\n        }\r\n        else {\r\n            this.traceOutputChannel.append(`[Trace - ${(new Date().toLocaleTimeString())}] `);\r\n        }\r\n        if (data) {\r\n            this.traceOutputChannel.appendLine(`${JSON.stringify(data)}`);\r\n        }\r\n    }\r\n    needsStart() {\r\n        return this.state === ClientState.Initial || this.state === ClientState.Stopping || this.state === ClientState.Stopped;\r\n    }\r\n    needsStop() {\r\n        return this.state === ClientState.Starting || this.state === ClientState.Running;\r\n    }\r\n    onReady() {\r\n        return this._onReady;\r\n    }\r\n    isConnectionActive() {\r\n        return this.state === ClientState.Running && !!this._resolvedConnection;\r\n    }\r\n    start() {\r\n        if (this._onReadyCallbacks.isUsed) {\r\n            this._onReady = new Promise((resolve, reject) => {\r\n                this._onReadyCallbacks = new OnReady(resolve, reject);\r\n            });\r\n        }\r\n        this._listeners = [];\r\n        this._providers = [];\r\n        // If we restart then the diagnostics collection is reused.\r\n        if (!this._diagnostics) {\r\n            this._diagnostics = this._clientOptions.diagnosticCollectionName\r\n                ? vscode_1.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName)\r\n                : vscode_1.languages.createDiagnosticCollection();\r\n        }\r\n        this.state = ClientState.Starting;\r\n        this.resolveConnection().then((connection) => {\r\n            connection.onLogMessage((message) => {\r\n                switch (message.type) {\r\n                    case vscode_languageserver_protocol_1.MessageType.Error:\r\n                        this.error(message.message, undefined, false);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\r\n                        this.warn(message.message, undefined, false);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Info:\r\n                        this.info(message.message, undefined, false);\r\n                        break;\r\n                    default:\r\n                        this.outputChannel.appendLine(message.message);\r\n                }\r\n            });\r\n            connection.onShowMessage((message) => {\r\n                switch (message.type) {\r\n                    case vscode_languageserver_protocol_1.MessageType.Error:\r\n                        vscode_1.window.showErrorMessage(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\r\n                        vscode_1.window.showWarningMessage(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Info:\r\n                        vscode_1.window.showInformationMessage(message.message);\r\n                        break;\r\n                    default:\r\n                        vscode_1.window.showInformationMessage(message.message);\r\n                }\r\n            });\r\n            connection.onRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type, (params) => {\r\n                let messageFunc;\r\n                switch (params.type) {\r\n                    case vscode_languageserver_protocol_1.MessageType.Error:\r\n                        messageFunc = vscode_1.window.showErrorMessage;\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\r\n                        messageFunc = vscode_1.window.showWarningMessage;\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Info:\r\n                        messageFunc = vscode_1.window.showInformationMessage;\r\n                        break;\r\n                    default:\r\n                        messageFunc = vscode_1.window.showInformationMessage;\r\n                }\r\n                let actions = params.actions || [];\r\n                return messageFunc(params.message, ...actions);\r\n            });\r\n            connection.onTelemetry((data) => {\r\n                this._telemetryEmitter.fire(data);\r\n            });\r\n            connection.listen();\r\n            // Error is handled in the initialize call.\r\n            return this.initialize(connection);\r\n        }).then(undefined, (error) => {\r\n            this.state = ClientState.StartFailed;\r\n            this._onReadyCallbacks.reject(error);\r\n            this.error('Starting client failed', error);\r\n            vscode_1.window.showErrorMessage(`Couldn't start client ${this._name}`);\r\n        });\r\n        return new vscode_1.Disposable(() => {\r\n            if (this.needsStop()) {\r\n                this.stop();\r\n            }\r\n        });\r\n    }\r\n    resolveConnection() {\r\n        if (!this._connectionPromise) {\r\n            this._connectionPromise = this.createConnection();\r\n        }\r\n        return this._connectionPromise;\r\n    }\r\n    initialize(connection) {\r\n        this.refreshTrace(connection, false);\r\n        let initOption = this._clientOptions.initializationOptions;\r\n        let rootPath = this._clientOptions.workspaceFolder\r\n            ? this._clientOptions.workspaceFolder.uri.fsPath\r\n            : this._clientGetRootPath();\r\n        let initParams = {\r\n            processId: process.pid,\r\n            clientInfo: {\r\n                name: 'vscode',\r\n                version: vscode_1.version\r\n            },\r\n            rootPath: rootPath ? rootPath : null,\r\n            rootUri: rootPath ? this._c2p.asUri(vscode_1.Uri.file(rootPath)) : null,\r\n            capabilities: this.computeClientCapabilities(),\r\n            initializationOptions: Is.func(initOption) ? initOption() : initOption,\r\n            trace: vscode_languageserver_protocol_1.Trace.toString(this._trace),\r\n            workspaceFolders: null\r\n        };\r\n        this.fillInitializeParams(initParams);\r\n        if (this._clientOptions.progressOnInitialization) {\r\n            const token = UUID.generateUuid();\r\n            const part = new progressPart_1.ProgressPart(connection, token);\r\n            initParams.workDoneToken = token;\r\n            return this.doInitialize(connection, initParams).then((result) => {\r\n                part.done();\r\n                return result;\r\n            }, (error) => {\r\n                part.cancel();\r\n                throw error;\r\n            });\r\n        }\r\n        else {\r\n            return this.doInitialize(connection, initParams);\r\n        }\r\n    }\r\n    doInitialize(connection, initParams) {\r\n        return connection.initialize(initParams).then((result) => {\r\n            this._resolvedConnection = connection;\r\n            this._initializeResult = result;\r\n            this.state = ClientState.Running;\r\n            let textDocumentSyncOptions = undefined;\r\n            if (Is.number(result.capabilities.textDocumentSync)) {\r\n                if (result.capabilities.textDocumentSync === vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\r\n                    textDocumentSyncOptions = {\r\n                        openClose: false,\r\n                        change: vscode_languageserver_protocol_1.TextDocumentSyncKind.None,\r\n                        save: undefined\r\n                    };\r\n                }\r\n                else {\r\n                    textDocumentSyncOptions = {\r\n                        openClose: true,\r\n                        change: result.capabilities.textDocumentSync,\r\n                        save: {\r\n                            includeText: false\r\n                        }\r\n                    };\r\n                }\r\n            }\r\n            else if (result.capabilities.textDocumentSync !== void 0 && result.capabilities.textDocumentSync !== null) {\r\n                textDocumentSyncOptions = result.capabilities.textDocumentSync;\r\n            }\r\n            this._capabilities = Object.assign({}, result.capabilities, { resolvedTextDocumentSync: textDocumentSyncOptions });\r\n            connection.onDiagnostics(params => this.handleDiagnostics(params));\r\n            connection.onRequest(vscode_languageserver_protocol_1.RegistrationRequest.type, params => this.handleRegistrationRequest(params));\r\n            // See https://github.com/Microsoft/vscode-languageserver-node/issues/199\r\n            connection.onRequest('client/registerFeature', params => this.handleRegistrationRequest(params));\r\n            connection.onRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type, params => this.handleUnregistrationRequest(params));\r\n            // See https://github.com/Microsoft/vscode-languageserver-node/issues/199\r\n            connection.onRequest('client/unregisterFeature', params => this.handleUnregistrationRequest(params));\r\n            connection.onRequest(vscode_languageserver_protocol_1.ApplyWorkspaceEditRequest.type, params => this.handleApplyWorkspaceEdit(params));\r\n            connection.sendNotification(vscode_languageserver_protocol_1.InitializedNotification.type, {});\r\n            this.hookFileEvents(connection);\r\n            this.hookConfigurationChanged(connection);\r\n            this.initializeFeatures(connection);\r\n            this._onReadyCallbacks.resolve();\r\n            return result;\r\n        }).then(undefined, (error) => {\r\n            if (this._clientOptions.initializationFailedHandler) {\r\n                if (this._clientOptions.initializationFailedHandler(error)) {\r\n                    this.initialize(connection);\r\n                }\r\n                else {\r\n                    this.stop();\r\n                    this._onReadyCallbacks.reject(error);\r\n                }\r\n            }\r\n            else if (error instanceof vscode_languageserver_protocol_1.ResponseError && error.data && error.data.retry) {\r\n                vscode_1.window.showErrorMessage(error.message, { title: 'Retry', id: 'retry' }).then(item => {\r\n                    if (item && item.id === 'retry') {\r\n                        this.initialize(connection);\r\n                    }\r\n                    else {\r\n                        this.stop();\r\n                        this._onReadyCallbacks.reject(error);\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                if (error && error.message) {\r\n                    vscode_1.window.showErrorMessage(error.message);\r\n                }\r\n                this.error('Server initialization failed.', error);\r\n                this.stop();\r\n                this._onReadyCallbacks.reject(error);\r\n            }\r\n            throw error;\r\n        });\r\n    }\r\n    _clientGetRootPath() {\r\n        let folders = vscode_1.workspace.workspaceFolders;\r\n        if (!folders || folders.length === 0) {\r\n            return undefined;\r\n        }\r\n        let folder = folders[0];\r\n        if (folder.uri.scheme === 'file') {\r\n            return folder.uri.fsPath;\r\n        }\r\n        return undefined;\r\n    }\r\n    stop() {\r\n        this._initializeResult = undefined;\r\n        if (!this._connectionPromise) {\r\n            this.state = ClientState.Stopped;\r\n            return Promise.resolve();\r\n        }\r\n        if (this.state === ClientState.Stopping && this._onStop) {\r\n            return this._onStop;\r\n        }\r\n        this.state = ClientState.Stopping;\r\n        this.cleanUp(false);\r\n        // unhook listeners\r\n        return this._onStop = this.resolveConnection().then(connection => {\r\n            return connection.shutdown().then(() => {\r\n                connection.exit();\r\n                connection.dispose();\r\n                this.state = ClientState.Stopped;\r\n                this.cleanUpChannel();\r\n                this._onStop = undefined;\r\n                this._connectionPromise = undefined;\r\n                this._resolvedConnection = undefined;\r\n            });\r\n        });\r\n    }\r\n    cleanUp(channel = true, diagnostics = true) {\r\n        if (this._listeners) {\r\n            this._listeners.forEach(listener => listener.dispose());\r\n            this._listeners = undefined;\r\n        }\r\n        if (this._providers) {\r\n            this._providers.forEach(provider => provider.dispose());\r\n            this._providers = undefined;\r\n        }\r\n        if (this._syncedDocuments) {\r\n            this._syncedDocuments.clear();\r\n        }\r\n        for (let handler of this._dynamicFeatures.values()) {\r\n            handler.dispose();\r\n        }\r\n        if (channel) {\r\n            this.cleanUpChannel();\r\n        }\r\n        if (diagnostics && this._diagnostics) {\r\n            this._diagnostics.dispose();\r\n            this._diagnostics = undefined;\r\n        }\r\n    }\r\n    cleanUpChannel() {\r\n        if (this._outputChannel && this._disposeOutputChannel) {\r\n            this._outputChannel.dispose();\r\n            this._outputChannel = undefined;\r\n        }\r\n    }\r\n    notifyFileEvent(event) {\r\n        var _a, _b;\r\n        const client = this;\r\n        function didChangeWatchedFile(event) {\r\n            client._fileEvents.push(event);\r\n            client._fileEventDelayer.trigger(() => {\r\n                client.onReady().then(() => {\r\n                    client.resolveConnection().then(connection => {\r\n                        if (client.isConnectionActive()) {\r\n                            client.forceDocumentSync();\r\n                            connection.didChangeWatchedFiles({ changes: client._fileEvents });\r\n                        }\r\n                        client._fileEvents = [];\r\n                    });\r\n                }, (error) => {\r\n                    client.error(`Notify file events failed.`, error);\r\n                });\r\n            });\r\n        }\r\n        const workSpaceMiddleware = (_a = this.clientOptions.middleware) === null || _a === void 0 ? void 0 : _a.workspace;\r\n        ((_b = workSpaceMiddleware) === null || _b === void 0 ? void 0 : _b.didChangeWatchedFile) ? workSpaceMiddleware.didChangeWatchedFile(event, didChangeWatchedFile) : didChangeWatchedFile(event);\r\n    }\r\n    forceDocumentSync() {\r\n        this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type.method).forceDelivery();\r\n    }\r\n    handleDiagnostics(params) {\r\n        if (!this._diagnostics) {\r\n            return;\r\n        }\r\n        let uri = this._p2c.asUri(params.uri);\r\n        let diagnostics = this._p2c.asDiagnostics(params.diagnostics);\r\n        let middleware = this.clientOptions.middleware;\r\n        if (middleware.handleDiagnostics) {\r\n            middleware.handleDiagnostics(uri, diagnostics, (uri, diagnostics) => this.setDiagnostics(uri, diagnostics));\r\n        }\r\n        else {\r\n            this.setDiagnostics(uri, diagnostics);\r\n        }\r\n    }\r\n    setDiagnostics(uri, diagnostics) {\r\n        if (!this._diagnostics) {\r\n            return;\r\n        }\r\n        this._diagnostics.set(uri, diagnostics);\r\n    }\r\n    createConnection() {\r\n        let errorHandler = (error, message, count) => {\r\n            this.handleConnectionError(error, message, count);\r\n        };\r\n        let closeHandler = () => {\r\n            this.handleConnectionClosed();\r\n        };\r\n        return this.createMessageTransports(this._clientOptions.stdioEncoding || 'utf8').then((transports) => {\r\n            return createConnection(transports.reader, transports.writer, errorHandler, closeHandler);\r\n        });\r\n    }\r\n    handleConnectionClosed() {\r\n        // Check whether this is a normal shutdown in progress or the client stopped normally.\r\n        if (this.state === ClientState.Stopping || this.state === ClientState.Stopped) {\r\n            return;\r\n        }\r\n        try {\r\n            if (this._resolvedConnection) {\r\n                this._resolvedConnection.dispose();\r\n            }\r\n        }\r\n        catch (error) {\r\n            // Disposing a connection could fail if error cases.\r\n        }\r\n        let action = CloseAction.DoNotRestart;\r\n        try {\r\n            action = this._clientOptions.errorHandler.closed();\r\n        }\r\n        catch (error) {\r\n            // Ignore errors coming from the error handler.\r\n        }\r\n        this._connectionPromise = undefined;\r\n        this._resolvedConnection = undefined;\r\n        if (action === CloseAction.DoNotRestart) {\r\n            this.error('Connection to server got closed. Server will not be restarted.');\r\n            this.state = ClientState.Stopped;\r\n            this.cleanUp(false, true);\r\n        }\r\n        else if (action === CloseAction.Restart) {\r\n            this.info('Connection to server got closed. Server will restart.');\r\n            this.cleanUp(false, false);\r\n            this.state = ClientState.Initial;\r\n            this.start();\r\n        }\r\n    }\r\n    handleConnectionError(error, message, count) {\r\n        let action = this._clientOptions.errorHandler.error(error, message, count);\r\n        if (action === ErrorAction.Shutdown) {\r\n            this.error('Connection to server is erroring. Shutting down server.');\r\n            this.stop();\r\n        }\r\n    }\r\n    hookConfigurationChanged(connection) {\r\n        vscode_1.workspace.onDidChangeConfiguration(() => {\r\n            this.refreshTrace(connection, true);\r\n        });\r\n    }\r\n    refreshTrace(connection, sendNotification = false) {\r\n        let config = vscode_1.workspace.getConfiguration(this._id);\r\n        let trace = vscode_languageserver_protocol_1.Trace.Off;\r\n        let traceFormat = vscode_languageserver_protocol_1.TraceFormat.Text;\r\n        if (config) {\r\n            const traceConfig = config.get('trace.server', 'off');\r\n            if (typeof traceConfig === 'string') {\r\n                trace = vscode_languageserver_protocol_1.Trace.fromString(traceConfig);\r\n            }\r\n            else {\r\n                trace = vscode_languageserver_protocol_1.Trace.fromString(config.get('trace.server.verbosity', 'off'));\r\n                traceFormat = vscode_languageserver_protocol_1.TraceFormat.fromString(config.get('trace.server.format', 'text'));\r\n            }\r\n        }\r\n        this._trace = trace;\r\n        this._traceFormat = traceFormat;\r\n        connection.trace(this._trace, this._tracer, {\r\n            sendNotification,\r\n            traceFormat: this._traceFormat\r\n        });\r\n    }\r\n    hookFileEvents(_connection) {\r\n        let fileEvents = this._clientOptions.synchronize.fileEvents;\r\n        if (!fileEvents) {\r\n            return;\r\n        }\r\n        let watchers;\r\n        if (Is.array(fileEvents)) {\r\n            watchers = fileEvents;\r\n        }\r\n        else {\r\n            watchers = [fileEvents];\r\n        }\r\n        if (!watchers) {\r\n            return;\r\n        }\r\n        this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type.method).registerRaw(UUID.generateUuid(), watchers);\r\n    }\r\n    registerFeatures(features) {\r\n        for (let feature of features) {\r\n            this.registerFeature(feature);\r\n        }\r\n    }\r\n    registerFeature(feature) {\r\n        this._features.push(feature);\r\n        if (DynamicFeature.is(feature)) {\r\n            let messages = feature.messages;\r\n            if (Array.isArray(messages)) {\r\n                for (let message of messages) {\r\n                    this._method2Message.set(message.method, message);\r\n                    this._dynamicFeatures.set(message.method, feature);\r\n                }\r\n            }\r\n            else {\r\n                this._method2Message.set(messages.method, messages);\r\n                this._dynamicFeatures.set(messages.method, feature);\r\n            }\r\n        }\r\n    }\r\n    getFeature(request) {\r\n        return this._dynamicFeatures.get(request);\r\n    }\r\n    registerBuiltinFeatures() {\r\n        this.registerFeature(new ConfigurationFeature(this));\r\n        this.registerFeature(new DidOpenTextDocumentFeature(this, this._syncedDocuments));\r\n        this.registerFeature(new DidChangeTextDocumentFeature(this));\r\n        this.registerFeature(new WillSaveFeature(this));\r\n        this.registerFeature(new WillSaveWaitUntilFeature(this));\r\n        this.registerFeature(new DidSaveTextDocumentFeature(this));\r\n        this.registerFeature(new DidCloseTextDocumentFeature(this, this._syncedDocuments));\r\n        this.registerFeature(new FileSystemWatcherFeature(this, (event) => this.notifyFileEvent(event)));\r\n        this.registerFeature(new CompletionItemFeature(this));\r\n        this.registerFeature(new HoverFeature(this));\r\n        this.registerFeature(new SignatureHelpFeature(this));\r\n        this.registerFeature(new DefinitionFeature(this));\r\n        this.registerFeature(new ReferencesFeature(this));\r\n        this.registerFeature(new DocumentHighlightFeature(this));\r\n        this.registerFeature(new DocumentSymbolFeature(this));\r\n        this.registerFeature(new WorkspaceSymbolFeature(this));\r\n        this.registerFeature(new CodeActionFeature(this));\r\n        this.registerFeature(new CodeLensFeature(this));\r\n        this.registerFeature(new DocumentFormattingFeature(this));\r\n        this.registerFeature(new DocumentRangeFormattingFeature(this));\r\n        this.registerFeature(new DocumentOnTypeFormattingFeature(this));\r\n        this.registerFeature(new RenameFeature(this));\r\n        this.registerFeature(new DocumentLinkFeature(this));\r\n        this.registerFeature(new ExecuteCommandFeature(this));\r\n    }\r\n    fillInitializeParams(params) {\r\n        for (let feature of this._features) {\r\n            if (Is.func(feature.fillInitializeParams)) {\r\n                feature.fillInitializeParams(params);\r\n            }\r\n        }\r\n    }\r\n    computeClientCapabilities() {\r\n        let result = {};\r\n        ensure(result, 'workspace').applyEdit = true;\r\n        let workspaceEdit = ensure(ensure(result, 'workspace'), 'workspaceEdit');\r\n        workspaceEdit.documentChanges = true;\r\n        workspaceEdit.resourceOperations = [vscode_languageserver_protocol_1.ResourceOperationKind.Create, vscode_languageserver_protocol_1.ResourceOperationKind.Rename, vscode_languageserver_protocol_1.ResourceOperationKind.Delete];\r\n        workspaceEdit.failureHandling = vscode_languageserver_protocol_1.FailureHandlingKind.TextOnlyTransactional;\r\n        let diagnostics = ensure(ensure(result, 'textDocument'), 'publishDiagnostics');\r\n        diagnostics.relatedInformation = true;\r\n        diagnostics.versionSupport = false;\r\n        diagnostics.tagSupport = { valueSet: [vscode_languageserver_protocol_1.DiagnosticTag.Unnecessary, vscode_languageserver_protocol_1.DiagnosticTag.Deprecated] };\r\n        for (let feature of this._features) {\r\n            feature.fillClientCapabilities(result);\r\n        }\r\n        return result;\r\n    }\r\n    initializeFeatures(_connection) {\r\n        let documentSelector = this._clientOptions.documentSelector;\r\n        for (let feature of this._features) {\r\n            feature.initialize(this._capabilities, documentSelector);\r\n        }\r\n    }\r\n    handleRegistrationRequest(params) {\r\n        return new Promise((resolve, reject) => {\r\n            for (let registration of params.registrations) {\r\n                const feature = this._dynamicFeatures.get(registration.method);\r\n                if (!feature) {\r\n                    reject(new Error(`No feature implementation for ${registration.method} found. Registration failed.`));\r\n                    return;\r\n                }\r\n                const options = registration.registerOptions || {};\r\n                options.documentSelector = options.documentSelector || this._clientOptions.documentSelector;\r\n                const data = {\r\n                    id: registration.id,\r\n                    registerOptions: options\r\n                };\r\n                feature.register(this._method2Message.get(registration.method), data);\r\n            }\r\n            resolve();\r\n        });\r\n    }\r\n    handleUnregistrationRequest(params) {\r\n        return new Promise((resolve, reject) => {\r\n            for (let unregistration of params.unregisterations) {\r\n                const feature = this._dynamicFeatures.get(unregistration.method);\r\n                if (!feature) {\r\n                    reject(new Error(`No feature implementation for ${unregistration.method} found. Unregistration failed.`));\r\n                    return;\r\n                }\r\n                feature.unregister(unregistration.id);\r\n            }\r\n            resolve();\r\n        });\r\n    }\r\n    handleApplyWorkspaceEdit(params) {\r\n        // This is some sort of workaround since the version check should be done by VS Code in the Workspace.applyEdit.\r\n        // However doing it here adds some safety since the server can lag more behind then an extension.\r\n        let workspaceEdit = params.edit;\r\n        let openTextDocuments = new Map();\r\n        vscode_1.workspace.textDocuments.forEach((document) => openTextDocuments.set(document.uri.toString(), document));\r\n        let versionMismatch = false;\r\n        if (workspaceEdit.documentChanges) {\r\n            for (const change of workspaceEdit.documentChanges) {\r\n                if (vscode_languageserver_protocol_1.TextDocumentEdit.is(change) && change.textDocument.version && change.textDocument.version >= 0) {\r\n                    let textDocument = openTextDocuments.get(change.textDocument.uri);\r\n                    if (textDocument && textDocument.version !== change.textDocument.version) {\r\n                        versionMismatch = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (versionMismatch) {\r\n            return Promise.resolve({ applied: false });\r\n        }\r\n        return Is.asPromise(vscode_1.workspace.applyEdit(this._p2c.asWorkspaceEdit(params.edit)).then((value) => { return { applied: value }; }));\r\n    }\r\n    logFailedRequest(type, error) {\r\n        // If we get a request cancel or a content modified don't log anything.\r\n        if (error instanceof vscode_languageserver_protocol_1.ResponseError && (error.code === vscode_languageserver_protocol_1.ErrorCodes.RequestCancelled || error.code === vscode_languageserver_protocol_1.ErrorCodes.ContentModified)) {\r\n            return;\r\n        }\r\n        this.error(`Request ${type.method} failed.`, error);\r\n    }\r\n}\r\nexports.BaseLanguageClient = BaseLanguageClient;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nconst proto = require(\"vscode-languageserver-protocol\");\r\nconst Is = require(\"./utils/is\");\r\nconst protocolCompletionItem_1 = require(\"./protocolCompletionItem\");\r\nconst protocolCodeLens_1 = require(\"./protocolCodeLens\");\r\nconst protocolDocumentLink_1 = require(\"./protocolDocumentLink\");\r\nfunction createConverter(uriConverter) {\r\n    const nullConverter = (value) => value.toString();\r\n    const _uriConverter = uriConverter || nullConverter;\r\n    function asUri(value) {\r\n        return _uriConverter(value);\r\n    }\r\n    function asTextDocumentIdentifier(textDocument) {\r\n        return {\r\n            uri: _uriConverter(textDocument.uri)\r\n        };\r\n    }\r\n    function asVersionedTextDocumentIdentifier(textDocument) {\r\n        return {\r\n            uri: _uriConverter(textDocument.uri),\r\n            version: textDocument.version\r\n        };\r\n    }\r\n    function asOpenTextDocumentParams(textDocument) {\r\n        return {\r\n            textDocument: {\r\n                uri: _uriConverter(textDocument.uri),\r\n                languageId: textDocument.languageId,\r\n                version: textDocument.version,\r\n                text: textDocument.getText()\r\n            }\r\n        };\r\n    }\r\n    function isTextDocumentChangeEvent(value) {\r\n        let candidate = value;\r\n        return !!candidate.document && !!candidate.contentChanges;\r\n    }\r\n    function isTextDocument(value) {\r\n        let candidate = value;\r\n        return !!candidate.uri && !!candidate.version;\r\n    }\r\n    function asChangeTextDocumentParams(arg) {\r\n        if (isTextDocument(arg)) {\r\n            let result = {\r\n                textDocument: {\r\n                    uri: _uriConverter(arg.uri),\r\n                    version: arg.version\r\n                },\r\n                contentChanges: [{ text: arg.getText() }]\r\n            };\r\n            return result;\r\n        }\r\n        else if (isTextDocumentChangeEvent(arg)) {\r\n            let document = arg.document;\r\n            let result = {\r\n                textDocument: {\r\n                    uri: _uriConverter(document.uri),\r\n                    version: document.version\r\n                },\r\n                contentChanges: arg.contentChanges.map((change) => {\r\n                    let range = change.range;\r\n                    return {\r\n                        range: {\r\n                            start: { line: range.start.line, character: range.start.character },\r\n                            end: { line: range.end.line, character: range.end.character }\r\n                        },\r\n                        rangeLength: change.rangeLength,\r\n                        text: change.text\r\n                    };\r\n                })\r\n            };\r\n            return result;\r\n        }\r\n        else {\r\n            throw Error('Unsupported text document change parameter');\r\n        }\r\n    }\r\n    function asCloseTextDocumentParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    function asSaveTextDocumentParams(textDocument, includeContent = false) {\r\n        let result = {\r\n            textDocument: asVersionedTextDocumentIdentifier(textDocument)\r\n        };\r\n        if (includeContent) {\r\n            result.text = textDocument.getText();\r\n        }\r\n        return result;\r\n    }\r\n    function asTextDocumentSaveReason(reason) {\r\n        switch (reason) {\r\n            case code.TextDocumentSaveReason.Manual:\r\n                return proto.TextDocumentSaveReason.Manual;\r\n            case code.TextDocumentSaveReason.AfterDelay:\r\n                return proto.TextDocumentSaveReason.AfterDelay;\r\n            case code.TextDocumentSaveReason.FocusOut:\r\n                return proto.TextDocumentSaveReason.FocusOut;\r\n        }\r\n        return proto.TextDocumentSaveReason.Manual;\r\n    }\r\n    function asWillSaveTextDocumentParams(event) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(event.document),\r\n            reason: asTextDocumentSaveReason(event.reason)\r\n        };\r\n    }\r\n    function asTextDocumentPositionParams(textDocument, position) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position)\r\n        };\r\n    }\r\n    function asCompletionTriggerKind(triggerKind) {\r\n        switch (triggerKind) {\r\n            case code.CompletionTriggerKind.TriggerCharacter:\r\n                return proto.CompletionTriggerKind.TriggerCharacter;\r\n            case code.CompletionTriggerKind.TriggerForIncompleteCompletions:\r\n                return proto.CompletionTriggerKind.TriggerForIncompleteCompletions;\r\n            default:\r\n                return proto.CompletionTriggerKind.Invoked;\r\n        }\r\n    }\r\n    function asCompletionParams(textDocument, position, context) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position),\r\n            context: {\r\n                triggerKind: asCompletionTriggerKind(context.triggerKind),\r\n                triggerCharacter: context.triggerCharacter\r\n            }\r\n        };\r\n    }\r\n    function asSignatureHelpTriggerKind(triggerKind) {\r\n        switch (triggerKind) {\r\n            case code.SignatureHelpTriggerKind.Invoke:\r\n                return proto.SignatureHelpTriggerKind.Invoked;\r\n            case code.SignatureHelpTriggerKind.TriggerCharacter:\r\n                return proto.SignatureHelpTriggerKind.TriggerCharacter;\r\n            case code.SignatureHelpTriggerKind.ContentChange:\r\n                return proto.SignatureHelpTriggerKind.ContentChange;\r\n        }\r\n    }\r\n    function asParameterInformation(value) {\r\n        // We leave the documentation out on purpose since it usually adds no\r\n        // value for the server.\r\n        return {\r\n            label: value.label\r\n        };\r\n    }\r\n    function asParameterInformations(values) {\r\n        return values.map(asParameterInformation);\r\n    }\r\n    function asSignatureInformation(value) {\r\n        // We leave the documentation out on purpose since it usually adds no\r\n        // value for the server.\r\n        return {\r\n            label: value.label,\r\n            parameters: asParameterInformations(value.parameters)\r\n        };\r\n    }\r\n    function asSignatureInformations(values) {\r\n        return values.map(asSignatureInformation);\r\n    }\r\n    function asSignatureHelp(value) {\r\n        if (value === undefined) {\r\n            return value;\r\n        }\r\n        return {\r\n            signatures: asSignatureInformations(value.signatures),\r\n            activeSignature: value.activeSignature,\r\n            activeParameter: value.activeParameter\r\n        };\r\n    }\r\n    function asSignatureHelpParams(textDocument, position, context) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position),\r\n            context: {\r\n                isRetrigger: context.isRetrigger,\r\n                triggerCharacter: context.triggerCharacter,\r\n                triggerKind: asSignatureHelpTriggerKind(context.triggerKind),\r\n                activeSignatureHelp: asSignatureHelp(context.activeSignatureHelp)\r\n            }\r\n        };\r\n    }\r\n    function asWorkerPosition(position) {\r\n        return { line: position.line, character: position.character };\r\n    }\r\n    function asPosition(value) {\r\n        if (value === undefined || value === null) {\r\n            return value;\r\n        }\r\n        return { line: value.line, character: value.character };\r\n    }\r\n    function asPositions(value) {\r\n        let result = [];\r\n        for (let elem of value) {\r\n            result.push(asPosition(elem));\r\n        }\r\n        return result;\r\n    }\r\n    function isInsertReplace(value) {\r\n        const candidate = value;\r\n        return candidate && !!candidate.inserting && !!candidate.replacing;\r\n    }\r\n    function asRange(value) {\r\n        if (value === undefined || value === null) {\r\n            return value;\r\n        }\r\n        // The LSP has no support yet for insert replace. So this can never happen.\r\n        if (isInsertReplace(value)) {\r\n            throw new Error(`Receving unknown insert replace range.`);\r\n        }\r\n        return { start: asPosition(value.start), end: asPosition(value.end) };\r\n    }\r\n    function asLocation(value) {\r\n        if (value === undefined || value === null) {\r\n            return value;\r\n        }\r\n        return proto.Location.create(asUri(value.uri), asRange(value.range));\r\n    }\r\n    function asDiagnosticSeverity(value) {\r\n        switch (value) {\r\n            case code.DiagnosticSeverity.Error:\r\n                return proto.DiagnosticSeverity.Error;\r\n            case code.DiagnosticSeverity.Warning:\r\n                return proto.DiagnosticSeverity.Warning;\r\n            case code.DiagnosticSeverity.Information:\r\n                return proto.DiagnosticSeverity.Information;\r\n            case code.DiagnosticSeverity.Hint:\r\n                return proto.DiagnosticSeverity.Hint;\r\n        }\r\n    }\r\n    function asDiagnosticTags(tags) {\r\n        if (!tags) {\r\n            return undefined;\r\n        }\r\n        let result = [];\r\n        for (let tag of tags) {\r\n            let converted = asDiagnosticTag(tag);\r\n            if (converted !== undefined) {\r\n                result.push(converted);\r\n            }\r\n        }\r\n        return result.length > 0 ? result : undefined;\r\n    }\r\n    function asDiagnosticTag(tag) {\r\n        switch (tag) {\r\n            case code.DiagnosticTag.Unnecessary:\r\n                return proto.DiagnosticTag.Unnecessary;\r\n            case code.DiagnosticTag.Deprecated:\r\n                return proto.DiagnosticTag.Deprecated;\r\n            default:\r\n                return undefined;\r\n        }\r\n    }\r\n    function asRelatedInformation(item) {\r\n        return {\r\n            message: item.message,\r\n            location: asLocation(item.location)\r\n        };\r\n    }\r\n    function asRelatedInformations(items) {\r\n        return items.map(asRelatedInformation);\r\n    }\r\n    function asDiagnostic(item) {\r\n        let result = proto.Diagnostic.create(asRange(item.range), item.message);\r\n        if (Is.number(item.severity)) {\r\n            result.severity = asDiagnosticSeverity(item.severity);\r\n        }\r\n        if (Is.number(item.code) || Is.string(item.code)) {\r\n            result.code = item.code;\r\n        }\r\n        if (Array.isArray(item.tags)) {\r\n            result.tags = asDiagnosticTags(item.tags);\r\n        }\r\n        if (item.relatedInformation) {\r\n            result.relatedInformation = asRelatedInformations(item.relatedInformation);\r\n        }\r\n        if (item.source) {\r\n            result.source = item.source;\r\n        }\r\n        return result;\r\n    }\r\n    function asDiagnostics(items) {\r\n        if (items === undefined || items === null) {\r\n            return items;\r\n        }\r\n        return items.map(asDiagnostic);\r\n    }\r\n    function asDocumentation(format, documentation) {\r\n        switch (format) {\r\n            case '$string':\r\n                return documentation;\r\n            case proto.MarkupKind.PlainText:\r\n                return { kind: format, value: documentation };\r\n            case proto.MarkupKind.Markdown:\r\n                return { kind: format, value: documentation.value };\r\n            default:\r\n                return `Unsupported Markup content received. Kind is: ${format}`;\r\n        }\r\n    }\r\n    function asCompletionItemTag(tag) {\r\n        switch (tag) {\r\n            case code.CompletionItemTag.Deprecated:\r\n                return proto.CompletionItemTag.Deprecated;\r\n        }\r\n        return undefined;\r\n    }\r\n    function asCompletionItemTags(tags) {\r\n        if (tags === undefined) {\r\n            return tags;\r\n        }\r\n        const result = [];\r\n        for (let tag of tags) {\r\n            const converted = asCompletionItemTag(tag);\r\n            if (converted !== undefined) {\r\n                result.push(converted);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    function asCompletionItemKind(value, original) {\r\n        if (original !== undefined) {\r\n            return original;\r\n        }\r\n        return value + 1;\r\n    }\r\n    function asCompletionItem(item) {\r\n        let result = { label: item.label };\r\n        let protocolItem = item instanceof protocolCompletionItem_1.default ? item : undefined;\r\n        if (item.detail) {\r\n            result.detail = item.detail;\r\n        }\r\n        // We only send items back we created. So this can't be something else than\r\n        // a string right now.\r\n        if (item.documentation) {\r\n            if (!protocolItem || protocolItem.documentationFormat === '$string') {\r\n                result.documentation = item.documentation;\r\n            }\r\n            else {\r\n                result.documentation = asDocumentation(protocolItem.documentationFormat, item.documentation);\r\n            }\r\n        }\r\n        if (item.filterText) {\r\n            result.filterText = item.filterText;\r\n        }\r\n        fillPrimaryInsertText(result, item);\r\n        if (Is.number(item.kind)) {\r\n            result.kind = asCompletionItemKind(item.kind, protocolItem && protocolItem.originalItemKind);\r\n        }\r\n        if (item.sortText) {\r\n            result.sortText = item.sortText;\r\n        }\r\n        if (item.additionalTextEdits) {\r\n            result.additionalTextEdits = asTextEdits(item.additionalTextEdits);\r\n        }\r\n        if (item.commitCharacters) {\r\n            result.commitCharacters = item.commitCharacters.slice();\r\n        }\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.preselect === true || item.preselect === false) {\r\n            result.preselect = item.preselect;\r\n        }\r\n        const tags = asCompletionItemTags(item.tags);\r\n        if (protocolItem) {\r\n            if (protocolItem.data !== undefined) {\r\n                result.data = protocolItem.data;\r\n            }\r\n            if (protocolItem.deprecated === true || protocolItem.deprecated === false) {\r\n                if (protocolItem.deprecated === true && tags !== undefined && tags.length > 0) {\r\n                    const index = tags.indexOf(code.CompletionItemTag.Deprecated);\r\n                    if (index !== -1) {\r\n                        tags.splice(index, 1);\r\n                    }\r\n                }\r\n                result.deprecated = protocolItem.deprecated;\r\n            }\r\n        }\r\n        if (tags !== undefined && tags.length > 0) {\r\n            result.tags = tags;\r\n        }\r\n        return result;\r\n    }\r\n    function fillPrimaryInsertText(target, source) {\r\n        let format = proto.InsertTextFormat.PlainText;\r\n        let text = undefined;\r\n        let range = undefined;\r\n        if (source.textEdit) {\r\n            text = source.textEdit.newText;\r\n            range = asRange(source.textEdit.range);\r\n        }\r\n        else if (source.insertText instanceof code.SnippetString) {\r\n            format = proto.InsertTextFormat.Snippet;\r\n            text = source.insertText.value;\r\n        }\r\n        else {\r\n            text = source.insertText;\r\n        }\r\n        if (source.range) {\r\n            range = asRange(source.range);\r\n        }\r\n        target.insertTextFormat = format;\r\n        if (source.fromEdit && text !== undefined && range !== undefined) {\r\n            target.textEdit = { newText: text, range: range };\r\n        }\r\n        else {\r\n            target.insertText = text;\r\n        }\r\n    }\r\n    function asTextEdit(edit) {\r\n        return { range: asRange(edit.range), newText: edit.newText };\r\n    }\r\n    function asTextEdits(edits) {\r\n        if (edits === undefined || edits === null) {\r\n            return edits;\r\n        }\r\n        return edits.map(asTextEdit);\r\n    }\r\n    function asSymbolKind(item) {\r\n        if (item <= code.SymbolKind.TypeParameter) {\r\n            // Symbol kind is one based in the protocol and zero based in code.\r\n            return (item + 1);\r\n        }\r\n        return proto.SymbolKind.Property;\r\n    }\r\n    function asSymbolTag(item) {\r\n        return item;\r\n    }\r\n    function asSymbolTags(items) {\r\n        return items.map(asSymbolTag);\r\n    }\r\n    function asReferenceParams(textDocument, position, options) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position),\r\n            context: { includeDeclaration: options.includeDeclaration }\r\n        };\r\n    }\r\n    function asCodeActionContext(context) {\r\n        if (context === undefined || context === null) {\r\n            return context;\r\n        }\r\n        let only;\r\n        if (context.only && Is.string(context.only.value)) {\r\n            only = [context.only.value];\r\n        }\r\n        return proto.CodeActionContext.create(asDiagnostics(context.diagnostics), only);\r\n    }\r\n    function asCommand(item) {\r\n        let result = proto.Command.create(item.title, item.command);\r\n        if (item.arguments) {\r\n            result.arguments = item.arguments;\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeLens(item) {\r\n        let result = proto.CodeLens.create(asRange(item.range));\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item instanceof protocolCodeLens_1.default) {\r\n            if (item.data) {\r\n                result.data = item.data;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    function asFormattingOptions(item) {\r\n        return { tabSize: item.tabSize, insertSpaces: item.insertSpaces };\r\n    }\r\n    function asDocumentSymbolParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    function asCodeLensParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    function asDocumentLink(item) {\r\n        let result = proto.DocumentLink.create(asRange(item.range));\r\n        if (item.target) {\r\n            result.target = asUri(item.target);\r\n        }\r\n        if (item.tooltip !== undefined) {\r\n            result.tooltip = item.tooltip;\r\n        }\r\n        let protocolItem = item instanceof protocolDocumentLink_1.default ? item : undefined;\r\n        if (protocolItem && protocolItem.data) {\r\n            result.data = protocolItem.data;\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentLinkParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    return {\r\n        asUri,\r\n        asTextDocumentIdentifier,\r\n        asVersionedTextDocumentIdentifier,\r\n        asOpenTextDocumentParams,\r\n        asChangeTextDocumentParams,\r\n        asCloseTextDocumentParams,\r\n        asSaveTextDocumentParams,\r\n        asWillSaveTextDocumentParams,\r\n        asTextDocumentPositionParams,\r\n        asCompletionParams,\r\n        asSignatureHelpParams,\r\n        asWorkerPosition,\r\n        asRange,\r\n        asPosition,\r\n        asPositions,\r\n        asLocation,\r\n        asDiagnosticSeverity,\r\n        asDiagnosticTag,\r\n        asDiagnostic,\r\n        asDiagnostics,\r\n        asCompletionItem,\r\n        asTextEdit,\r\n        asSymbolKind,\r\n        asSymbolTag,\r\n        asSymbolTags,\r\n        asReferenceParams,\r\n        asCodeActionContext,\r\n        asCommand,\r\n        asCodeLens,\r\n        asFormattingOptions,\r\n        asDocumentSymbolParams,\r\n        asCodeLensParams,\r\n        asDocumentLink,\r\n        asDocumentLinkParams\r\n    };\r\n}\r\nexports.createConverter = createConverter;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass ColorProviderFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentColorRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'colorProvider').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.colorProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideColorPresentations: (color, context, token) => {\r\n                const client = this._client;\r\n                const provideColorPresentations = (color, context, token) => {\r\n                    const requestParams = {\r\n                        color,\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(context.document),\r\n                        range: client.code2ProtocolConverter.asRange(context.range)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, requestParams, token).then(this.asColorPresentations.bind(this), (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideColorPresentations\r\n                    ? middleware.provideColorPresentations(color, context, token, provideColorPresentations)\r\n                    : provideColorPresentations(color, context, token);\r\n            },\r\n            provideDocumentColors: (document, token) => {\r\n                const client = this._client;\r\n                const provideDocumentColors = (document, token) => {\r\n                    const requestParams = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentColorRequest.type, requestParams, token).then(this.asColorInformations.bind(this), (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideDocumentColors\r\n                    ? middleware.provideDocumentColors(document, token, provideDocumentColors)\r\n                    : provideDocumentColors(document, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerColorProvider(options.documentSelector, provider), provider];\r\n    }\r\n    asColor(color) {\r\n        return new vscode_1.Color(color.red, color.green, color.blue, color.alpha);\r\n    }\r\n    asColorInformations(colorInformation) {\r\n        if (Array.isArray(colorInformation)) {\r\n            return colorInformation.map(ci => {\r\n                return new vscode_1.ColorInformation(this._client.protocol2CodeConverter.asRange(ci.range), this.asColor(ci.color));\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n    asColorPresentations(colorPresentations) {\r\n        if (Array.isArray(colorPresentations)) {\r\n            return colorPresentations.map(cp => {\r\n                let presentation = new vscode_1.ColorPresentation(cp.label);\r\n                presentation.additionalTextEdits = this._client.protocol2CodeConverter.asTextEdits(cp.additionalTextEdits);\r\n                presentation.textEdit = this._client.protocol2CodeConverter.asTextEdit(cp.textEdit);\r\n                return presentation;\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n}\r\nexports.ColorProviderFeature = ColorProviderFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nclass ConfigurationFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        capabilities.workspace = capabilities.workspace || {};\r\n        capabilities.workspace.configuration = true;\r\n    }\r\n    initialize() {\r\n        let client = this._client;\r\n        client.onRequest(vscode_languageserver_protocol_1.ConfigurationRequest.type, (params, token) => {\r\n            let configuration = (params) => {\r\n                let result = [];\r\n                for (let item of params.items) {\r\n                    let resource = item.scopeUri !== void 0 && item.scopeUri !== null ? this._client.protocol2CodeConverter.asUri(item.scopeUri) : undefined;\r\n                    result.push(this.getConfiguration(resource, item.section !== null ? item.section : undefined));\r\n                }\r\n                return result;\r\n            };\r\n            let middleware = client.clientOptions.middleware.workspace;\r\n            return middleware && middleware.configuration\r\n                ? middleware.configuration(params, token, configuration)\r\n                : configuration(params, token);\r\n        });\r\n    }\r\n    getConfiguration(resource, section) {\r\n        let result = null;\r\n        if (section) {\r\n            let index = section.lastIndexOf('.');\r\n            if (index === -1) {\r\n                result = vscode_1.workspace.getConfiguration(undefined, resource).get(section);\r\n            }\r\n            else {\r\n                let config = vscode_1.workspace.getConfiguration(section.substr(0, index), resource);\r\n                if (config) {\r\n                    result = config.get(section.substr(index + 1));\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            let config = vscode_1.workspace.getConfiguration(undefined, resource);\r\n            result = {};\r\n            for (let key of Object.keys(config)) {\r\n                if (config.has(key)) {\r\n                    result[key] = config.get(key);\r\n                }\r\n            }\r\n        }\r\n        if (!result) {\r\n            return null;\r\n        }\r\n        return result;\r\n    }\r\n}\r\nexports.ConfigurationFeature = ConfigurationFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass DeclarationFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DeclarationRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        const declarationSupport = ensure(ensure(capabilites, 'textDocument'), 'declaration');\r\n        declarationSupport.dynamicRegistration = true;\r\n        declarationSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const [id, options] = this.getRegistration(documentSelector, capabilities.declarationProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideDeclaration: (document, position, token) => {\r\n                const client = this._client;\r\n                const provideDeclaration = (document, position, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDeclarationResult, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideDeclaration\r\n                    ? middleware.provideDeclaration(document, position, token, provideDeclaration)\r\n                    : provideDeclaration(document, position, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerDeclarationProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nexports.DeclarationFeature = DeclarationFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass FoldingRangeFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.FoldingRangeRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let capability = ensure(ensure(capabilites, 'textDocument'), 'foldingRange');\r\n        capability.dynamicRegistration = true;\r\n        capability.rangeLimit = 5000;\r\n        capability.lineFoldingOnly = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.foldingRangeProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideFoldingRanges: (document, context, token) => {\r\n                const client = this._client;\r\n                const provideFoldingRanges = (document, _, token) => {\r\n                    const requestParams = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, requestParams, token).then(this.asFoldingRanges.bind(this), (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideFoldingRanges\r\n                    ? middleware.provideFoldingRanges(document, context, token, provideFoldingRanges)\r\n                    : provideFoldingRanges(document, context, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerFoldingRangeProvider(options.documentSelector, provider), provider];\r\n    }\r\n    asFoldingRangeKind(kind) {\r\n        if (kind) {\r\n            switch (kind) {\r\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Comment:\r\n                    return vscode_1.FoldingRangeKind.Comment;\r\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Imports:\r\n                    return vscode_1.FoldingRangeKind.Imports;\r\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Region:\r\n                    return vscode_1.FoldingRangeKind.Region;\r\n            }\r\n        }\r\n        return void 0;\r\n    }\r\n    asFoldingRanges(foldingRanges) {\r\n        if (Array.isArray(foldingRanges)) {\r\n            return foldingRanges.map(r => {\r\n                return new vscode_1.FoldingRange(r.startLine, r.endLine, this.asFoldingRangeKind(r.kind));\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n}\r\nexports.FoldingRangeFeature = FoldingRangeFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass ImplementationFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.ImplementationRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let implementationSupport = ensure(ensure(capabilites, 'textDocument'), 'implementation');\r\n        implementationSupport.dynamicRegistration = true;\r\n        implementationSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.implementationProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideImplementation: (document, position, token) => {\r\n                const client = this._client;\r\n                const provideImplementation = (document, position, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideImplementation\r\n                    ? middleware.provideImplementation(document, position, token, provideImplementation)\r\n                    : provideImplementation(document, position, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerImplementationProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nexports.ImplementationFeature = ImplementationFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst cp = require(\"child_process\");\r\nconst fs = require(\"fs\");\r\nconst SemVer = require(\"semver\");\r\nconst client_1 = require(\"./client\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst colorProvider_1 = require(\"./colorProvider\");\r\nconst configuration_1 = require(\"./configuration\");\r\nconst implementation_1 = require(\"./implementation\");\r\nconst typeDefinition_1 = require(\"./typeDefinition\");\r\nconst workspaceFolders_1 = require(\"./workspaceFolders\");\r\nconst foldingRange_1 = require(\"./foldingRange\");\r\nconst declaration_1 = require(\"./declaration\");\r\nconst selectionRange_1 = require(\"./selectionRange\");\r\nconst progress_1 = require(\"./progress\");\r\nconst callHierarchy_proposed_1 = require(\"./callHierarchy.proposed\");\r\nconst semanticTokens_proposed_1 = require(\"./semanticTokens.proposed\");\r\nconst Is = require(\"./utils/is\");\r\nconst processes_1 = require(\"./utils/processes\");\r\n__export(require(\"./client\"));\r\nconst REQUIRED_VSCODE_VERSION = '^1.41.0'; // do not change format, updated by `updateVSCode` script\r\nvar Executable;\r\n(function (Executable) {\r\n    function is(value) {\r\n        return Is.string(value.command);\r\n    }\r\n    Executable.is = is;\r\n})(Executable || (Executable = {}));\r\nvar TransportKind;\r\n(function (TransportKind) {\r\n    TransportKind[TransportKind[\"stdio\"] = 0] = \"stdio\";\r\n    TransportKind[TransportKind[\"ipc\"] = 1] = \"ipc\";\r\n    TransportKind[TransportKind[\"pipe\"] = 2] = \"pipe\";\r\n    TransportKind[TransportKind[\"socket\"] = 3] = \"socket\";\r\n})(TransportKind = exports.TransportKind || (exports.TransportKind = {}));\r\nvar Transport;\r\n(function (Transport) {\r\n    function isSocket(value) {\r\n        let candidate = value;\r\n        return candidate && candidate.kind === TransportKind.socket && Is.number(candidate.port);\r\n    }\r\n    Transport.isSocket = isSocket;\r\n})(Transport || (Transport = {}));\r\nvar NodeModule;\r\n(function (NodeModule) {\r\n    function is(value) {\r\n        return Is.string(value.module);\r\n    }\r\n    NodeModule.is = is;\r\n})(NodeModule || (NodeModule = {}));\r\nvar StreamInfo;\r\n(function (StreamInfo) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && candidate.writer !== void 0 && candidate.reader !== void 0;\r\n    }\r\n    StreamInfo.is = is;\r\n})(StreamInfo || (StreamInfo = {}));\r\nvar ChildProcessInfo;\r\n(function (ChildProcessInfo) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && candidate.process !== void 0 && typeof candidate.detached === 'boolean';\r\n    }\r\n    ChildProcessInfo.is = is;\r\n})(ChildProcessInfo || (ChildProcessInfo = {}));\r\nclass LanguageClient extends client_1.BaseLanguageClient {\r\n    constructor(arg1, arg2, arg3, arg4, arg5) {\r\n        let id;\r\n        let name;\r\n        let serverOptions;\r\n        let clientOptions;\r\n        let forceDebug;\r\n        if (Is.string(arg2)) {\r\n            id = arg1;\r\n            name = arg2;\r\n            serverOptions = arg3;\r\n            clientOptions = arg4;\r\n            forceDebug = !!arg5;\r\n        }\r\n        else {\r\n            id = arg1.toLowerCase();\r\n            name = arg1;\r\n            serverOptions = arg2;\r\n            clientOptions = arg3;\r\n            forceDebug = arg4;\r\n        }\r\n        if (forceDebug === void 0) {\r\n            forceDebug = false;\r\n        }\r\n        super(id, name, clientOptions);\r\n        this._serverOptions = serverOptions;\r\n        this._forceDebug = forceDebug;\r\n        try {\r\n            this.checkVersion();\r\n        }\r\n        catch (error) {\r\n            if (Is.string(error.message)) {\r\n                this.outputChannel.appendLine(error.message);\r\n            }\r\n            throw error;\r\n        }\r\n    }\r\n    checkVersion() {\r\n        let codeVersion = SemVer.parse(vscode_1.version);\r\n        if (!codeVersion) {\r\n            throw new Error(`No valid VS Code version detected. Version string is: ${vscode_1.version}`);\r\n        }\r\n        // Remove the insider pre-release since we stay API compatible.\r\n        if (codeVersion.prerelease && codeVersion.prerelease.length > 0) {\r\n            codeVersion.prerelease = [];\r\n        }\r\n        if (!SemVer.satisfies(codeVersion, REQUIRED_VSCODE_VERSION)) {\r\n            throw new Error(`The language client requires VS Code version ${REQUIRED_VSCODE_VERSION} but received version ${vscode_1.version}`);\r\n        }\r\n    }\r\n    stop() {\r\n        return super.stop().then(() => {\r\n            if (this._serverProcess) {\r\n                let toCheck = this._serverProcess;\r\n                this._serverProcess = undefined;\r\n                if (this._isDetached === void 0 || !this._isDetached) {\r\n                    this.checkProcessDied(toCheck);\r\n                }\r\n                this._isDetached = undefined;\r\n            }\r\n        });\r\n    }\r\n    checkProcessDied(childProcess) {\r\n        if (!childProcess) {\r\n            return;\r\n        }\r\n        setTimeout(() => {\r\n            // Test if the process is still alive. Throws an exception if not\r\n            try {\r\n                process.kill(childProcess.pid, 0);\r\n                processes_1.terminate(childProcess);\r\n            }\r\n            catch (error) {\r\n                // All is fine.\r\n            }\r\n        }, 2000);\r\n    }\r\n    handleConnectionClosed() {\r\n        this._serverProcess = undefined;\r\n        super.handleConnectionClosed();\r\n    }\r\n    createMessageTransports(encoding) {\r\n        function getEnvironment(env, fork) {\r\n            if (!env && !fork) {\r\n                return undefined;\r\n            }\r\n            let result = Object.create(null);\r\n            Object.keys(process.env).forEach(key => result[key] = process.env[key]);\r\n            if (fork) {\r\n                result['ELECTRON_RUN_AS_NODE'] = '1';\r\n                result['ELECTRON_NO_ASAR'] = '1';\r\n            }\r\n            if (env) {\r\n                Object.keys(env).forEach(key => result[key] = env[key]);\r\n            }\r\n            return result;\r\n        }\r\n        const debugStartWith = ['--debug=', '--debug-brk=', '--inspect=', '--inspect-brk='];\r\n        const debugEquals = ['--debug', '--debug-brk', '--inspect', '--inspect-brk'];\r\n        function startedInDebugMode() {\r\n            let args = process.execArgv;\r\n            if (args) {\r\n                return args.some((arg) => {\r\n                    return debugStartWith.some(value => arg.startsWith(value)) ||\r\n                        debugEquals.some(value => arg === value);\r\n                });\r\n            }\r\n            return false;\r\n        }\r\n        function assertStdio(process) {\r\n            if (process.stdin === null || process.stdout === null || process.stderr === null) {\r\n                throw new Error('Process created without stdio streams');\r\n            }\r\n        }\r\n        let server = this._serverOptions;\r\n        // We got a function.\r\n        if (Is.func(server)) {\r\n            return server().then((result) => {\r\n                if (client_1.MessageTransports.is(result)) {\r\n                    this._isDetached = !!result.detached;\r\n                    return result;\r\n                }\r\n                else if (StreamInfo.is(result)) {\r\n                    this._isDetached = !!result.detached;\r\n                    return { reader: new vscode_languageserver_protocol_1.StreamMessageReader(result.reader), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(result.writer) };\r\n                }\r\n                else {\r\n                    let cp;\r\n                    if (ChildProcessInfo.is(result)) {\r\n                        cp = result.process;\r\n                        this._isDetached = result.detached;\r\n                    }\r\n                    else {\r\n                        cp = result;\r\n                        this._isDetached = false;\r\n                    }\r\n                    cp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                    return { reader: new vscode_languageserver_protocol_1.StreamMessageReader(cp.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(cp.stdin) };\r\n                }\r\n            });\r\n        }\r\n        let json;\r\n        let runDebug = server;\r\n        if (runDebug.run || runDebug.debug) {\r\n            if (this._forceDebug || startedInDebugMode()) {\r\n                json = runDebug.debug;\r\n            }\r\n            else {\r\n                json = runDebug.run;\r\n            }\r\n        }\r\n        else {\r\n            json = server;\r\n        }\r\n        return this._getServerWorkingDir(json.options).then(serverWorkingDir => {\r\n            if (NodeModule.is(json) && json.module) {\r\n                let node = json;\r\n                let transport = node.transport || TransportKind.stdio;\r\n                if (node.runtime) {\r\n                    let args = [];\r\n                    let options = node.options || Object.create(null);\r\n                    if (options.execArgv) {\r\n                        options.execArgv.forEach(element => args.push(element));\r\n                    }\r\n                    args.push(node.module);\r\n                    if (node.args) {\r\n                        node.args.forEach(element => args.push(element));\r\n                    }\r\n                    let execOptions = Object.create(null);\r\n                    execOptions.cwd = serverWorkingDir;\r\n                    execOptions.env = getEnvironment(options.env, false);\r\n                    let pipeName = undefined;\r\n                    if (transport === TransportKind.ipc) {\r\n                        // exec options not correctly typed in lib\r\n                        execOptions.stdio = [null, null, null, 'ipc'];\r\n                        args.push('--node-ipc');\r\n                    }\r\n                    else if (transport === TransportKind.stdio) {\r\n                        args.push('--stdio');\r\n                    }\r\n                    else if (transport === TransportKind.pipe) {\r\n                        pipeName = vscode_languageserver_protocol_1.generateRandomPipeName();\r\n                        args.push(`--pipe=${pipeName}`);\r\n                    }\r\n                    else if (Transport.isSocket(transport)) {\r\n                        args.push(`--socket=${transport.port}`);\r\n                    }\r\n                    args.push(`--clientProcessId=${process.pid.toString()}`);\r\n                    if (transport === TransportKind.ipc || transport === TransportKind.stdio) {\r\n                        let serverProcess = cp.spawn(node.runtime, args, execOptions);\r\n                        if (!serverProcess || !serverProcess.pid) {\r\n                            return Promise.reject(`Launching server using runtime ${node.runtime} failed.`);\r\n                        }\r\n                        this._serverProcess = serverProcess;\r\n                        serverProcess.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                        if (transport === TransportKind.ipc) {\r\n                            serverProcess.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            return Promise.resolve({ reader: new vscode_languageserver_protocol_1.IPCMessageReader(serverProcess), writer: new vscode_languageserver_protocol_1.IPCMessageWriter(serverProcess) });\r\n                        }\r\n                        else {\r\n                            return Promise.resolve({ reader: new vscode_languageserver_protocol_1.StreamMessageReader(serverProcess.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(serverProcess.stdin) });\r\n                        }\r\n                    }\r\n                    else if (transport === TransportKind.pipe) {\r\n                        return vscode_languageserver_protocol_1.createClientPipeTransport(pipeName).then((transport) => {\r\n                            let process = cp.spawn(node.runtime, args, execOptions);\r\n                            if (!process || !process.pid) {\r\n                                return Promise.reject(`Launching server using runtime ${node.runtime} failed.`);\r\n                            }\r\n                            this._serverProcess = process;\r\n                            process.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            process.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            return transport.onConnected().then((protocol) => {\r\n                                return { reader: protocol[0], writer: protocol[1] };\r\n                            });\r\n                        });\r\n                    }\r\n                    else if (Transport.isSocket(transport)) {\r\n                        return vscode_languageserver_protocol_1.createClientSocketTransport(transport.port).then((transport) => {\r\n                            let process = cp.spawn(node.runtime, args, execOptions);\r\n                            if (!process || !process.pid) {\r\n                                return Promise.reject(`Launching server using runtime ${node.runtime} failed.`);\r\n                            }\r\n                            this._serverProcess = process;\r\n                            process.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            process.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            return transport.onConnected().then((protocol) => {\r\n                                return { reader: protocol[0], writer: protocol[1] };\r\n                            });\r\n                        });\r\n                    }\r\n                }\r\n                else {\r\n                    let pipeName = undefined;\r\n                    return new Promise((resolve, _reject) => {\r\n                        let args = node.args && node.args.slice() || [];\r\n                        if (transport === TransportKind.ipc) {\r\n                            args.push('--node-ipc');\r\n                        }\r\n                        else if (transport === TransportKind.stdio) {\r\n                            args.push('--stdio');\r\n                        }\r\n                        else if (transport === TransportKind.pipe) {\r\n                            pipeName = vscode_languageserver_protocol_1.generateRandomPipeName();\r\n                            args.push(`--pipe=${pipeName}`);\r\n                        }\r\n                        else if (Transport.isSocket(transport)) {\r\n                            args.push(`--socket=${transport.port}`);\r\n                        }\r\n                        args.push(`--clientProcessId=${process.pid.toString()}`);\r\n                        let options = node.options || Object.create(null);\r\n                        options.env = getEnvironment(options.env, true);\r\n                        options.execArgv = options.execArgv || [];\r\n                        options.cwd = serverWorkingDir;\r\n                        options.silent = true;\r\n                        if (transport === TransportKind.ipc || transport === TransportKind.stdio) {\r\n                            let sp = cp.fork(node.module, args || [], options);\r\n                            assertStdio(sp);\r\n                            this._serverProcess = sp;\r\n                            sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            if (transport === TransportKind.ipc) {\r\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                resolve({ reader: new vscode_languageserver_protocol_1.IPCMessageReader(this._serverProcess), writer: new vscode_languageserver_protocol_1.IPCMessageWriter(this._serverProcess) });\r\n                            }\r\n                            else {\r\n                                resolve({ reader: new vscode_languageserver_protocol_1.StreamMessageReader(sp.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(sp.stdin) });\r\n                            }\r\n                        }\r\n                        else if (transport === TransportKind.pipe) {\r\n                            vscode_languageserver_protocol_1.createClientPipeTransport(pipeName).then((transport) => {\r\n                                let sp = cp.fork(node.module, args || [], options);\r\n                                assertStdio(sp);\r\n                                this._serverProcess = sp;\r\n                                sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                transport.onConnected().then((protocol) => {\r\n                                    resolve({ reader: protocol[0], writer: protocol[1] });\r\n                                });\r\n                            });\r\n                        }\r\n                        else if (Transport.isSocket(transport)) {\r\n                            vscode_languageserver_protocol_1.createClientSocketTransport(transport.port).then((transport) => {\r\n                                let sp = cp.fork(node.module, args || [], options);\r\n                                assertStdio(sp);\r\n                                this._serverProcess = sp;\r\n                                sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                transport.onConnected().then((protocol) => {\r\n                                    resolve({ reader: protocol[0], writer: protocol[1] });\r\n                                });\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            else if (Executable.is(json) && json.command) {\r\n                let command = json;\r\n                let args = command.args || [];\r\n                let options = Object.assign({}, command.options);\r\n                options.cwd = options.cwd || serverWorkingDir;\r\n                let serverProcess = cp.spawn(command.command, args, options);\r\n                if (!serverProcess || !serverProcess.pid) {\r\n                    return Promise.reject(`Launching server using command ${command.command} failed.`);\r\n                }\r\n                serverProcess.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                this._serverProcess = serverProcess;\r\n                this._isDetached = !!options.detached;\r\n                return Promise.resolve({ reader: new vscode_languageserver_protocol_1.StreamMessageReader(serverProcess.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(serverProcess.stdin) });\r\n            }\r\n            return Promise.reject(new Error(`Unsupported server configuration ` + JSON.stringify(server, null, 4)));\r\n        });\r\n    }\r\n    registerProposedFeatures() {\r\n        this.registerFeatures(ProposedFeatures.createAll(this));\r\n    }\r\n    registerBuiltinFeatures() {\r\n        super.registerBuiltinFeatures();\r\n        this.registerFeature(new configuration_1.ConfigurationFeature(this));\r\n        this.registerFeature(new typeDefinition_1.TypeDefinitionFeature(this));\r\n        this.registerFeature(new implementation_1.ImplementationFeature(this));\r\n        this.registerFeature(new colorProvider_1.ColorProviderFeature(this));\r\n        this.registerFeature(new workspaceFolders_1.WorkspaceFoldersFeature(this));\r\n        this.registerFeature(new foldingRange_1.FoldingRangeFeature(this));\r\n        this.registerFeature(new declaration_1.DeclarationFeature(this));\r\n        this.registerFeature(new selectionRange_1.SelectionRangeFeature(this));\r\n        this.registerFeature(new progress_1.ProgressFeature(this));\r\n    }\r\n    _mainGetRootPath() {\r\n        let folders = vscode_1.workspace.workspaceFolders;\r\n        if (!folders || folders.length === 0) {\r\n            return undefined;\r\n        }\r\n        let folder = folders[0];\r\n        if (folder.uri.scheme === 'file') {\r\n            return folder.uri.fsPath;\r\n        }\r\n        return undefined;\r\n    }\r\n    _getServerWorkingDir(options) {\r\n        let cwd = options && options.cwd;\r\n        if (!cwd) {\r\n            cwd = this.clientOptions.workspaceFolder\r\n                ? this.clientOptions.workspaceFolder.uri.fsPath\r\n                : this._mainGetRootPath();\r\n        }\r\n        if (cwd) {\r\n            // make sure the folder exists otherwise creating the process will fail\r\n            return new Promise(s => {\r\n                fs.lstat(cwd, (err, stats) => {\r\n                    s(!err && stats.isDirectory() ? cwd : undefined);\r\n                });\r\n            });\r\n        }\r\n        return Promise.resolve(undefined);\r\n    }\r\n}\r\nexports.LanguageClient = LanguageClient;\r\nclass SettingMonitor {\r\n    constructor(_client, _setting) {\r\n        this._client = _client;\r\n        this._setting = _setting;\r\n        this._listeners = [];\r\n    }\r\n    start() {\r\n        vscode_1.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration, this, this._listeners);\r\n        this.onDidChangeConfiguration();\r\n        return new vscode_1.Disposable(() => {\r\n            if (this._client.needsStop()) {\r\n                this._client.stop();\r\n            }\r\n        });\r\n    }\r\n    onDidChangeConfiguration() {\r\n        let index = this._setting.indexOf('.');\r\n        let primary = index >= 0 ? this._setting.substr(0, index) : this._setting;\r\n        let rest = index >= 0 ? this._setting.substr(index + 1) : undefined;\r\n        let enabled = rest ? vscode_1.workspace.getConfiguration(primary).get(rest, false) : vscode_1.workspace.getConfiguration(primary);\r\n        if (enabled && this._client.needsStart()) {\r\n            this._client.start();\r\n        }\r\n        else if (!enabled && this._client.needsStop()) {\r\n            this._client.stop();\r\n        }\r\n    }\r\n}\r\nexports.SettingMonitor = SettingMonitor;\r\n// Exporting proposed protocol.\r\nvar ProposedFeatures;\r\n(function (ProposedFeatures) {\r\n    function createAll(client) {\r\n        let result = [\r\n            new callHierarchy_proposed_1.CallHierarchyFeature(client),\r\n            new semanticTokens_proposed_1.SemanticTokensFeature(client)\r\n        ];\r\n        return result;\r\n    }\r\n    ProposedFeatures.createAll = createAll;\r\n})(ProposedFeatures = exports.ProposedFeatures || (exports.ProposedFeatures = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst progressPart_1 = require(\"./progressPart\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = Object.create(null);\r\n    }\r\n    return target[key];\r\n}\r\nclass ProgressFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(capabilities, 'window').workDoneProgress = true;\r\n    }\r\n    initialize() {\r\n        let client = this._client;\r\n        let createHandler = (params) => {\r\n            new progressPart_1.ProgressPart(this._client, params.token);\r\n        };\r\n        client.onRequest(vscode_languageserver_protocol_1.WorkDoneProgressCreateRequest.type, createHandler);\r\n    }\r\n}\r\nexports.ProgressFeature = ProgressFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst Is = require(\"./utils/is\");\r\nclass ProgressPart {\r\n    constructor(_client, _token) {\r\n        this._client = _client;\r\n        this._token = _token;\r\n        this._reported = 0;\r\n        this._disposable = this._client.onProgress(vscode_languageserver_protocol_1.WorkDoneProgress.type, this._token, (value) => {\r\n            switch (value.kind) {\r\n                case 'begin':\r\n                    this.begin(value);\r\n                    break;\r\n                case 'report':\r\n                    this.report(value);\r\n                    break;\r\n                case 'end':\r\n                    this.done();\r\n                    break;\r\n            }\r\n        });\r\n    }\r\n    begin(params) {\r\n        let location = params.cancellable ? vscode_1.ProgressLocation.Notification : vscode_1.ProgressLocation.Window;\r\n        vscode_1.window.withProgress({ location, cancellable: params.cancellable, title: params.title }, async (progress, cancellationToken) => {\r\n            this._progress = progress;\r\n            this._infinite = params.percentage === undefined;\r\n            this._cancellationToken = cancellationToken;\r\n            this._cancellationToken.onCancellationRequested(() => {\r\n                this._client.sendNotification(vscode_languageserver_protocol_1.WorkDoneProgressCancelNotification.type, { token: this._token });\r\n            });\r\n            this.report(params);\r\n            return new Promise((resolve, reject) => {\r\n                this._resolve = resolve;\r\n                this._reject = reject;\r\n            });\r\n        });\r\n    }\r\n    report(params) {\r\n        if (this._infinite && Is.string(params.message)) {\r\n            this._progress.report({ message: params.message });\r\n        }\r\n        else if (Is.number(params.percentage)) {\r\n            let percentage = Math.max(0, Math.min(params.percentage, 100));\r\n            let delta = Math.max(0, percentage - this._reported);\r\n            this._progress.report({ message: params.message, increment: delta });\r\n            this._reported += delta;\r\n        }\r\n    }\r\n    cancel() {\r\n        if (this._disposable) {\r\n            this._disposable.dispose();\r\n            this._disposable = undefined;\r\n        }\r\n        if (this._reject) {\r\n            this._reject();\r\n            this._resolve = undefined;\r\n            this._reject = undefined;\r\n        }\r\n    }\r\n    done() {\r\n        if (this._disposable) {\r\n            this._disposable.dispose();\r\n            this._disposable = undefined;\r\n        }\r\n        if (this._resolve) {\r\n            this._resolve();\r\n            this._resolve = undefined;\r\n            this._reject = undefined;\r\n        }\r\n    }\r\n}\r\nexports.ProgressPart = ProgressPart;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nclass ProtocolCodeLens extends code.CodeLens {\r\n    constructor(range) {\r\n        super(range);\r\n    }\r\n}\r\nexports.default = ProtocolCodeLens;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nclass ProtocolCompletionItem extends code.CompletionItem {\r\n    constructor(label) {\r\n        super(label);\r\n    }\r\n}\r\nexports.default = ProtocolCompletionItem;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nconst ls = require(\"vscode-languageserver-protocol\");\r\nconst Is = require(\"./utils/is\");\r\nconst protocolCompletionItem_1 = require(\"./protocolCompletionItem\");\r\nconst protocolCodeLens_1 = require(\"./protocolCodeLens\");\r\nconst protocolDocumentLink_1 = require(\"./protocolDocumentLink\");\r\nvar CodeBlock;\r\n(function (CodeBlock) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.string(candidate.language) && Is.string(candidate.value);\r\n    }\r\n    CodeBlock.is = is;\r\n})(CodeBlock || (CodeBlock = {}));\r\nfunction createConverter(uriConverter) {\r\n    const nullConverter = (value) => code.Uri.parse(value);\r\n    const _uriConverter = uriConverter || nullConverter;\r\n    function asUri(value) {\r\n        return _uriConverter(value);\r\n    }\r\n    function asDiagnostics(diagnostics) {\r\n        return diagnostics.map(asDiagnostic);\r\n    }\r\n    function asDiagnostic(diagnostic) {\r\n        let result = new code.Diagnostic(asRange(diagnostic.range), diagnostic.message, asDiagnosticSeverity(diagnostic.severity));\r\n        if (Is.number(diagnostic.code) || Is.string(diagnostic.code)) {\r\n            result.code = diagnostic.code;\r\n        }\r\n        if (diagnostic.source) {\r\n            result.source = diagnostic.source;\r\n        }\r\n        if (diagnostic.relatedInformation) {\r\n            result.relatedInformation = asRelatedInformation(diagnostic.relatedInformation);\r\n        }\r\n        if (Array.isArray(diagnostic.tags)) {\r\n            result.tags = asDiagnosticTags(diagnostic.tags);\r\n        }\r\n        return result;\r\n    }\r\n    function asRelatedInformation(relatedInformation) {\r\n        return relatedInformation.map(asDiagnosticRelatedInformation);\r\n    }\r\n    function asDiagnosticRelatedInformation(information) {\r\n        return new code.DiagnosticRelatedInformation(asLocation(information.location), information.message);\r\n    }\r\n    function asDiagnosticTags(tags) {\r\n        if (!tags) {\r\n            return undefined;\r\n        }\r\n        let result = [];\r\n        for (let tag of tags) {\r\n            let converted = asDiagnosticTag(tag);\r\n            if (converted !== undefined) {\r\n                result.push(converted);\r\n            }\r\n        }\r\n        return result.length > 0 ? result : undefined;\r\n    }\r\n    function asDiagnosticTag(tag) {\r\n        switch (tag) {\r\n            case ls.DiagnosticTag.Unnecessary:\r\n                return code.DiagnosticTag.Unnecessary;\r\n            case ls.DiagnosticTag.Deprecated:\r\n                return code.DiagnosticTag.Deprecated;\r\n            default:\r\n                return undefined;\r\n        }\r\n    }\r\n    function asPosition(value) {\r\n        if (!value) {\r\n            return undefined;\r\n        }\r\n        return new code.Position(value.line, value.character);\r\n    }\r\n    function asRange(value) {\r\n        if (!value) {\r\n            return undefined;\r\n        }\r\n        return new code.Range(asPosition(value.start), asPosition(value.end));\r\n    }\r\n    function asRanges(value) {\r\n        return value.map(value => asRange(value));\r\n    }\r\n    function asDiagnosticSeverity(value) {\r\n        if (value === undefined || value === null) {\r\n            return code.DiagnosticSeverity.Error;\r\n        }\r\n        switch (value) {\r\n            case ls.DiagnosticSeverity.Error:\r\n                return code.DiagnosticSeverity.Error;\r\n            case ls.DiagnosticSeverity.Warning:\r\n                return code.DiagnosticSeverity.Warning;\r\n            case ls.DiagnosticSeverity.Information:\r\n                return code.DiagnosticSeverity.Information;\r\n            case ls.DiagnosticSeverity.Hint:\r\n                return code.DiagnosticSeverity.Hint;\r\n        }\r\n        return code.DiagnosticSeverity.Error;\r\n    }\r\n    function asHoverContent(value) {\r\n        if (Is.string(value)) {\r\n            return new code.MarkdownString(value);\r\n        }\r\n        else if (CodeBlock.is(value)) {\r\n            let result = new code.MarkdownString();\r\n            return result.appendCodeblock(value.value, value.language);\r\n        }\r\n        else if (Array.isArray(value)) {\r\n            let result = [];\r\n            for (let element of value) {\r\n                let item = new code.MarkdownString();\r\n                if (CodeBlock.is(element)) {\r\n                    item.appendCodeblock(element.value, element.language);\r\n                }\r\n                else {\r\n                    item.appendMarkdown(element);\r\n                }\r\n                result.push(item);\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            let result;\r\n            switch (value.kind) {\r\n                case ls.MarkupKind.Markdown:\r\n                    return new code.MarkdownString(value.value);\r\n                case ls.MarkupKind.PlainText:\r\n                    result = new code.MarkdownString();\r\n                    result.appendText(value.value);\r\n                    return result;\r\n                default:\r\n                    result = new code.MarkdownString();\r\n                    result.appendText(`Unsupported Markup content received. Kind is: ${value.kind}`);\r\n                    return result;\r\n            }\r\n        }\r\n    }\r\n    function asDocumentation(value) {\r\n        if (Is.string(value)) {\r\n            return value;\r\n        }\r\n        else {\r\n            switch (value.kind) {\r\n                case ls.MarkupKind.Markdown:\r\n                    return new code.MarkdownString(value.value);\r\n                case ls.MarkupKind.PlainText:\r\n                    return value.value;\r\n                default:\r\n                    return `Unsupported Markup content received. Kind is: ${value.kind}`;\r\n            }\r\n        }\r\n    }\r\n    function asHover(hover) {\r\n        if (!hover) {\r\n            return undefined;\r\n        }\r\n        return new code.Hover(asHoverContent(hover.contents), asRange(hover.range));\r\n    }\r\n    function asCompletionResult(result) {\r\n        if (!result) {\r\n            return undefined;\r\n        }\r\n        if (Array.isArray(result)) {\r\n            let items = result;\r\n            return items.map(asCompletionItem);\r\n        }\r\n        let list = result;\r\n        return new code.CompletionList(list.items.map(asCompletionItem), list.isIncomplete);\r\n    }\r\n    function asCompletionItemKind(value) {\r\n        // Protocol item kind is 1 based, codes item kind is zero based.\r\n        if (ls.CompletionItemKind.Text <= value && value <= ls.CompletionItemKind.TypeParameter) {\r\n            return [value - 1, undefined];\r\n        }\r\n        return [code.CompletionItemKind.Text, value];\r\n    }\r\n    function asCompletionItemTag(tag) {\r\n        switch (tag) {\r\n            case ls.CompletionItemTag.Deprecated:\r\n                return code.CompletionItemTag.Deprecated;\r\n        }\r\n        return undefined;\r\n    }\r\n    function asCompletionItemTags(tags) {\r\n        if (tags === undefined || tags === null) {\r\n            return [];\r\n        }\r\n        const result = [];\r\n        for (let tag of tags) {\r\n            const converted = asCompletionItemTag(tag);\r\n            if (converted !== undefined) {\r\n                result.push(converted);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    function asCompletionItem(item) {\r\n        let tags = asCompletionItemTags(item.tags);\r\n        let result = new protocolCompletionItem_1.default(item.label);\r\n        if (item.detail) {\r\n            result.detail = item.detail;\r\n        }\r\n        if (item.documentation) {\r\n            result.documentation = asDocumentation(item.documentation);\r\n            result.documentationFormat = Is.string(item.documentation) ? '$string' : item.documentation.kind;\r\n        }\r\n        if (item.filterText) {\r\n            result.filterText = item.filterText;\r\n        }\r\n        let insertText = asCompletionInsertText(item);\r\n        if (insertText) {\r\n            result.insertText = insertText.text;\r\n            result.range = insertText.range;\r\n            result.fromEdit = insertText.fromEdit;\r\n        }\r\n        if (Is.number(item.kind)) {\r\n            let [itemKind, original] = asCompletionItemKind(item.kind);\r\n            result.kind = itemKind;\r\n            if (original) {\r\n                result.originalItemKind = original;\r\n            }\r\n        }\r\n        if (item.sortText) {\r\n            result.sortText = item.sortText;\r\n        }\r\n        if (item.additionalTextEdits) {\r\n            result.additionalTextEdits = asTextEdits(item.additionalTextEdits);\r\n        }\r\n        if (Is.stringArray(item.commitCharacters)) {\r\n            result.commitCharacters = item.commitCharacters.slice();\r\n        }\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.deprecated === true || item.deprecated === false) {\r\n            result.deprecated = item.deprecated;\r\n            if (item.deprecated === true) {\r\n                tags.push(code.CompletionItemTag.Deprecated);\r\n            }\r\n        }\r\n        if (item.preselect === true || item.preselect === false) {\r\n            result.preselect = item.preselect;\r\n        }\r\n        if (item.data !== undefined) {\r\n            result.data = item.data;\r\n        }\r\n        if (tags.length > 0) {\r\n            result.tags = tags;\r\n        }\r\n        return result;\r\n    }\r\n    function asCompletionInsertText(item) {\r\n        if (item.textEdit) {\r\n            if (item.insertTextFormat === ls.InsertTextFormat.Snippet) {\r\n                return { text: new code.SnippetString(item.textEdit.newText), range: asRange(item.textEdit.range), fromEdit: true };\r\n            }\r\n            else {\r\n                return { text: item.textEdit.newText, range: asRange(item.textEdit.range), fromEdit: true };\r\n            }\r\n        }\r\n        else if (item.insertText) {\r\n            if (item.insertTextFormat === ls.InsertTextFormat.Snippet) {\r\n                return { text: new code.SnippetString(item.insertText), fromEdit: false };\r\n            }\r\n            else {\r\n                return { text: item.insertText, fromEdit: false };\r\n            }\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n    function asTextEdit(edit) {\r\n        if (!edit) {\r\n            return undefined;\r\n        }\r\n        return new code.TextEdit(asRange(edit.range), edit.newText);\r\n    }\r\n    function asTextEdits(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map(asTextEdit);\r\n    }\r\n    function asSignatureHelp(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = new code.SignatureHelp();\r\n        if (Is.number(item.activeSignature)) {\r\n            result.activeSignature = item.activeSignature;\r\n        }\r\n        else {\r\n            // activeSignature was optional in the past\r\n            result.activeSignature = 0;\r\n        }\r\n        if (Is.number(item.activeParameter)) {\r\n            result.activeParameter = item.activeParameter;\r\n        }\r\n        else {\r\n            // activeParameter was optional in the past\r\n            result.activeParameter = 0;\r\n        }\r\n        if (item.signatures) {\r\n            result.signatures = asSignatureInformations(item.signatures);\r\n        }\r\n        return result;\r\n    }\r\n    function asSignatureInformations(items) {\r\n        return items.map(asSignatureInformation);\r\n    }\r\n    function asSignatureInformation(item) {\r\n        let result = new code.SignatureInformation(item.label);\r\n        if (item.documentation) {\r\n            result.documentation = asDocumentation(item.documentation);\r\n        }\r\n        if (item.parameters) {\r\n            result.parameters = asParameterInformations(item.parameters);\r\n        }\r\n        return result;\r\n    }\r\n    function asParameterInformations(item) {\r\n        return item.map(asParameterInformation);\r\n    }\r\n    function asParameterInformation(item) {\r\n        let result = new code.ParameterInformation(item.label);\r\n        if (item.documentation) {\r\n            result.documentation = asDocumentation(item.documentation);\r\n        }\r\n        return result;\r\n    }\r\n    function asLocation(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return new code.Location(_uriConverter(item.uri), asRange(item.range));\r\n    }\r\n    function asDeclarationResult(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return asLocationResult(item);\r\n    }\r\n    function asDefinitionResult(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return asLocationResult(item);\r\n    }\r\n    function asLocationLink(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = {\r\n            targetUri: _uriConverter(item.targetUri),\r\n            targetRange: asRange(item.targetSelectionRange),\r\n            originSelectionRange: asRange(item.originSelectionRange),\r\n            targetSelectionRange: asRange(item.targetSelectionRange)\r\n        };\r\n        if (!result.targetSelectionRange) {\r\n            throw new Error(`targetSelectionRange must not be undefined or null`);\r\n        }\r\n        return result;\r\n    }\r\n    function asLocationResult(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        if (Is.array(item)) {\r\n            if (item.length === 0) {\r\n                return [];\r\n            }\r\n            else if (ls.LocationLink.is(item[0])) {\r\n                let links = item;\r\n                return links.map((link) => asLocationLink(link));\r\n            }\r\n            else {\r\n                let locations = item;\r\n                return locations.map((location) => asLocation(location));\r\n            }\r\n        }\r\n        else if (ls.LocationLink.is(item)) {\r\n            return [asLocationLink(item)];\r\n        }\r\n        else {\r\n            return asLocation(item);\r\n        }\r\n    }\r\n    function asReferences(values) {\r\n        if (!values) {\r\n            return undefined;\r\n        }\r\n        return values.map(location => asLocation(location));\r\n    }\r\n    function asDocumentHighlights(values) {\r\n        if (!values) {\r\n            return undefined;\r\n        }\r\n        return values.map(asDocumentHighlight);\r\n    }\r\n    function asDocumentHighlight(item) {\r\n        let result = new code.DocumentHighlight(asRange(item.range));\r\n        if (Is.number(item.kind)) {\r\n            result.kind = asDocumentHighlightKind(item.kind);\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentHighlightKind(item) {\r\n        switch (item) {\r\n            case ls.DocumentHighlightKind.Text:\r\n                return code.DocumentHighlightKind.Text;\r\n            case ls.DocumentHighlightKind.Read:\r\n                return code.DocumentHighlightKind.Read;\r\n            case ls.DocumentHighlightKind.Write:\r\n                return code.DocumentHighlightKind.Write;\r\n        }\r\n        return code.DocumentHighlightKind.Text;\r\n    }\r\n    function asSymbolInformations(values, uri) {\r\n        if (!values) {\r\n            return undefined;\r\n        }\r\n        return values.map(information => asSymbolInformation(information, uri));\r\n    }\r\n    function asSymbolKind(item) {\r\n        if (item <= ls.SymbolKind.TypeParameter) {\r\n            // Symbol kind is one based in the protocol and zero based in code.\r\n            return item - 1;\r\n        }\r\n        return code.SymbolKind.Property;\r\n    }\r\n    function asSymbolTag(value) {\r\n        return value;\r\n    }\r\n    function asSymbolTags(items) {\r\n        if (items === undefined || items === null) {\r\n            return undefined;\r\n        }\r\n        return items.map(asSymbolTag);\r\n    }\r\n    function asSymbolInformation(item, uri) {\r\n        // Symbol kind is one based in the protocol and zero based in code.\r\n        let result = new code.SymbolInformation(item.name, asSymbolKind(item.kind), asRange(item.location.range), item.location.uri ? _uriConverter(item.location.uri) : uri);\r\n        if (item.containerName) {\r\n            result.containerName = item.containerName;\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentSymbols(values) {\r\n        if (values === undefined || values === null) {\r\n            return undefined;\r\n        }\r\n        return values.map(asDocumentSymbol);\r\n    }\r\n    function asDocumentSymbol(value) {\r\n        let result = new code.DocumentSymbol(value.name, value.detail || '', asSymbolKind(value.kind), asRange(value.range), asRange(value.selectionRange));\r\n        if (value.children !== undefined && value.children.length > 0) {\r\n            let children = [];\r\n            for (let child of value.children) {\r\n                children.push(asDocumentSymbol(child));\r\n            }\r\n            result.children = children;\r\n        }\r\n        return result;\r\n    }\r\n    function asCommand(item) {\r\n        let result = { title: item.title, command: item.command };\r\n        if (item.arguments) {\r\n            result.arguments = item.arguments;\r\n        }\r\n        return result;\r\n    }\r\n    function asCommands(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map(asCommand);\r\n    }\r\n    const kindMapping = new Map();\r\n    kindMapping.set(ls.CodeActionKind.Empty, code.CodeActionKind.Empty);\r\n    kindMapping.set(ls.CodeActionKind.QuickFix, code.CodeActionKind.QuickFix);\r\n    kindMapping.set(ls.CodeActionKind.Refactor, code.CodeActionKind.Refactor);\r\n    kindMapping.set(ls.CodeActionKind.RefactorExtract, code.CodeActionKind.RefactorExtract);\r\n    kindMapping.set(ls.CodeActionKind.RefactorInline, code.CodeActionKind.RefactorInline);\r\n    kindMapping.set(ls.CodeActionKind.RefactorRewrite, code.CodeActionKind.RefactorRewrite);\r\n    kindMapping.set(ls.CodeActionKind.Source, code.CodeActionKind.Source);\r\n    kindMapping.set(ls.CodeActionKind.SourceOrganizeImports, code.CodeActionKind.SourceOrganizeImports);\r\n    function asCodeActionKind(item) {\r\n        if (item === undefined || item === null) {\r\n            return undefined;\r\n        }\r\n        let result = kindMapping.get(item);\r\n        if (result) {\r\n            return result;\r\n        }\r\n        let parts = item.split('.');\r\n        result = code.CodeActionKind.Empty;\r\n        for (let part of parts) {\r\n            result = result.append(part);\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeActionKinds(items) {\r\n        if (items === undefined || items === null) {\r\n            return undefined;\r\n        }\r\n        return items.map(kind => asCodeActionKind(kind));\r\n    }\r\n    function asCodeAction(item) {\r\n        if (item === undefined || item === null) {\r\n            return undefined;\r\n        }\r\n        let result = new code.CodeAction(item.title);\r\n        if (item.kind !== undefined) {\r\n            result.kind = asCodeActionKind(item.kind);\r\n        }\r\n        if (item.diagnostics) {\r\n            result.diagnostics = asDiagnostics(item.diagnostics);\r\n        }\r\n        if (item.edit) {\r\n            result.edit = asWorkspaceEdit(item.edit);\r\n        }\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.isPreferred !== undefined) {\r\n            result.isPreferred = item.isPreferred;\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeLens(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = new protocolCodeLens_1.default(asRange(item.range));\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.data !== undefined && item.data !== null) {\r\n            result.data = item.data;\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeLenses(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map((codeLens) => asCodeLens(codeLens));\r\n    }\r\n    function asWorkspaceEdit(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = new code.WorkspaceEdit();\r\n        if (item.documentChanges) {\r\n            item.documentChanges.forEach(change => {\r\n                if (ls.CreateFile.is(change)) {\r\n                    result.createFile(_uriConverter(change.uri), change.options);\r\n                }\r\n                else if (ls.RenameFile.is(change)) {\r\n                    result.renameFile(_uriConverter(change.oldUri), _uriConverter(change.newUri), change.options);\r\n                }\r\n                else if (ls.DeleteFile.is(change)) {\r\n                    result.deleteFile(_uriConverter(change.uri), change.options);\r\n                }\r\n                else if (ls.TextDocumentEdit.is(change)) {\r\n                    result.set(_uriConverter(change.textDocument.uri), asTextEdits(change.edits));\r\n                }\r\n                else {\r\n                    console.error(`Unknown workspace edit change received:\\n${JSON.stringify(change, undefined, 4)}`);\r\n                }\r\n            });\r\n        }\r\n        else if (item.changes) {\r\n            Object.keys(item.changes).forEach(key => {\r\n                result.set(_uriConverter(key), asTextEdits(item.changes[key]));\r\n            });\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentLink(item) {\r\n        let range = asRange(item.range);\r\n        let target = item.target ? asUri(item.target) : undefined;\r\n        // target must be optional in DocumentLink\r\n        let link = new protocolDocumentLink_1.default(range, target);\r\n        if (item.tooltip !== undefined) {\r\n            link.tooltip = item.tooltip;\r\n        }\r\n        if (item.data !== undefined && item.data !== null) {\r\n            link.data = item.data;\r\n        }\r\n        return link;\r\n    }\r\n    function asDocumentLinks(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map(asDocumentLink);\r\n    }\r\n    function asColor(color) {\r\n        return new code.Color(color.red, color.green, color.blue, color.alpha);\r\n    }\r\n    function asColorInformation(ci) {\r\n        return new code.ColorInformation(asRange(ci.range), asColor(ci.color));\r\n    }\r\n    function asColorInformations(colorInformation) {\r\n        if (Array.isArray(colorInformation)) {\r\n            return colorInformation.map(asColorInformation);\r\n        }\r\n        return undefined;\r\n    }\r\n    function asColorPresentation(cp) {\r\n        let presentation = new code.ColorPresentation(cp.label);\r\n        presentation.additionalTextEdits = asTextEdits(cp.additionalTextEdits);\r\n        if (cp.textEdit) {\r\n            presentation.textEdit = asTextEdit(cp.textEdit);\r\n        }\r\n        return presentation;\r\n    }\r\n    function asColorPresentations(colorPresentations) {\r\n        if (Array.isArray(colorPresentations)) {\r\n            return colorPresentations.map(asColorPresentation);\r\n        }\r\n        return undefined;\r\n    }\r\n    function asFoldingRangeKind(kind) {\r\n        if (kind) {\r\n            switch (kind) {\r\n                case ls.FoldingRangeKind.Comment:\r\n                    return code.FoldingRangeKind.Comment;\r\n                case ls.FoldingRangeKind.Imports:\r\n                    return code.FoldingRangeKind.Imports;\r\n                case ls.FoldingRangeKind.Region:\r\n                    return code.FoldingRangeKind.Region;\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n    function asFoldingRange(r) {\r\n        return new code.FoldingRange(r.startLine, r.endLine, asFoldingRangeKind(r.kind));\r\n    }\r\n    function asFoldingRanges(foldingRanges) {\r\n        if (Array.isArray(foldingRanges)) {\r\n            return foldingRanges.map(asFoldingRange);\r\n        }\r\n        return undefined;\r\n    }\r\n    function asSelectionRange(selectionRange) {\r\n        return new code.SelectionRange(asRange(selectionRange.range), selectionRange.parent ? asSelectionRange(selectionRange.parent) : undefined);\r\n    }\r\n    function asSelectionRanges(selectionRanges) {\r\n        if (!Array.isArray(selectionRanges)) {\r\n            return [];\r\n        }\r\n        let result = [];\r\n        for (let range of selectionRanges) {\r\n            result.push(asSelectionRange(range));\r\n        }\r\n        return result;\r\n    }\r\n    return {\r\n        asUri,\r\n        asDiagnostics,\r\n        asDiagnostic,\r\n        asRange,\r\n        asRanges,\r\n        asPosition,\r\n        asDiagnosticSeverity,\r\n        asDiagnosticTag,\r\n        asHover,\r\n        asCompletionResult,\r\n        asCompletionItem,\r\n        asTextEdit,\r\n        asTextEdits,\r\n        asSignatureHelp,\r\n        asSignatureInformations,\r\n        asSignatureInformation,\r\n        asParameterInformations,\r\n        asParameterInformation,\r\n        asDeclarationResult,\r\n        asDefinitionResult,\r\n        asLocation,\r\n        asReferences,\r\n        asDocumentHighlights,\r\n        asDocumentHighlight,\r\n        asDocumentHighlightKind,\r\n        asSymbolKind,\r\n        asSymbolTag,\r\n        asSymbolTags,\r\n        asSymbolInformations,\r\n        asSymbolInformation,\r\n        asDocumentSymbols,\r\n        asDocumentSymbol,\r\n        asCommand,\r\n        asCommands,\r\n        asCodeAction,\r\n        asCodeActionKind,\r\n        asCodeActionKinds,\r\n        asCodeLens,\r\n        asCodeLenses,\r\n        asWorkspaceEdit,\r\n        asDocumentLink,\r\n        asDocumentLinks,\r\n        asFoldingRangeKind,\r\n        asFoldingRange,\r\n        asFoldingRanges,\r\n        asColor,\r\n        asColorInformation,\r\n        asColorInformations,\r\n        asColorPresentation,\r\n        asColorPresentations,\r\n        asSelectionRange,\r\n        asSelectionRanges\r\n    };\r\n}\r\nexports.createConverter = createConverter;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nclass ProtocolDocumentLink extends code.DocumentLink {\r\n    constructor(range, target) {\r\n        super(range, target);\r\n    }\r\n}\r\nexports.default = ProtocolDocumentLink;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = Object.create(null);\r\n    }\r\n    return target[key];\r\n}\r\nclass SelectionRangeFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.SelectionRangeRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let capability = ensure(ensure(capabilites, 'textDocument'), 'selectionRange');\r\n        capability.dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.selectionRangeProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideSelectionRanges: (document, positions, token) => {\r\n                const client = this._client;\r\n                const provideSelectionRanges = (document, positions, token) => {\r\n                    const requestParams = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                        positions: client.code2ProtocolConverter.asPositions(positions)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.SelectionRangeRequest.type, requestParams, token).then((ranges) => client.protocol2CodeConverter.asSelectionRanges(ranges), (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.SelectionRangeRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideSelectionRanges\r\n                    ? middleware.provideSelectionRanges(document, positions, token, provideSelectionRanges)\r\n                    : provideSelectionRanges(document, positions, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerSelectionRangeProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nexports.SelectionRangeFeature = SelectionRangeFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode = require(\"vscode\");\r\nconst client_1 = require(\"./client\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nvar protocol2code;\r\n(function (protocol2code) {\r\n    function asSemanticTokens(value) {\r\n        if (value === undefined || value === null) {\r\n            return undefined;\r\n        }\r\n        return new vscode.SemanticTokens(new Uint32Array(value.data), value.resultId);\r\n    }\r\n    protocol2code.asSemanticTokens = asSemanticTokens;\r\n    function asSemanticTokensEdit(value) {\r\n        return new vscode.SemanticTokensEdit(value.start, value.deleteCount, value.data !== undefined ? new Uint32Array(value.data) : undefined);\r\n    }\r\n    protocol2code.asSemanticTokensEdit = asSemanticTokensEdit;\r\n    function asSemanticTokensEdits(value) {\r\n        if (value === undefined || value === null) {\r\n            return undefined;\r\n        }\r\n        return new vscode.SemanticTokensEdits(value.edits.map(asSemanticTokensEdit), value.resultId);\r\n    }\r\n    protocol2code.asSemanticTokensEdits = asSemanticTokensEdits;\r\n    function asLegend(value) {\r\n        return value;\r\n    }\r\n    protocol2code.asLegend = asLegend;\r\n})(protocol2code || (protocol2code = {}));\r\nclass SemanticTokensFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.Proposed.SemanticTokensRequest.type);\r\n    }\r\n    fillClientCapabilities(cap) {\r\n        const capabilites = cap;\r\n        let capability = ensure(ensure(capabilites, 'textDocument'), 'semanticTokens');\r\n        capability.dynamicRegistration = true;\r\n        capability.tokenTypes = [\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.comment,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.keyword,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.number,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.regexp,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.operator,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.namespace,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.type,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.struct,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.class,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.interface,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.enum,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.typeParameter,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.function,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.member,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.macro,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.variable,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.parameter,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.property,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.label\r\n        ];\r\n        capability.tokenModifiers = [\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.declaration,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.documentation,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.static,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.abstract,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.deprecated,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.async,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.readonly\r\n        ];\r\n    }\r\n    initialize(cap, documentSelector) {\r\n        const capabilities = cap;\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.semanticTokensProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const hasEditProvider = options.documentProvider !== undefined && typeof options.documentProvider !== 'boolean' && options.documentProvider.edits === true;\r\n        const documentProvider = {\r\n            provideDocumentSemanticTokens: (document, token) => {\r\n                const client = this._client;\r\n                const middleware = client.clientOptions.middleware;\r\n                const provideDocumentSemanticTokens = (document, token) => {\r\n                    const params = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.Proposed.SemanticTokensRequest.type, params, token).then((result) => {\r\n                        return protocol2code.asSemanticTokens(result);\r\n                    }, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.Proposed.SemanticTokensRequest.type, error);\r\n                        return undefined;\r\n                    });\r\n                };\r\n                return middleware.provideDocumentSemanticTokens\r\n                    ? middleware.provideDocumentSemanticTokens(document, token, provideDocumentSemanticTokens)\r\n                    : provideDocumentSemanticTokens(document, token);\r\n            },\r\n            provideDocumentSemanticTokensEdits: hasEditProvider\r\n                ? (document, previousResultId, token) => {\r\n                    const client = this._client;\r\n                    const middleware = client.clientOptions.middleware;\r\n                    const provideDocumentSemanticTokensEdits = (document, previousResultId, token) => {\r\n                        const params = {\r\n                            textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                            previousResultId\r\n                        };\r\n                        return client.sendRequest(vscode_languageserver_protocol_1.Proposed.SemanticTokensEditsRequest.type, params, token).then((result) => {\r\n                            if (vscode_languageserver_protocol_1.Proposed.SemanticTokens.is(result)) {\r\n                                return protocol2code.asSemanticTokens(result);\r\n                            }\r\n                            else {\r\n                                return protocol2code.asSemanticTokensEdits(result);\r\n                            }\r\n                        }, (error) => {\r\n                            client.logFailedRequest(vscode_languageserver_protocol_1.Proposed.SemanticTokensEditsRequest.type, error);\r\n                            return undefined;\r\n                        });\r\n                    };\r\n                    return middleware.provideDocumentSemanticTokensEdits\r\n                        ? middleware.provideDocumentSemanticTokensEdits(document, previousResultId, token, provideDocumentSemanticTokensEdits)\r\n                        : provideDocumentSemanticTokensEdits(document, previousResultId, token);\r\n                }\r\n                : undefined\r\n        };\r\n        const hasRangeProvider = options.rangeProvider === true;\r\n        const rangeProvider = hasRangeProvider\r\n            ? {\r\n                provideDocumentRangeSemanticTokens: (document, range, token) => {\r\n                    const client = this._client;\r\n                    const middleware = client.clientOptions.middleware;\r\n                    const provideDocumentRangeSemanticTokens = (document, range, token) => {\r\n                        const params = {\r\n                            textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                            range: client.code2ProtocolConverter.asRange(range)\r\n                        };\r\n                        return client.sendRequest(vscode_languageserver_protocol_1.Proposed.SemanticTokensRangeRequest.type, params, token).then((result) => {\r\n                            return protocol2code.asSemanticTokens(result);\r\n                        }, (error) => {\r\n                            client.logFailedRequest(vscode_languageserver_protocol_1.Proposed.SemanticTokensRangeRequest.type, error);\r\n                            return undefined;\r\n                        });\r\n                    };\r\n                    return middleware.provideDocumentRangeSemanticTokens\r\n                        ? middleware.provideDocumentRangeSemanticTokens(document, range, token, provideDocumentRangeSemanticTokens)\r\n                        : provideDocumentRangeSemanticTokens(document, range, token);\r\n                }\r\n            }\r\n            : undefined;\r\n        const disposables = [];\r\n        const legend = protocol2code.asLegend(options.legend);\r\n        disposables.push(vscode.languages.registerDocumentSemanticTokensProvider(options.documentSelector, documentProvider, legend));\r\n        if (rangeProvider !== undefined) {\r\n            disposables.push(vscode.languages.registerDocumentRangeSemanticTokensProvider(options.documentSelector, rangeProvider, legend));\r\n        }\r\n        return [new vscode.Disposable(() => disposables.forEach(item => item.dispose())), { document: documentProvider, range: rangeProvider }];\r\n    }\r\n}\r\nexports.SemanticTokensFeature = SemanticTokensFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass TypeDefinitionFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.TypeDefinitionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'typeDefinition').dynamicRegistration = true;\r\n        let typeDefinitionSupport = ensure(ensure(capabilites, 'textDocument'), 'typeDefinition');\r\n        typeDefinitionSupport.dynamicRegistration = true;\r\n        typeDefinitionSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.typeDefinitionProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideTypeDefinition: (document, position, token) => {\r\n                const client = this._client;\r\n                const provideTypeDefinition = (document, position, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideTypeDefinition\r\n                    ? middleware.provideTypeDefinition(document, position, token, provideTypeDefinition)\r\n                    : provideTypeDefinition(document, position, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerTypeDefinitionProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nexports.TypeDefinitionFeature = TypeDefinitionFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass Delayer {\r\n    constructor(defaultDelay) {\r\n        this.defaultDelay = defaultDelay;\r\n        this.timeout = undefined;\r\n        this.completionPromise = undefined;\r\n        this.onSuccess = undefined;\r\n        this.task = undefined;\r\n    }\r\n    trigger(task, delay = this.defaultDelay) {\r\n        this.task = task;\r\n        if (delay >= 0) {\r\n            this.cancelTimeout();\r\n        }\r\n        if (!this.completionPromise) {\r\n            this.completionPromise = new Promise((resolve) => {\r\n                this.onSuccess = resolve;\r\n            }).then(() => {\r\n                this.completionPromise = undefined;\r\n                this.onSuccess = undefined;\r\n                var result = this.task();\r\n                this.task = undefined;\r\n                return result;\r\n            });\r\n        }\r\n        if (delay >= 0 || this.timeout === void 0) {\r\n            this.timeout = setTimeout(() => {\r\n                this.timeout = undefined;\r\n                this.onSuccess(undefined);\r\n            }, delay >= 0 ? delay : this.defaultDelay);\r\n        }\r\n        return this.completionPromise;\r\n    }\r\n    forceDelivery() {\r\n        if (!this.completionPromise) {\r\n            return undefined;\r\n        }\r\n        this.cancelTimeout();\r\n        let result = this.task();\r\n        this.completionPromise = undefined;\r\n        this.onSuccess = undefined;\r\n        this.task = undefined;\r\n        return result;\r\n    }\r\n    isTriggered() {\r\n        return this.timeout !== void 0;\r\n    }\r\n    cancel() {\r\n        this.cancelTimeout();\r\n        this.completionPromise = undefined;\r\n    }\r\n    cancelTimeout() {\r\n        if (this.timeout !== void 0) {\r\n            clearTimeout(this.timeout);\r\n            this.timeout = undefined;\r\n        }\r\n    }\r\n}\r\nexports.Delayer = Delayer;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\nfunction typedArray(value, check) {\r\n    return Array.isArray(value) && value.every(check);\r\n}\r\nexports.typedArray = typedArray;\r\nfunction thenable(value) {\r\n    return value && func(value.then);\r\n}\r\nexports.thenable = thenable;\r\nfunction asPromise(value) {\r\n    if (value instanceof Promise) {\r\n        return value;\r\n    }\r\n    else if (thenable(value)) {\r\n        return new Promise((resolve, reject) => {\r\n            value.then((resolved) => resolve(resolved), (error) => reject(error));\r\n        });\r\n    }\r\n    else {\r\n        return Promise.resolve(value);\r\n    }\r\n}\r\nexports.asPromise = asPromise;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst cp = require(\"child_process\");\r\nconst path_1 = require(\"path\");\r\nconst isWindows = (process.platform === 'win32');\r\nconst isMacintosh = (process.platform === 'darwin');\r\nconst isLinux = (process.platform === 'linux');\r\nfunction terminate(process, cwd) {\r\n    if (isWindows) {\r\n        try {\r\n            // This we run in Atom execFileSync is available.\r\n            // Ignore stderr since this is otherwise piped to parent.stderr\r\n            // which might be already closed.\r\n            let options = {\r\n                stdio: ['pipe', 'pipe', 'ignore']\r\n            };\r\n            if (cwd) {\r\n                options.cwd = cwd;\r\n            }\r\n            cp.execFileSync('taskkill', ['/T', '/F', '/PID', process.pid.toString()], options);\r\n            return true;\r\n        }\r\n        catch (err) {\r\n            return false;\r\n        }\r\n    }\r\n    else if (isLinux || isMacintosh) {\r\n        try {\r\n            var cmd = path_1.join(__dirname, 'terminateProcess.sh');\r\n            var result = cp.spawnSync(cmd, [process.pid.toString()]);\r\n            return result.error ? false : true;\r\n        }\r\n        catch (err) {\r\n            return false;\r\n        }\r\n    }\r\n    else {\r\n        process.kill('SIGKILL');\r\n        return true;\r\n    }\r\n}\r\nexports.terminate = terminate;\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass ValueUUID {\r\n    constructor(_value) {\r\n        this._value = _value;\r\n        // empty\r\n    }\r\n    asHex() {\r\n        return this._value;\r\n    }\r\n    equals(other) {\r\n        return this.asHex() === other.asHex();\r\n    }\r\n}\r\nclass V4UUID extends ValueUUID {\r\n    constructor() {\r\n        super([\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            '4',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._oneOf(V4UUID._timeHighBits),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n        ].join(''));\r\n    }\r\n    static _oneOf(array) {\r\n        return array[Math.floor(array.length * Math.random())];\r\n    }\r\n    static _randomHex() {\r\n        return V4UUID._oneOf(V4UUID._chars);\r\n    }\r\n}\r\nV4UUID._chars = ['0', '1', '2', '3', '4', '5', '6', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\r\nV4UUID._timeHighBits = ['8', '9', 'a', 'b'];\r\n/**\r\n * An empty UUID that contains only zeros.\r\n */\r\nexports.empty = new ValueUUID('00000000-0000-0000-0000-000000000000');\r\nfunction v4() {\r\n    return new V4UUID();\r\n}\r\nexports.v4 = v4;\r\nconst _UUIDPattern = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\r\nfunction isUUID(value) {\r\n    return _UUIDPattern.test(value);\r\n}\r\nexports.isUUID = isUUID;\r\n/**\r\n * Parses a UUID that is of the format xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.\r\n * @param value A uuid string.\r\n */\r\nfunction parse(value) {\r\n    if (!isUUID(value)) {\r\n        throw new Error('invalid uuid');\r\n    }\r\n    return new ValueUUID(value);\r\n}\r\nexports.parse = parse;\r\nfunction generateUuid() {\r\n    return v4().asHex();\r\n}\r\nexports.generateUuid = generateUuid;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nfunction access(target, key) {\r\n    if (target === void 0) {\r\n        return undefined;\r\n    }\r\n    return target[key];\r\n}\r\nfunction arrayDiff(left, right) {\r\n    return left.filter(element => right.indexOf(element) < 0);\r\n}\r\nexports.arrayDiff = arrayDiff;\r\nclass WorkspaceFoldersFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._listeners = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type;\r\n    }\r\n    fillInitializeParams(params) {\r\n        let folders = vscode_1.workspace.workspaceFolders;\r\n        this.initializeWithFolders(folders);\r\n        if (folders === void 0) {\r\n            params.workspaceFolders = null;\r\n        }\r\n        else {\r\n            params.workspaceFolders = folders.map(folder => this.asProtocol(folder));\r\n        }\r\n    }\r\n    initializeWithFolders(currentWorkspaceFolders) {\r\n        this._initialFolders = currentWorkspaceFolders;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        capabilities.workspace = capabilities.workspace || {};\r\n        capabilities.workspace.workspaceFolders = true;\r\n    }\r\n    initialize(capabilities) {\r\n        let client = this._client;\r\n        client.onRequest(vscode_languageserver_protocol_1.WorkspaceFoldersRequest.type, (token) => {\r\n            let workspaceFolders = () => {\r\n                let folders = vscode_1.workspace.workspaceFolders;\r\n                if (folders === void 0) {\r\n                    return null;\r\n                }\r\n                let result = folders.map((folder) => {\r\n                    return this.asProtocol(folder);\r\n                });\r\n                return result;\r\n            };\r\n            let middleware = client.clientOptions.middleware.workspace;\r\n            return middleware && middleware.workspaceFolders\r\n                ? middleware.workspaceFolders(token, workspaceFolders)\r\n                : workspaceFolders(token);\r\n        });\r\n        let value = access(access(access(capabilities, 'workspace'), 'workspaceFolders'), 'changeNotifications');\r\n        let id;\r\n        if (typeof value === 'string') {\r\n            id = value;\r\n        }\r\n        else if (value === true) {\r\n            id = UUID.generateUuid();\r\n        }\r\n        if (id) {\r\n            this.register(this.messages, {\r\n                id: id,\r\n                registerOptions: undefined\r\n            });\r\n        }\r\n    }\r\n    sendInitialEvent(currentWorkspaceFolders) {\r\n        if (this._initialFolders && currentWorkspaceFolders) {\r\n            const removed = arrayDiff(this._initialFolders, currentWorkspaceFolders);\r\n            const added = arrayDiff(currentWorkspaceFolders, this._initialFolders);\r\n            if (added.length > 0 || removed.length > 0) {\r\n                this.doSendEvent(added, removed);\r\n            }\r\n        }\r\n        else if (this._initialFolders) {\r\n            this.doSendEvent([], this._initialFolders);\r\n        }\r\n        else if (currentWorkspaceFolders) {\r\n            this.doSendEvent(currentWorkspaceFolders, []);\r\n        }\r\n    }\r\n    doSendEvent(addedFolders, removedFolders) {\r\n        let params = {\r\n            event: {\r\n                added: addedFolders.map(folder => this.asProtocol(folder)),\r\n                removed: removedFolders.map(folder => this.asProtocol(folder))\r\n            }\r\n        };\r\n        this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type, params);\r\n    }\r\n    register(_message, data) {\r\n        let id = data.id;\r\n        let client = this._client;\r\n        let disposable = vscode_1.workspace.onDidChangeWorkspaceFolders((event) => {\r\n            let didChangeWorkspaceFolders = (event) => {\r\n                this.doSendEvent(event.added, event.removed);\r\n            };\r\n            let middleware = client.clientOptions.middleware.workspace;\r\n            middleware && middleware.didChangeWorkspaceFolders\r\n                ? middleware.didChangeWorkspaceFolders(event, didChangeWorkspaceFolders)\r\n                : didChangeWorkspaceFolders(event);\r\n        });\r\n        this._listeners.set(id, disposable);\r\n        this.sendInitialEvent(vscode_1.workspace.workspaceFolders);\r\n    }\r\n    unregister(id) {\r\n        let disposable = this._listeners.get(id);\r\n        if (disposable === void 0) {\r\n            return;\r\n        }\r\n        this._listeners.delete(id);\r\n        disposable.dispose();\r\n    }\r\n    dispose() {\r\n        for (let disposable of this._listeners.values()) {\r\n            disposable.dispose();\r\n        }\r\n        this._listeners.clear();\r\n    }\r\n    asProtocol(workspaceFolder) {\r\n        if (workspaceFolder === void 0) {\r\n            return null;\r\n        }\r\n        return { uri: this._client.code2ProtocolConverter.asUri(workspaceFolder.uri), name: workspaceFolder.name };\r\n    }\r\n}\r\nexports.WorkspaceFoldersFeature = WorkspaceFoldersFeature;\r\n","exports = module.exports = SemVer\n\nvar debug\n/* istanbul ignore next */\nif (typeof process === 'object' &&\n    process.env &&\n    process.env.NODE_DEBUG &&\n    /\\bsemver\\b/i.test(process.env.NODE_DEBUG)) {\n  debug = function () {\n    var args = Array.prototype.slice.call(arguments, 0)\n    args.unshift('SEMVER')\n    console.log.apply(console, args)\n  }\n} else {\n  debug = function () {}\n}\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nexports.SEMVER_SPEC_VERSION = '2.0.0'\n\nvar MAX_LENGTH = 256\nvar MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n  /* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nvar MAX_SAFE_COMPONENT_LENGTH = 16\n\n// The actual regexps go on exports.re\nvar re = exports.re = []\nvar src = exports.src = []\nvar t = exports.tokens = {}\nvar R = 0\n\nfunction tok (n) {\n  t[n] = R++\n}\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\ntok('NUMERICIDENTIFIER')\nsrc[t.NUMERICIDENTIFIER] = '0|[1-9]\\\\d*'\ntok('NUMERICIDENTIFIERLOOSE')\nsrc[t.NUMERICIDENTIFIERLOOSE] = '[0-9]+'\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\ntok('NONNUMERICIDENTIFIER')\nsrc[t.NONNUMERICIDENTIFIER] = '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*'\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\ntok('MAINVERSION')\nsrc[t.MAINVERSION] = '(' + src[t.NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[t.NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[t.NUMERICIDENTIFIER] + ')'\n\ntok('MAINVERSIONLOOSE')\nsrc[t.MAINVERSIONLOOSE] = '(' + src[t.NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[t.NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[t.NUMERICIDENTIFIERLOOSE] + ')'\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\ntok('PRERELEASEIDENTIFIER')\nsrc[t.PRERELEASEIDENTIFIER] = '(?:' + src[t.NUMERICIDENTIFIER] +\n                            '|' + src[t.NONNUMERICIDENTIFIER] + ')'\n\ntok('PRERELEASEIDENTIFIERLOOSE')\nsrc[t.PRERELEASEIDENTIFIERLOOSE] = '(?:' + src[t.NUMERICIDENTIFIERLOOSE] +\n                                 '|' + src[t.NONNUMERICIDENTIFIER] + ')'\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\ntok('PRERELEASE')\nsrc[t.PRERELEASE] = '(?:-(' + src[t.PRERELEASEIDENTIFIER] +\n                  '(?:\\\\.' + src[t.PRERELEASEIDENTIFIER] + ')*))'\n\ntok('PRERELEASELOOSE')\nsrc[t.PRERELEASELOOSE] = '(?:-?(' + src[t.PRERELEASEIDENTIFIERLOOSE] +\n                       '(?:\\\\.' + src[t.PRERELEASEIDENTIFIERLOOSE] + ')*))'\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\ntok('BUILDIDENTIFIER')\nsrc[t.BUILDIDENTIFIER] = '[0-9A-Za-z-]+'\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\ntok('BUILD')\nsrc[t.BUILD] = '(?:\\\\+(' + src[t.BUILDIDENTIFIER] +\n             '(?:\\\\.' + src[t.BUILDIDENTIFIER] + ')*))'\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\ntok('FULL')\ntok('FULLPLAIN')\nsrc[t.FULLPLAIN] = 'v?' + src[t.MAINVERSION] +\n                  src[t.PRERELEASE] + '?' +\n                  src[t.BUILD] + '?'\n\nsrc[t.FULL] = '^' + src[t.FULLPLAIN] + '$'\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\ntok('LOOSEPLAIN')\nsrc[t.LOOSEPLAIN] = '[v=\\\\s]*' + src[t.MAINVERSIONLOOSE] +\n                  src[t.PRERELEASELOOSE] + '?' +\n                  src[t.BUILD] + '?'\n\ntok('LOOSE')\nsrc[t.LOOSE] = '^' + src[t.LOOSEPLAIN] + '$'\n\ntok('GTLT')\nsrc[t.GTLT] = '((?:<|>)?=?)'\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\ntok('XRANGEIDENTIFIERLOOSE')\nsrc[t.XRANGEIDENTIFIERLOOSE] = src[t.NUMERICIDENTIFIERLOOSE] + '|x|X|\\\\*'\ntok('XRANGEIDENTIFIER')\nsrc[t.XRANGEIDENTIFIER] = src[t.NUMERICIDENTIFIER] + '|x|X|\\\\*'\n\ntok('XRANGEPLAIN')\nsrc[t.XRANGEPLAIN] = '[v=\\\\s]*(' + src[t.XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[t.XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[t.XRANGEIDENTIFIER] + ')' +\n                   '(?:' + src[t.PRERELEASE] + ')?' +\n                   src[t.BUILD] + '?' +\n                   ')?)?'\n\ntok('XRANGEPLAINLOOSE')\nsrc[t.XRANGEPLAINLOOSE] = '[v=\\\\s]*(' + src[t.XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[t.XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[t.XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:' + src[t.PRERELEASELOOSE] + ')?' +\n                        src[t.BUILD] + '?' +\n                        ')?)?'\n\ntok('XRANGE')\nsrc[t.XRANGE] = '^' + src[t.GTLT] + '\\\\s*' + src[t.XRANGEPLAIN] + '$'\ntok('XRANGELOOSE')\nsrc[t.XRANGELOOSE] = '^' + src[t.GTLT] + '\\\\s*' + src[t.XRANGEPLAINLOOSE] + '$'\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\ntok('COERCE')\nsrc[t.COERCE] = '(^|[^\\\\d])' +\n              '(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '})' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:$|[^\\\\d])'\ntok('COERCERTL')\nre[t.COERCERTL] = new RegExp(src[t.COERCE], 'g')\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\ntok('LONETILDE')\nsrc[t.LONETILDE] = '(?:~>?)'\n\ntok('TILDETRIM')\nsrc[t.TILDETRIM] = '(\\\\s*)' + src[t.LONETILDE] + '\\\\s+'\nre[t.TILDETRIM] = new RegExp(src[t.TILDETRIM], 'g')\nvar tildeTrimReplace = '$1~'\n\ntok('TILDE')\nsrc[t.TILDE] = '^' + src[t.LONETILDE] + src[t.XRANGEPLAIN] + '$'\ntok('TILDELOOSE')\nsrc[t.TILDELOOSE] = '^' + src[t.LONETILDE] + src[t.XRANGEPLAINLOOSE] + '$'\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\ntok('LONECARET')\nsrc[t.LONECARET] = '(?:\\\\^)'\n\ntok('CARETTRIM')\nsrc[t.CARETTRIM] = '(\\\\s*)' + src[t.LONECARET] + '\\\\s+'\nre[t.CARETTRIM] = new RegExp(src[t.CARETTRIM], 'g')\nvar caretTrimReplace = '$1^'\n\ntok('CARET')\nsrc[t.CARET] = '^' + src[t.LONECARET] + src[t.XRANGEPLAIN] + '$'\ntok('CARETLOOSE')\nsrc[t.CARETLOOSE] = '^' + src[t.LONECARET] + src[t.XRANGEPLAINLOOSE] + '$'\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\ntok('COMPARATORLOOSE')\nsrc[t.COMPARATORLOOSE] = '^' + src[t.GTLT] + '\\\\s*(' + src[t.LOOSEPLAIN] + ')$|^$'\ntok('COMPARATOR')\nsrc[t.COMPARATOR] = '^' + src[t.GTLT] + '\\\\s*(' + src[t.FULLPLAIN] + ')$|^$'\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\ntok('COMPARATORTRIM')\nsrc[t.COMPARATORTRIM] = '(\\\\s*)' + src[t.GTLT] +\n                      '\\\\s*(' + src[t.LOOSEPLAIN] + '|' + src[t.XRANGEPLAIN] + ')'\n\n// this one has to use the /g flag\nre[t.COMPARATORTRIM] = new RegExp(src[t.COMPARATORTRIM], 'g')\nvar comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\ntok('HYPHENRANGE')\nsrc[t.HYPHENRANGE] = '^\\\\s*(' + src[t.XRANGEPLAIN] + ')' +\n                   '\\\\s+-\\\\s+' +\n                   '(' + src[t.XRANGEPLAIN] + ')' +\n                   '\\\\s*$'\n\ntok('HYPHENRANGELOOSE')\nsrc[t.HYPHENRANGELOOSE] = '^\\\\s*(' + src[t.XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s+-\\\\s+' +\n                        '(' + src[t.XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s*$'\n\n// Star ranges basically just allow anything at all.\ntok('STAR')\nsrc[t.STAR] = '(<|>)?=?\\\\s*\\\\*'\n\n// Compile to actual regexp objects.\n// All are flag-free, unless they were created above with a flag.\nfor (var i = 0; i < R; i++) {\n  debug(i, src[i])\n  if (!re[i]) {\n    re[i] = new RegExp(src[i])\n  }\n}\n\nexports.parse = parse\nfunction parse (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  if (version.length > MAX_LENGTH) {\n    return null\n  }\n\n  var r = options.loose ? re[t.LOOSE] : re[t.FULL]\n  if (!r.test(version)) {\n    return null\n  }\n\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    return null\n  }\n}\n\nexports.valid = valid\nfunction valid (version, options) {\n  var v = parse(version, options)\n  return v ? v.version : null\n}\n\nexports.clean = clean\nfunction clean (version, options) {\n  var s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\n\nexports.SemVer = SemVer\n\nfunction SemVer (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n  if (version instanceof SemVer) {\n    if (version.loose === options.loose) {\n      return version\n    } else {\n      version = version.version\n    }\n  } else if (typeof version !== 'string') {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  if (version.length > MAX_LENGTH) {\n    throw new TypeError('version is longer than ' + MAX_LENGTH + ' characters')\n  }\n\n  if (!(this instanceof SemVer)) {\n    return new SemVer(version, options)\n  }\n\n  debug('SemVer', version, options)\n  this.options = options\n  this.loose = !!options.loose\n\n  var m = version.trim().match(options.loose ? re[t.LOOSE] : re[t.FULL])\n\n  if (!m) {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  this.raw = version\n\n  // these are actually numbers\n  this.major = +m[1]\n  this.minor = +m[2]\n  this.patch = +m[3]\n\n  if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n    throw new TypeError('Invalid major version')\n  }\n\n  if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n    throw new TypeError('Invalid minor version')\n  }\n\n  if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n    throw new TypeError('Invalid patch version')\n  }\n\n  // numberify any prerelease numeric ids\n  if (!m[4]) {\n    this.prerelease = []\n  } else {\n    this.prerelease = m[4].split('.').map(function (id) {\n      if (/^[0-9]+$/.test(id)) {\n        var num = +id\n        if (num >= 0 && num < MAX_SAFE_INTEGER) {\n          return num\n        }\n      }\n      return id\n    })\n  }\n\n  this.build = m[5] ? m[5].split('.') : []\n  this.format()\n}\n\nSemVer.prototype.format = function () {\n  this.version = this.major + '.' + this.minor + '.' + this.patch\n  if (this.prerelease.length) {\n    this.version += '-' + this.prerelease.join('.')\n  }\n  return this.version\n}\n\nSemVer.prototype.toString = function () {\n  return this.version\n}\n\nSemVer.prototype.compare = function (other) {\n  debug('SemVer.compare', this.version, this.options, other)\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return this.compareMain(other) || this.comparePre(other)\n}\n\nSemVer.prototype.compareMain = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return compareIdentifiers(this.major, other.major) ||\n         compareIdentifiers(this.minor, other.minor) ||\n         compareIdentifiers(this.patch, other.patch)\n}\n\nSemVer.prototype.comparePre = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  // NOT having a prerelease is > having one\n  if (this.prerelease.length && !other.prerelease.length) {\n    return -1\n  } else if (!this.prerelease.length && other.prerelease.length) {\n    return 1\n  } else if (!this.prerelease.length && !other.prerelease.length) {\n    return 0\n  }\n\n  var i = 0\n  do {\n    var a = this.prerelease[i]\n    var b = other.prerelease[i]\n    debug('prerelease compare', i, a, b)\n    if (a === undefined && b === undefined) {\n      return 0\n    } else if (b === undefined) {\n      return 1\n    } else if (a === undefined) {\n      return -1\n    } else if (a === b) {\n      continue\n    } else {\n      return compareIdentifiers(a, b)\n    }\n  } while (++i)\n}\n\nSemVer.prototype.compareBuild = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  var i = 0\n  do {\n    var a = this.build[i]\n    var b = other.build[i]\n    debug('prerelease compare', i, a, b)\n    if (a === undefined && b === undefined) {\n      return 0\n    } else if (b === undefined) {\n      return 1\n    } else if (a === undefined) {\n      return -1\n    } else if (a === b) {\n      continue\n    } else {\n      return compareIdentifiers(a, b)\n    }\n  } while (++i)\n}\n\n// preminor will bump the version up to the next minor release, and immediately\n// down to pre-release. premajor and prepatch work the same way.\nSemVer.prototype.inc = function (release, identifier) {\n  switch (release) {\n    case 'premajor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor = 0\n      this.major++\n      this.inc('pre', identifier)\n      break\n    case 'preminor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor++\n      this.inc('pre', identifier)\n      break\n    case 'prepatch':\n      // If this is already a prerelease, it will bump to the next version\n      // drop any prereleases that might already exist, since they are not\n      // relevant at this point.\n      this.prerelease.length = 0\n      this.inc('patch', identifier)\n      this.inc('pre', identifier)\n      break\n    // If the input is a non-prerelease version, this acts the same as\n    // prepatch.\n    case 'prerelease':\n      if (this.prerelease.length === 0) {\n        this.inc('patch', identifier)\n      }\n      this.inc('pre', identifier)\n      break\n\n    case 'major':\n      // If this is a pre-major version, bump up to the same major version.\n      // Otherwise increment major.\n      // 1.0.0-5 bumps to 1.0.0\n      // 1.1.0 bumps to 2.0.0\n      if (this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0) {\n        this.major++\n      }\n      this.minor = 0\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'minor':\n      // If this is a pre-minor version, bump up to the same minor version.\n      // Otherwise increment minor.\n      // 1.2.0-5 bumps to 1.2.0\n      // 1.2.1 bumps to 1.3.0\n      if (this.patch !== 0 || this.prerelease.length === 0) {\n        this.minor++\n      }\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'patch':\n      // If this is not a pre-release version, it will increment the patch.\n      // If it is a pre-release it will bump up to the same patch version.\n      // 1.2.0-5 patches to 1.2.0\n      // 1.2.0 patches to 1.2.1\n      if (this.prerelease.length === 0) {\n        this.patch++\n      }\n      this.prerelease = []\n      break\n    // This probably shouldn't be used publicly.\n    // 1.0.0 \"pre\" would become 1.0.0-0 which is the wrong direction.\n    case 'pre':\n      if (this.prerelease.length === 0) {\n        this.prerelease = [0]\n      } else {\n        var i = this.prerelease.length\n        while (--i >= 0) {\n          if (typeof this.prerelease[i] === 'number') {\n            this.prerelease[i]++\n            i = -2\n          }\n        }\n        if (i === -1) {\n          // didn't increment anything\n          this.prerelease.push(0)\n        }\n      }\n      if (identifier) {\n        // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n        // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n        if (this.prerelease[0] === identifier) {\n          if (isNaN(this.prerelease[1])) {\n            this.prerelease = [identifier, 0]\n          }\n        } else {\n          this.prerelease = [identifier, 0]\n        }\n      }\n      break\n\n    default:\n      throw new Error('invalid increment argument: ' + release)\n  }\n  this.format()\n  this.raw = this.version\n  return this\n}\n\nexports.inc = inc\nfunction inc (version, release, loose, identifier) {\n  if (typeof (loose) === 'string') {\n    identifier = loose\n    loose = undefined\n  }\n\n  try {\n    return new SemVer(version, loose).inc(release, identifier).version\n  } catch (er) {\n    return null\n  }\n}\n\nexports.diff = diff\nfunction diff (version1, version2) {\n  if (eq(version1, version2)) {\n    return null\n  } else {\n    var v1 = parse(version1)\n    var v2 = parse(version2)\n    var prefix = ''\n    if (v1.prerelease.length || v2.prerelease.length) {\n      prefix = 'pre'\n      var defaultResult = 'prerelease'\n    }\n    for (var key in v1) {\n      if (key === 'major' || key === 'minor' || key === 'patch') {\n        if (v1[key] !== v2[key]) {\n          return prefix + key\n        }\n      }\n    }\n    return defaultResult // may be undefined\n  }\n}\n\nexports.compareIdentifiers = compareIdentifiers\n\nvar numeric = /^[0-9]+$/\nfunction compareIdentifiers (a, b) {\n  var anum = numeric.test(a)\n  var bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nexports.rcompareIdentifiers = rcompareIdentifiers\nfunction rcompareIdentifiers (a, b) {\n  return compareIdentifiers(b, a)\n}\n\nexports.major = major\nfunction major (a, loose) {\n  return new SemVer(a, loose).major\n}\n\nexports.minor = minor\nfunction minor (a, loose) {\n  return new SemVer(a, loose).minor\n}\n\nexports.patch = patch\nfunction patch (a, loose) {\n  return new SemVer(a, loose).patch\n}\n\nexports.compare = compare\nfunction compare (a, b, loose) {\n  return new SemVer(a, loose).compare(new SemVer(b, loose))\n}\n\nexports.compareLoose = compareLoose\nfunction compareLoose (a, b) {\n  return compare(a, b, true)\n}\n\nexports.compareBuild = compareBuild\nfunction compareBuild (a, b, loose) {\n  var versionA = new SemVer(a, loose)\n  var versionB = new SemVer(b, loose)\n  return versionA.compare(versionB) || versionA.compareBuild(versionB)\n}\n\nexports.rcompare = rcompare\nfunction rcompare (a, b, loose) {\n  return compare(b, a, loose)\n}\n\nexports.sort = sort\nfunction sort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.compareBuild(a, b, loose)\n  })\n}\n\nexports.rsort = rsort\nfunction rsort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.compareBuild(b, a, loose)\n  })\n}\n\nexports.gt = gt\nfunction gt (a, b, loose) {\n  return compare(a, b, loose) > 0\n}\n\nexports.lt = lt\nfunction lt (a, b, loose) {\n  return compare(a, b, loose) < 0\n}\n\nexports.eq = eq\nfunction eq (a, b, loose) {\n  return compare(a, b, loose) === 0\n}\n\nexports.neq = neq\nfunction neq (a, b, loose) {\n  return compare(a, b, loose) !== 0\n}\n\nexports.gte = gte\nfunction gte (a, b, loose) {\n  return compare(a, b, loose) >= 0\n}\n\nexports.lte = lte\nfunction lte (a, b, loose) {\n  return compare(a, b, loose) <= 0\n}\n\nexports.cmp = cmp\nfunction cmp (a, op, b, loose) {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError('Invalid operator: ' + op)\n  }\n}\n\nexports.Comparator = Comparator\nfunction Comparator (comp, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (comp instanceof Comparator) {\n    if (comp.loose === !!options.loose) {\n      return comp\n    } else {\n      comp = comp.value\n    }\n  }\n\n  if (!(this instanceof Comparator)) {\n    return new Comparator(comp, options)\n  }\n\n  debug('comparator', comp, options)\n  this.options = options\n  this.loose = !!options.loose\n  this.parse(comp)\n\n  if (this.semver === ANY) {\n    this.value = ''\n  } else {\n    this.value = this.operator + this.semver.version\n  }\n\n  debug('comp', this)\n}\n\nvar ANY = {}\nComparator.prototype.parse = function (comp) {\n  var r = this.options.loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n  var m = comp.match(r)\n\n  if (!m) {\n    throw new TypeError('Invalid comparator: ' + comp)\n  }\n\n  this.operator = m[1] !== undefined ? m[1] : ''\n  if (this.operator === '=') {\n    this.operator = ''\n  }\n\n  // if it literally is just '>' or '' then allow anything.\n  if (!m[2]) {\n    this.semver = ANY\n  } else {\n    this.semver = new SemVer(m[2], this.options.loose)\n  }\n}\n\nComparator.prototype.toString = function () {\n  return this.value\n}\n\nComparator.prototype.test = function (version) {\n  debug('Comparator.test', version, this.options.loose)\n\n  if (this.semver === ANY || version === ANY) {\n    return true\n  }\n\n  if (typeof version === 'string') {\n    try {\n      version = new SemVer(version, this.options)\n    } catch (er) {\n      return false\n    }\n  }\n\n  return cmp(version, this.operator, this.semver, this.options)\n}\n\nComparator.prototype.intersects = function (comp, options) {\n  if (!(comp instanceof Comparator)) {\n    throw new TypeError('a Comparator is required')\n  }\n\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  var rangeTmp\n\n  if (this.operator === '') {\n    if (this.value === '') {\n      return true\n    }\n    rangeTmp = new Range(comp.value, options)\n    return satisfies(this.value, rangeTmp, options)\n  } else if (comp.operator === '') {\n    if (comp.value === '') {\n      return true\n    }\n    rangeTmp = new Range(this.value, options)\n    return satisfies(comp.semver, rangeTmp, options)\n  }\n\n  var sameDirectionIncreasing =\n    (this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '>=' || comp.operator === '>')\n  var sameDirectionDecreasing =\n    (this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '<=' || comp.operator === '<')\n  var sameSemVer = this.semver.version === comp.semver.version\n  var differentDirectionsInclusive =\n    (this.operator === '>=' || this.operator === '<=') &&\n    (comp.operator === '>=' || comp.operator === '<=')\n  var oppositeDirectionsLessThan =\n    cmp(this.semver, '<', comp.semver, options) &&\n    ((this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '<=' || comp.operator === '<'))\n  var oppositeDirectionsGreaterThan =\n    cmp(this.semver, '>', comp.semver, options) &&\n    ((this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '>=' || comp.operator === '>'))\n\n  return sameDirectionIncreasing || sameDirectionDecreasing ||\n    (sameSemVer && differentDirectionsInclusive) ||\n    oppositeDirectionsLessThan || oppositeDirectionsGreaterThan\n}\n\nexports.Range = Range\nfunction Range (range, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (range instanceof Range) {\n    if (range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease) {\n      return range\n    } else {\n      return new Range(range.raw, options)\n    }\n  }\n\n  if (range instanceof Comparator) {\n    return new Range(range.value, options)\n  }\n\n  if (!(this instanceof Range)) {\n    return new Range(range, options)\n  }\n\n  this.options = options\n  this.loose = !!options.loose\n  this.includePrerelease = !!options.includePrerelease\n\n  // First, split based on boolean or ||\n  this.raw = range\n  this.set = range.split(/\\s*\\|\\|\\s*/).map(function (range) {\n    return this.parseRange(range.trim())\n  }, this).filter(function (c) {\n    // throw out any that are not relevant for whatever reason\n    return c.length\n  })\n\n  if (!this.set.length) {\n    throw new TypeError('Invalid SemVer Range: ' + range)\n  }\n\n  this.format()\n}\n\nRange.prototype.format = function () {\n  this.range = this.set.map(function (comps) {\n    return comps.join(' ').trim()\n  }).join('||').trim()\n  return this.range\n}\n\nRange.prototype.toString = function () {\n  return this.range\n}\n\nRange.prototype.parseRange = function (range) {\n  var loose = this.options.loose\n  range = range.trim()\n  // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n  var hr = loose ? re[t.HYPHENRANGELOOSE] : re[t.HYPHENRANGE]\n  range = range.replace(hr, hyphenReplace)\n  debug('hyphen replace', range)\n  // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n  range = range.replace(re[t.COMPARATORTRIM], comparatorTrimReplace)\n  debug('comparator trim', range, re[t.COMPARATORTRIM])\n\n  // `~ 1.2.3` => `~1.2.3`\n  range = range.replace(re[t.TILDETRIM], tildeTrimReplace)\n\n  // `^ 1.2.3` => `^1.2.3`\n  range = range.replace(re[t.CARETTRIM], caretTrimReplace)\n\n  // normalize spaces\n  range = range.split(/\\s+/).join(' ')\n\n  // At this point, the range is completely trimmed and\n  // ready to be split into comparators.\n\n  var compRe = loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n  var set = range.split(' ').map(function (comp) {\n    return parseComparator(comp, this.options)\n  }, this).join(' ').split(/\\s+/)\n  if (this.options.loose) {\n    // in loose mode, throw out any that are not valid comparators\n    set = set.filter(function (comp) {\n      return !!comp.match(compRe)\n    })\n  }\n  set = set.map(function (comp) {\n    return new Comparator(comp, this.options)\n  }, this)\n\n  return set\n}\n\nRange.prototype.intersects = function (range, options) {\n  if (!(range instanceof Range)) {\n    throw new TypeError('a Range is required')\n  }\n\n  return this.set.some(function (thisComparators) {\n    return (\n      isSatisfiable(thisComparators, options) &&\n      range.set.some(function (rangeComparators) {\n        return (\n          isSatisfiable(rangeComparators, options) &&\n          thisComparators.every(function (thisComparator) {\n            return rangeComparators.every(function (rangeComparator) {\n              return thisComparator.intersects(rangeComparator, options)\n            })\n          })\n        )\n      })\n    )\n  })\n}\n\n// take a set of comparators and determine whether there\n// exists a version which can satisfy it\nfunction isSatisfiable (comparators, options) {\n  var result = true\n  var remainingComparators = comparators.slice()\n  var testComparator = remainingComparators.pop()\n\n  while (result && remainingComparators.length) {\n    result = remainingComparators.every(function (otherComparator) {\n      return testComparator.intersects(otherComparator, options)\n    })\n\n    testComparator = remainingComparators.pop()\n  }\n\n  return result\n}\n\n// Mostly just for testing and legacy API reasons\nexports.toComparators = toComparators\nfunction toComparators (range, options) {\n  return new Range(range, options).set.map(function (comp) {\n    return comp.map(function (c) {\n      return c.value\n    }).join(' ').trim().split(' ')\n  })\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nfunction parseComparator (comp, options) {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nfunction isX (id) {\n  return !id || id.toLowerCase() === 'x' || id === '*'\n}\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0\nfunction replaceTildes (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceTilde(comp, options)\n  }).join(' ')\n}\n\nfunction replaceTilde (comp, options) {\n  var r = options.loose ? re[t.TILDELOOSE] : re[t.TILDE]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('tilde', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0\n      ret = '>=' + M + '.' + m + '.' + p +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0\n// ^1.2.3 --> >=1.2.3 <2.0.0\n// ^1.2.0 --> >=1.2.0 <2.0.0\nfunction replaceCarets (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceCaret(comp, options)\n  }).join(' ')\n}\n\nfunction replaceCaret (comp, options) {\n  debug('caret', comp, options)\n  var r = options.loose ? re[t.CARETLOOSE] : re[t.CARET]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('caret', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n      } else {\n        ret = '>=' + M + '.' + m + '.0 <' + (+M + 1) + '.0.0'\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nfunction replaceXRanges (comp, options) {\n  debug('replaceXRanges', comp, options)\n  return comp.split(/\\s+/).map(function (comp) {\n    return replaceXRange(comp, options)\n  }).join(' ')\n}\n\nfunction replaceXRange (comp, options) {\n  comp = comp.trim()\n  var r = options.loose ? re[t.XRANGELOOSE] : re[t.XRANGE]\n  return comp.replace(r, function (ret, gtlt, M, m, p, pr) {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    var xM = isX(M)\n    var xm = xM || isX(m)\n    var xp = xm || isX(p)\n    var anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    // if we're including prereleases in the match, then we need\n    // to fix this to -0, the lowest possible prerelease value\n    pr = options.includePrerelease ? '-0' : ''\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0-0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        // >1.2.3 => >= 1.2.4\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      ret = gtlt + M + '.' + m + '.' + p + pr\n    } else if (xm) {\n      ret = '>=' + M + '.0.0' + pr + ' <' + (+M + 1) + '.0.0' + pr\n    } else if (xp) {\n      ret = '>=' + M + '.' + m + '.0' + pr +\n        ' <' + M + '.' + (+m + 1) + '.0' + pr\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nfunction replaceStars (comp, options) {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp.trim().replace(re[t.STAR], '')\n}\n\n// This function is passed to string.replace(re[t.HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0\nfunction hyphenReplace ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr, tb) {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = '>=' + fM + '.0.0'\n  } else if (isX(fp)) {\n    from = '>=' + fM + '.' + fm + '.0'\n  } else {\n    from = '>=' + from\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = '<' + (+tM + 1) + '.0.0'\n  } else if (isX(tp)) {\n    to = '<' + tM + '.' + (+tm + 1) + '.0'\n  } else if (tpr) {\n    to = '<=' + tM + '.' + tm + '.' + tp + '-' + tpr\n  } else {\n    to = '<=' + to\n  }\n\n  return (from + ' ' + to).trim()\n}\n\n// if ANY of the sets match ALL of its comparators, then pass\nRange.prototype.test = function (version) {\n  if (!version) {\n    return false\n  }\n\n  if (typeof version === 'string') {\n    try {\n      version = new SemVer(version, this.options)\n    } catch (er) {\n      return false\n    }\n  }\n\n  for (var i = 0; i < this.set.length; i++) {\n    if (testSet(this.set[i], version, this.options)) {\n      return true\n    }\n  }\n  return false\n}\n\nfunction testSet (set, version, options) {\n  for (var i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        var allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n\nexports.satisfies = satisfies\nfunction satisfies (version, range, options) {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\n\nexports.maxSatisfying = maxSatisfying\nfunction maxSatisfying (versions, range, options) {\n  var max = null\n  var maxSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\n\nexports.minSatisfying = minSatisfying\nfunction minSatisfying (versions, range, options) {\n  var min = null\n  var minSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\n\nexports.minVersion = minVersion\nfunction minVersion (range, loose) {\n  range = new Range(range, loose)\n\n  var minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    comparators.forEach(function (comparator) {\n      // Clone to avoid manipulating the comparator's semver object.\n      var compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!minver || gt(minver, compver)) {\n            minver = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error('Unexpected operation: ' + comparator.operator)\n      }\n    })\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\n\nexports.validRange = validRange\nfunction validRange (range, options) {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\n\n// Determine if version is less than all the versions possible in the range\nexports.ltr = ltr\nfunction ltr (version, range, options) {\n  return outside(version, range, '<', options)\n}\n\n// Determine if version is greater than all the versions possible in the range.\nexports.gtr = gtr\nfunction gtr (version, range, options) {\n  return outside(version, range, '>', options)\n}\n\nexports.outside = outside\nfunction outside (version, range, hilo, options) {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  var gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisifes the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    var high = null\n    var low = null\n\n    comparators.forEach(function (comparator) {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nexports.prerelease = prerelease\nfunction prerelease (version, options) {\n  var parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\n\nexports.intersects = intersects\nfunction intersects (r1, r2, options) {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2)\n}\n\nexports.coerce = coerce\nfunction coerce (version, options) {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version === 'number') {\n    version = String(version)\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  options = options || {}\n\n  var match = null\n  if (!options.rtl) {\n    match = version.match(re[t.COERCE])\n  } else {\n    // Find the right-most coercible string that does not share\n    // a terminus with a more left-ward coercible string.\n    // Eg, '1.2.3.4' wants to coerce '2.3.4', not '3.4' or '4'\n    //\n    // Walk through the string checking with a /g regexp\n    // Manually set the index so as to pick up overlapping matches.\n    // Stop when we get a match that ends at the string end, since no\n    // coercible string can be more right-ward without the same terminus.\n    var next\n    while ((next = re[t.COERCERTL].exec(version)) &&\n      (!match || match.index + match[0].length !== version.length)\n    ) {\n      if (!match ||\n          next.index + next[0].length !== match.index + match[0].length) {\n        match = next\n      }\n      re[t.COERCERTL].lastIndex = next.index + next[1].length + next[2].length\n    }\n    // leave it in a clean state\n    re[t.COERCERTL].lastIndex = -1\n  }\n\n  if (match === null) {\n    return null\n  }\n\n  return parse(match[2] +\n    '.' + (match[3] || '0') +\n    '.' + (match[4] || '0'), options)\n}\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nexports.ErrorCodes = vscode_jsonrpc_1.ErrorCodes;\r\nexports.ResponseError = vscode_jsonrpc_1.ResponseError;\r\nexports.CancellationToken = vscode_jsonrpc_1.CancellationToken;\r\nexports.CancellationTokenSource = vscode_jsonrpc_1.CancellationTokenSource;\r\nexports.Disposable = vscode_jsonrpc_1.Disposable;\r\nexports.Event = vscode_jsonrpc_1.Event;\r\nexports.Emitter = vscode_jsonrpc_1.Emitter;\r\nexports.Trace = vscode_jsonrpc_1.Trace;\r\nexports.TraceFormat = vscode_jsonrpc_1.TraceFormat;\r\nexports.SetTraceNotification = vscode_jsonrpc_1.SetTraceNotification;\r\nexports.LogTraceNotification = vscode_jsonrpc_1.LogTraceNotification;\r\nexports.RequestType = vscode_jsonrpc_1.RequestType;\r\nexports.RequestType0 = vscode_jsonrpc_1.RequestType0;\r\nexports.NotificationType = vscode_jsonrpc_1.NotificationType;\r\nexports.NotificationType0 = vscode_jsonrpc_1.NotificationType0;\r\nexports.MessageReader = vscode_jsonrpc_1.MessageReader;\r\nexports.MessageWriter = vscode_jsonrpc_1.MessageWriter;\r\nexports.ConnectionStrategy = vscode_jsonrpc_1.ConnectionStrategy;\r\nexports.StreamMessageReader = vscode_jsonrpc_1.StreamMessageReader;\r\nexports.StreamMessageWriter = vscode_jsonrpc_1.StreamMessageWriter;\r\nexports.IPCMessageReader = vscode_jsonrpc_1.IPCMessageReader;\r\nexports.IPCMessageWriter = vscode_jsonrpc_1.IPCMessageWriter;\r\nexports.createClientPipeTransport = vscode_jsonrpc_1.createClientPipeTransport;\r\nexports.createServerPipeTransport = vscode_jsonrpc_1.createServerPipeTransport;\r\nexports.generateRandomPipeName = vscode_jsonrpc_1.generateRandomPipeName;\r\nexports.createClientSocketTransport = vscode_jsonrpc_1.createClientSocketTransport;\r\nexports.createServerSocketTransport = vscode_jsonrpc_1.createServerSocketTransport;\r\nexports.ProgressType = vscode_jsonrpc_1.ProgressType;\r\n__export(require(\"vscode-languageserver-types\"));\r\n__export(require(\"./protocol\"));\r\nconst callHierarchy = require(\"./protocol.callHierarchy.proposed\");\r\nconst st = require(\"./protocol.sematicTokens.proposed\");\r\nvar Proposed;\r\n(function (Proposed) {\r\n    let CallHierarchyPrepareRequest;\r\n    (function (CallHierarchyPrepareRequest) {\r\n        CallHierarchyPrepareRequest.method = callHierarchy.CallHierarchyPrepareRequest.method;\r\n        CallHierarchyPrepareRequest.type = callHierarchy.CallHierarchyPrepareRequest.type;\r\n    })(CallHierarchyPrepareRequest = Proposed.CallHierarchyPrepareRequest || (Proposed.CallHierarchyPrepareRequest = {}));\r\n    let CallHierarchyIncomingCallsRequest;\r\n    (function (CallHierarchyIncomingCallsRequest) {\r\n        CallHierarchyIncomingCallsRequest.method = callHierarchy.CallHierarchyIncomingCallsRequest.method;\r\n        CallHierarchyIncomingCallsRequest.type = callHierarchy.CallHierarchyIncomingCallsRequest.type;\r\n    })(CallHierarchyIncomingCallsRequest = Proposed.CallHierarchyIncomingCallsRequest || (Proposed.CallHierarchyIncomingCallsRequest = {}));\r\n    let CallHierarchyOutgoingCallsRequest;\r\n    (function (CallHierarchyOutgoingCallsRequest) {\r\n        CallHierarchyOutgoingCallsRequest.method = callHierarchy.CallHierarchyOutgoingCallsRequest.method;\r\n        CallHierarchyOutgoingCallsRequest.type = callHierarchy.CallHierarchyOutgoingCallsRequest.type;\r\n    })(CallHierarchyOutgoingCallsRequest = Proposed.CallHierarchyOutgoingCallsRequest || (Proposed.CallHierarchyOutgoingCallsRequest = {}));\r\n    Proposed.SemanticTokenTypes = st.SemanticTokenTypes;\r\n    Proposed.SemanticTokenModifiers = st.SemanticTokenModifiers;\r\n    Proposed.SemanticTokens = st.SemanticTokens;\r\n    let SemanticTokensRequest;\r\n    (function (SemanticTokensRequest) {\r\n        SemanticTokensRequest.method = st.SemanticTokensRequest.method;\r\n        SemanticTokensRequest.type = st.SemanticTokensRequest.type;\r\n    })(SemanticTokensRequest = Proposed.SemanticTokensRequest || (Proposed.SemanticTokensRequest = {}));\r\n    let SemanticTokensEditsRequest;\r\n    (function (SemanticTokensEditsRequest) {\r\n        SemanticTokensEditsRequest.method = st.SemanticTokensEditsRequest.method;\r\n        SemanticTokensEditsRequest.type = st.SemanticTokensEditsRequest.type;\r\n    })(SemanticTokensEditsRequest = Proposed.SemanticTokensEditsRequest || (Proposed.SemanticTokensEditsRequest = {}));\r\n    let SemanticTokensRangeRequest;\r\n    (function (SemanticTokensRangeRequest) {\r\n        SemanticTokensRangeRequest.method = st.SemanticTokensRangeRequest.method;\r\n        SemanticTokensRangeRequest.type = st.SemanticTokensRangeRequest.type;\r\n    })(SemanticTokensRangeRequest = Proposed.SemanticTokensRangeRequest || (Proposed.SemanticTokensRangeRequest = {}));\r\n})(Proposed = exports.Proposed || (exports.Proposed = {}));\r\nfunction createProtocolConnection(reader, writer, logger, strategy) {\r\n    return vscode_jsonrpc_1.createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createProtocolConnection = createProtocolConnection;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nclass ProtocolRequestType0 extends vscode_jsonrpc_1.RequestType0 {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolRequestType0 = ProtocolRequestType0;\r\nclass ProtocolRequestType extends vscode_jsonrpc_1.RequestType {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolRequestType = ProtocolRequestType;\r\nclass ProtocolNotificationType extends vscode_jsonrpc_1.NotificationType {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolNotificationType = ProtocolNotificationType;\r\nclass ProtocolNotificationType0 extends vscode_jsonrpc_1.NotificationType0 {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolNotificationType0 = ProtocolNotificationType0;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) TypeFox and others. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A request to result a `CallHierarchyItem` in a document at a given position.\r\n * Can be used as an input to a incoming or outgoing call hierarchy.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar CallHierarchyPrepareRequest;\r\n(function (CallHierarchyPrepareRequest) {\r\n    CallHierarchyPrepareRequest.method = 'textDocument/prepareCallHierarchy';\r\n    CallHierarchyPrepareRequest.type = new messages_1.ProtocolRequestType(CallHierarchyPrepareRequest.method);\r\n})(CallHierarchyPrepareRequest = exports.CallHierarchyPrepareRequest || (exports.CallHierarchyPrepareRequest = {}));\r\n/**\r\n * A request to resolve the incoming calls for a given `CallHierarchyItem`.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar CallHierarchyIncomingCallsRequest;\r\n(function (CallHierarchyIncomingCallsRequest) {\r\n    CallHierarchyIncomingCallsRequest.method = 'callHierarchy/incomingCalls';\r\n    CallHierarchyIncomingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyIncomingCallsRequest.method);\r\n})(CallHierarchyIncomingCallsRequest = exports.CallHierarchyIncomingCallsRequest || (exports.CallHierarchyIncomingCallsRequest = {}));\r\n/**\r\n * A request to resolve the outgoing calls for a given `CallHierarchyItem`.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar CallHierarchyOutgoingCallsRequest;\r\n(function (CallHierarchyOutgoingCallsRequest) {\r\n    CallHierarchyOutgoingCallsRequest.method = 'callHierarchy/outgoingCalls';\r\n    CallHierarchyOutgoingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyOutgoingCallsRequest.method);\r\n})(CallHierarchyOutgoingCallsRequest = exports.CallHierarchyOutgoingCallsRequest || (exports.CallHierarchyOutgoingCallsRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A request to list all color symbols found in a given text document. The request's\r\n * parameter is of type [DocumentColorParams](#DocumentColorParams) the\r\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar DocumentColorRequest;\r\n(function (DocumentColorRequest) {\r\n    DocumentColorRequest.method = 'textDocument/documentColor';\r\n    DocumentColorRequest.type = new messages_1.ProtocolRequestType(DocumentColorRequest.method);\r\n    /** @deprecated Use DocumentColorRequest.type */\r\n    DocumentColorRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentColorRequest = exports.DocumentColorRequest || (exports.DocumentColorRequest = {}));\r\n/**\r\n * A request to list all presentation for a color. The request's\r\n * parameter is of type [ColorPresentationParams](#ColorPresentationParams) the\r\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar ColorPresentationRequest;\r\n(function (ColorPresentationRequest) {\r\n    ColorPresentationRequest.type = new messages_1.ProtocolRequestType('textDocument/colorPresentation');\r\n})(ColorPresentationRequest = exports.ColorPresentationRequest || (exports.ColorPresentationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * The 'workspace/configuration' request is sent from the server to the client to fetch a certain\r\n * configuration setting.\r\n *\r\n * This pull model replaces the old push model were the client signaled configuration change via an\r\n * event. If the server still needs to react to configuration changes (since the server caches the\r\n * result of `workspace/configuration` requests) the server should register for an empty configuration\r\n * change event and empty the cache if such an event is received.\r\n */\r\nvar ConfigurationRequest;\r\n(function (ConfigurationRequest) {\r\n    ConfigurationRequest.type = new messages_1.ProtocolRequestType('workspace/configuration');\r\n})(ConfigurationRequest = exports.ConfigurationRequest || (exports.ConfigurationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the type definition locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Declaration](#Declaration)\r\n * or a typed array of [DeclarationLink](#DeclarationLink) or a Thenable that resolves\r\n * to such.\r\n */\r\nvar DeclarationRequest;\r\n(function (DeclarationRequest) {\r\n    DeclarationRequest.method = 'textDocument/declaration';\r\n    DeclarationRequest.type = new messages_1.ProtocolRequestType(DeclarationRequest.method);\r\n    /** @deprecated Use DeclarationRequest.type */\r\n    DeclarationRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DeclarationRequest = exports.DeclarationRequest || (exports.DeclarationRequest = {}));\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * Enum of known range kinds\r\n */\r\nvar FoldingRangeKind;\r\n(function (FoldingRangeKind) {\r\n    /**\r\n     * Folding range for a comment\r\n     */\r\n    FoldingRangeKind[\"Comment\"] = \"comment\";\r\n    /**\r\n     * Folding range for a imports or includes\r\n     */\r\n    FoldingRangeKind[\"Imports\"] = \"imports\";\r\n    /**\r\n     * Folding range for a region (e.g. `#region`)\r\n     */\r\n    FoldingRangeKind[\"Region\"] = \"region\";\r\n})(FoldingRangeKind = exports.FoldingRangeKind || (exports.FoldingRangeKind = {}));\r\n/**\r\n * A request to provide folding ranges in a document. The request's\r\n * parameter is of type [FoldingRangeParams](#FoldingRangeParams), the\r\n * response is of type [FoldingRangeList](#FoldingRangeList) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar FoldingRangeRequest;\r\n(function (FoldingRangeRequest) {\r\n    FoldingRangeRequest.method = 'textDocument/foldingRange';\r\n    FoldingRangeRequest.type = new messages_1.ProtocolRequestType(FoldingRangeRequest.method);\r\n    /** @deprecated Use FoldingRangeRequest.type */\r\n    FoldingRangeRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(FoldingRangeRequest = exports.FoldingRangeRequest || (exports.FoldingRangeRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the implementation locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\r\n * Thenable that resolves to such.\r\n */\r\nvar ImplementationRequest;\r\n(function (ImplementationRequest) {\r\n    ImplementationRequest.method = 'textDocument/implementation';\r\n    ImplementationRequest.type = new messages_1.ProtocolRequestType(ImplementationRequest.method);\r\n    /** @deprecated Use ImplementationRequest.type */\r\n    ImplementationRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(ImplementationRequest = exports.ImplementationRequest || (exports.ImplementationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\nconst protocol_implementation_1 = require(\"./protocol.implementation\");\r\nexports.ImplementationRequest = protocol_implementation_1.ImplementationRequest;\r\nconst protocol_typeDefinition_1 = require(\"./protocol.typeDefinition\");\r\nexports.TypeDefinitionRequest = protocol_typeDefinition_1.TypeDefinitionRequest;\r\nconst protocol_workspaceFolders_1 = require(\"./protocol.workspaceFolders\");\r\nexports.WorkspaceFoldersRequest = protocol_workspaceFolders_1.WorkspaceFoldersRequest;\r\nexports.DidChangeWorkspaceFoldersNotification = protocol_workspaceFolders_1.DidChangeWorkspaceFoldersNotification;\r\nconst protocol_configuration_1 = require(\"./protocol.configuration\");\r\nexports.ConfigurationRequest = protocol_configuration_1.ConfigurationRequest;\r\nconst protocol_colorProvider_1 = require(\"./protocol.colorProvider\");\r\nexports.DocumentColorRequest = protocol_colorProvider_1.DocumentColorRequest;\r\nexports.ColorPresentationRequest = protocol_colorProvider_1.ColorPresentationRequest;\r\nconst protocol_foldingRange_1 = require(\"./protocol.foldingRange\");\r\nexports.FoldingRangeRequest = protocol_foldingRange_1.FoldingRangeRequest;\r\nconst protocol_declaration_1 = require(\"./protocol.declaration\");\r\nexports.DeclarationRequest = protocol_declaration_1.DeclarationRequest;\r\nconst protocol_selectionRange_1 = require(\"./protocol.selectionRange\");\r\nexports.SelectionRangeRequest = protocol_selectionRange_1.SelectionRangeRequest;\r\nconst protocol_progress_1 = require(\"./protocol.progress\");\r\nexports.WorkDoneProgress = protocol_progress_1.WorkDoneProgress;\r\nexports.WorkDoneProgressCreateRequest = protocol_progress_1.WorkDoneProgressCreateRequest;\r\nexports.WorkDoneProgressCancelNotification = protocol_progress_1.WorkDoneProgressCancelNotification;\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * The DocumentFilter namespace provides helper functions to work with\r\n * [DocumentFilter](#DocumentFilter) literals.\r\n */\r\nvar DocumentFilter;\r\n(function (DocumentFilter) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return Is.string(candidate.language) || Is.string(candidate.scheme) || Is.string(candidate.pattern);\r\n    }\r\n    DocumentFilter.is = is;\r\n})(DocumentFilter = exports.DocumentFilter || (exports.DocumentFilter = {}));\r\n/**\r\n * The DocumentSelector namespace provides helper functions to work with\r\n * [DocumentSelector](#DocumentSelector)s.\r\n */\r\nvar DocumentSelector;\r\n(function (DocumentSelector) {\r\n    function is(value) {\r\n        if (!Array.isArray(value)) {\r\n            return false;\r\n        }\r\n        for (let elem of value) {\r\n            if (!Is.string(elem) && !DocumentFilter.is(elem)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    DocumentSelector.is = is;\r\n})(DocumentSelector = exports.DocumentSelector || (exports.DocumentSelector = {}));\r\n/**\r\n * The `client/registerCapability` request is sent from the server to the client to register a new capability\r\n * handler on the client side.\r\n */\r\nvar RegistrationRequest;\r\n(function (RegistrationRequest) {\r\n    RegistrationRequest.type = new messages_1.ProtocolRequestType('client/registerCapability');\r\n})(RegistrationRequest = exports.RegistrationRequest || (exports.RegistrationRequest = {}));\r\n/**\r\n * The `client/unregisterCapability` request is sent from the server to the client to unregister a previously registered capability\r\n * handler on the client side.\r\n */\r\nvar UnregistrationRequest;\r\n(function (UnregistrationRequest) {\r\n    UnregistrationRequest.type = new messages_1.ProtocolRequestType('client/unregisterCapability');\r\n})(UnregistrationRequest = exports.UnregistrationRequest || (exports.UnregistrationRequest = {}));\r\nvar ResourceOperationKind;\r\n(function (ResourceOperationKind) {\r\n    /**\r\n     * Supports creating new files and folders.\r\n     */\r\n    ResourceOperationKind.Create = 'create';\r\n    /**\r\n     * Supports renaming existing files and folders.\r\n     */\r\n    ResourceOperationKind.Rename = 'rename';\r\n    /**\r\n     * Supports deleting existing files and folders.\r\n     */\r\n    ResourceOperationKind.Delete = 'delete';\r\n})(ResourceOperationKind = exports.ResourceOperationKind || (exports.ResourceOperationKind = {}));\r\nvar FailureHandlingKind;\r\n(function (FailureHandlingKind) {\r\n    /**\r\n     * Applying the workspace change is simply aborted if one of the changes provided\r\n     * fails. All operations executed before the failing operation stay executed.\r\n     */\r\n    FailureHandlingKind.Abort = 'abort';\r\n    /**\r\n     * All operations are executed transactional. That means they either all\r\n     * succeed or no changes at all are applied to the workspace.\r\n     */\r\n    FailureHandlingKind.Transactional = 'transactional';\r\n    /**\r\n     * If the workspace edit contains only textual file changes they are executed transactional.\r\n     * If resource changes (create, rename or delete file) are part of the change the failure\r\n     * handling startegy is abort.\r\n     */\r\n    FailureHandlingKind.TextOnlyTransactional = 'textOnlyTransactional';\r\n    /**\r\n     * The client tries to undo the operations already executed. But there is no\r\n     * guarantee that this is succeeding.\r\n     */\r\n    FailureHandlingKind.Undo = 'undo';\r\n})(FailureHandlingKind = exports.FailureHandlingKind || (exports.FailureHandlingKind = {}));\r\n/**\r\n * The StaticRegistrationOptions namespace provides helper functions to work with\r\n * [StaticRegistrationOptions](#StaticRegistrationOptions) literals.\r\n */\r\nvar StaticRegistrationOptions;\r\n(function (StaticRegistrationOptions) {\r\n    function hasId(value) {\r\n        const candidate = value;\r\n        return candidate && Is.string(candidate.id) && candidate.id.length > 0;\r\n    }\r\n    StaticRegistrationOptions.hasId = hasId;\r\n})(StaticRegistrationOptions = exports.StaticRegistrationOptions || (exports.StaticRegistrationOptions = {}));\r\n/**\r\n * The TextDocumentRegistrationOptions namespace provides helper functions to work with\r\n * [TextDocumentRegistrationOptions](#TextDocumentRegistrationOptions) literals.\r\n */\r\nvar TextDocumentRegistrationOptions;\r\n(function (TextDocumentRegistrationOptions) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return candidate && (candidate.documentSelector === null || DocumentSelector.is(candidate.documentSelector));\r\n    }\r\n    TextDocumentRegistrationOptions.is = is;\r\n})(TextDocumentRegistrationOptions = exports.TextDocumentRegistrationOptions || (exports.TextDocumentRegistrationOptions = {}));\r\n/**\r\n * The WorkDoneProgressOptions namespace provides helper functions to work with\r\n * [WorkDoneProgressOptions](#WorkDoneProgressOptions) literals.\r\n */\r\nvar WorkDoneProgressOptions;\r\n(function (WorkDoneProgressOptions) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return Is.objectLiteral(candidate) && (candidate.workDoneProgress === undefined || Is.boolean(candidate.workDoneProgress));\r\n    }\r\n    WorkDoneProgressOptions.is = is;\r\n    function hasWorkDoneProgress(value) {\r\n        const candidate = value;\r\n        return candidate && Is.boolean(candidate.workDoneProgress);\r\n    }\r\n    WorkDoneProgressOptions.hasWorkDoneProgress = hasWorkDoneProgress;\r\n})(WorkDoneProgressOptions = exports.WorkDoneProgressOptions || (exports.WorkDoneProgressOptions = {}));\r\n/**\r\n * The initialize request is sent from the client to the server.\r\n * It is sent once as the request after starting up the server.\r\n * The requests parameter is of type [InitializeParams](#InitializeParams)\r\n * the response if of type [InitializeResult](#InitializeResult) of a Thenable that\r\n * resolves to such.\r\n */\r\nvar InitializeRequest;\r\n(function (InitializeRequest) {\r\n    InitializeRequest.type = new messages_1.ProtocolRequestType('initialize');\r\n})(InitializeRequest = exports.InitializeRequest || (exports.InitializeRequest = {}));\r\n/**\r\n * Known error codes for an `InitializeError`;\r\n */\r\nvar InitializeError;\r\n(function (InitializeError) {\r\n    /**\r\n     * If the protocol version provided by the client can't be handled by the server.\r\n     * @deprecated This initialize error got replaced by client capabilities. There is\r\n     * no version handshake in version 3.0x\r\n     */\r\n    InitializeError.unknownProtocolVersion = 1;\r\n})(InitializeError = exports.InitializeError || (exports.InitializeError = {}));\r\n/**\r\n * The intialized notification is sent from the client to the\r\n * server after the client is fully initialized and the server\r\n * is allowed to send requests from the server to the client.\r\n */\r\nvar InitializedNotification;\r\n(function (InitializedNotification) {\r\n    InitializedNotification.type = new messages_1.ProtocolNotificationType('initialized');\r\n})(InitializedNotification = exports.InitializedNotification || (exports.InitializedNotification = {}));\r\n//---- Shutdown Method ----\r\n/**\r\n * A shutdown request is sent from the client to the server.\r\n * It is sent once when the client decides to shutdown the\r\n * server. The only notification that is sent after a shutdown request\r\n * is the exit event.\r\n */\r\nvar ShutdownRequest;\r\n(function (ShutdownRequest) {\r\n    ShutdownRequest.type = new messages_1.ProtocolRequestType0('shutdown');\r\n})(ShutdownRequest = exports.ShutdownRequest || (exports.ShutdownRequest = {}));\r\n//---- Exit Notification ----\r\n/**\r\n * The exit event is sent from the client to the server to\r\n * ask the server to exit its process.\r\n */\r\nvar ExitNotification;\r\n(function (ExitNotification) {\r\n    ExitNotification.type = new messages_1.ProtocolNotificationType0('exit');\r\n})(ExitNotification = exports.ExitNotification || (exports.ExitNotification = {}));\r\n/**\r\n * The configuration change notification is sent from the client to the server\r\n * when the client's configuration has changed. The notification contains\r\n * the changed configuration as defined by the language client.\r\n */\r\nvar DidChangeConfigurationNotification;\r\n(function (DidChangeConfigurationNotification) {\r\n    DidChangeConfigurationNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeConfiguration');\r\n})(DidChangeConfigurationNotification = exports.DidChangeConfigurationNotification || (exports.DidChangeConfigurationNotification = {}));\r\n//---- Message show and log notifications ----\r\n/**\r\n * The message type\r\n */\r\nvar MessageType;\r\n(function (MessageType) {\r\n    /**\r\n     * An error message.\r\n     */\r\n    MessageType.Error = 1;\r\n    /**\r\n     * A warning message.\r\n     */\r\n    MessageType.Warning = 2;\r\n    /**\r\n     * An information message.\r\n     */\r\n    MessageType.Info = 3;\r\n    /**\r\n     * A log message.\r\n     */\r\n    MessageType.Log = 4;\r\n})(MessageType = exports.MessageType || (exports.MessageType = {}));\r\n/**\r\n * The show message notification is sent from a server to a client to ask\r\n * the client to display a particular message in the user interface.\r\n */\r\nvar ShowMessageNotification;\r\n(function (ShowMessageNotification) {\r\n    ShowMessageNotification.type = new messages_1.ProtocolNotificationType('window/showMessage');\r\n})(ShowMessageNotification = exports.ShowMessageNotification || (exports.ShowMessageNotification = {}));\r\n/**\r\n * The show message request is sent from the server to the client to show a message\r\n * and a set of options actions to the user.\r\n */\r\nvar ShowMessageRequest;\r\n(function (ShowMessageRequest) {\r\n    ShowMessageRequest.type = new messages_1.ProtocolRequestType('window/showMessageRequest');\r\n})(ShowMessageRequest = exports.ShowMessageRequest || (exports.ShowMessageRequest = {}));\r\n/**\r\n * The log message notification is sent from the server to the client to ask\r\n * the client to log a particular message.\r\n */\r\nvar LogMessageNotification;\r\n(function (LogMessageNotification) {\r\n    LogMessageNotification.type = new messages_1.ProtocolNotificationType('window/logMessage');\r\n})(LogMessageNotification = exports.LogMessageNotification || (exports.LogMessageNotification = {}));\r\n//---- Telemetry notification\r\n/**\r\n * The telemetry event notification is sent from the server to the client to ask\r\n * the client to log telemetry data.\r\n */\r\nvar TelemetryEventNotification;\r\n(function (TelemetryEventNotification) {\r\n    TelemetryEventNotification.type = new messages_1.ProtocolNotificationType('telemetry/event');\r\n})(TelemetryEventNotification = exports.TelemetryEventNotification || (exports.TelemetryEventNotification = {}));\r\n/**\r\n * Defines how the host (editor) should sync\r\n * document changes to the language server.\r\n */\r\nvar TextDocumentSyncKind;\r\n(function (TextDocumentSyncKind) {\r\n    /**\r\n     * Documents should not be synced at all.\r\n     */\r\n    TextDocumentSyncKind.None = 0;\r\n    /**\r\n     * Documents are synced by always sending the full content\r\n     * of the document.\r\n     */\r\n    TextDocumentSyncKind.Full = 1;\r\n    /**\r\n     * Documents are synced by sending the full content on open.\r\n     * After that only incremental updates to the document are\r\n     * send.\r\n     */\r\n    TextDocumentSyncKind.Incremental = 2;\r\n})(TextDocumentSyncKind = exports.TextDocumentSyncKind || (exports.TextDocumentSyncKind = {}));\r\n/**\r\n * The document open notification is sent from the client to the server to signal\r\n * newly opened text documents. The document's truth is now managed by the client\r\n * and the server must not try to read the document's truth using the document's\r\n * uri. Open in this sense means it is managed by the client. It doesn't necessarily\r\n * mean that its content is presented in an editor. An open notification must not\r\n * be sent more than once without a corresponding close notification send before.\r\n * This means open and close notification must be balanced and the max open count\r\n * is one.\r\n */\r\nvar DidOpenTextDocumentNotification;\r\n(function (DidOpenTextDocumentNotification) {\r\n    DidOpenTextDocumentNotification.method = 'textDocument/didOpen';\r\n    DidOpenTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidOpenTextDocumentNotification.method);\r\n})(DidOpenTextDocumentNotification = exports.DidOpenTextDocumentNotification || (exports.DidOpenTextDocumentNotification = {}));\r\n/**\r\n * The document change notification is sent from the client to the server to signal\r\n * changes to a text document.\r\n */\r\nvar DidChangeTextDocumentNotification;\r\n(function (DidChangeTextDocumentNotification) {\r\n    DidChangeTextDocumentNotification.method = 'textDocument/didChange';\r\n    DidChangeTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidChangeTextDocumentNotification.method);\r\n})(DidChangeTextDocumentNotification = exports.DidChangeTextDocumentNotification || (exports.DidChangeTextDocumentNotification = {}));\r\n/**\r\n * The document close notification is sent from the client to the server when\r\n * the document got closed in the client. The document's truth now exists where\r\n * the document's uri points to (e.g. if the document's uri is a file uri the\r\n * truth now exists on disk). As with the open notification the close notification\r\n * is about managing the document's content. Receiving a close notification\r\n * doesn't mean that the document was open in an editor before. A close\r\n * notification requires a previous open notification to be sent.\r\n */\r\nvar DidCloseTextDocumentNotification;\r\n(function (DidCloseTextDocumentNotification) {\r\n    DidCloseTextDocumentNotification.method = 'textDocument/didClose';\r\n    DidCloseTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidCloseTextDocumentNotification.method);\r\n})(DidCloseTextDocumentNotification = exports.DidCloseTextDocumentNotification || (exports.DidCloseTextDocumentNotification = {}));\r\n/**\r\n * The document save notification is sent from the client to the server when\r\n * the document got saved in the client.\r\n */\r\nvar DidSaveTextDocumentNotification;\r\n(function (DidSaveTextDocumentNotification) {\r\n    DidSaveTextDocumentNotification.method = 'textDocument/didSave';\r\n    DidSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidSaveTextDocumentNotification.method);\r\n})(DidSaveTextDocumentNotification = exports.DidSaveTextDocumentNotification || (exports.DidSaveTextDocumentNotification = {}));\r\n/**\r\n * Represents reasons why a text document is saved.\r\n */\r\nvar TextDocumentSaveReason;\r\n(function (TextDocumentSaveReason) {\r\n    /**\r\n     * Manually triggered, e.g. by the user pressing save, by starting debugging,\r\n     * or by an API call.\r\n     */\r\n    TextDocumentSaveReason.Manual = 1;\r\n    /**\r\n     * Automatic after a delay.\r\n     */\r\n    TextDocumentSaveReason.AfterDelay = 2;\r\n    /**\r\n     * When the editor lost focus.\r\n     */\r\n    TextDocumentSaveReason.FocusOut = 3;\r\n})(TextDocumentSaveReason = exports.TextDocumentSaveReason || (exports.TextDocumentSaveReason = {}));\r\n/**\r\n * A document will save notification is sent from the client to the server before\r\n * the document is actually saved.\r\n */\r\nvar WillSaveTextDocumentNotification;\r\n(function (WillSaveTextDocumentNotification) {\r\n    WillSaveTextDocumentNotification.method = 'textDocument/willSave';\r\n    WillSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(WillSaveTextDocumentNotification.method);\r\n})(WillSaveTextDocumentNotification = exports.WillSaveTextDocumentNotification || (exports.WillSaveTextDocumentNotification = {}));\r\n/**\r\n * A document will save request is sent from the client to the server before\r\n * the document is actually saved. The request can return an array of TextEdits\r\n * which will be applied to the text document before it is saved. Please note that\r\n * clients might drop results if computing the text edits took too long or if a\r\n * server constantly fails on this request. This is done to keep the save fast and\r\n * reliable.\r\n */\r\nvar WillSaveTextDocumentWaitUntilRequest;\r\n(function (WillSaveTextDocumentWaitUntilRequest) {\r\n    WillSaveTextDocumentWaitUntilRequest.method = 'textDocument/willSaveWaitUntil';\r\n    WillSaveTextDocumentWaitUntilRequest.type = new messages_1.ProtocolRequestType(WillSaveTextDocumentWaitUntilRequest.method);\r\n})(WillSaveTextDocumentWaitUntilRequest = exports.WillSaveTextDocumentWaitUntilRequest || (exports.WillSaveTextDocumentWaitUntilRequest = {}));\r\n/**\r\n * The watched files notification is sent from the client to the server when\r\n * the client detects changes to file watched by the language client.\r\n */\r\nvar DidChangeWatchedFilesNotification;\r\n(function (DidChangeWatchedFilesNotification) {\r\n    DidChangeWatchedFilesNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeWatchedFiles');\r\n})(DidChangeWatchedFilesNotification = exports.DidChangeWatchedFilesNotification || (exports.DidChangeWatchedFilesNotification = {}));\r\n/**\r\n * The file event type\r\n */\r\nvar FileChangeType;\r\n(function (FileChangeType) {\r\n    /**\r\n     * The file got created.\r\n     */\r\n    FileChangeType.Created = 1;\r\n    /**\r\n     * The file got changed.\r\n     */\r\n    FileChangeType.Changed = 2;\r\n    /**\r\n     * The file got deleted.\r\n     */\r\n    FileChangeType.Deleted = 3;\r\n})(FileChangeType = exports.FileChangeType || (exports.FileChangeType = {}));\r\nvar WatchKind;\r\n(function (WatchKind) {\r\n    /**\r\n     * Interested in create events.\r\n     */\r\n    WatchKind.Create = 1;\r\n    /**\r\n     * Interested in change events\r\n     */\r\n    WatchKind.Change = 2;\r\n    /**\r\n     * Interested in delete events\r\n     */\r\n    WatchKind.Delete = 4;\r\n})(WatchKind = exports.WatchKind || (exports.WatchKind = {}));\r\n/**\r\n * Diagnostics notification are sent from the server to the client to signal\r\n * results of validation runs.\r\n */\r\nvar PublishDiagnosticsNotification;\r\n(function (PublishDiagnosticsNotification) {\r\n    PublishDiagnosticsNotification.type = new messages_1.ProtocolNotificationType('textDocument/publishDiagnostics');\r\n})(PublishDiagnosticsNotification = exports.PublishDiagnosticsNotification || (exports.PublishDiagnosticsNotification = {}));\r\n/**\r\n * How a completion was triggered\r\n */\r\nvar CompletionTriggerKind;\r\n(function (CompletionTriggerKind) {\r\n    /**\r\n     * Completion was triggered by typing an identifier (24x7 code\r\n     * complete), manual invocation (e.g Ctrl+Space) or via API.\r\n     */\r\n    CompletionTriggerKind.Invoked = 1;\r\n    /**\r\n     * Completion was triggered by a trigger character specified by\r\n     * the `triggerCharacters` properties of the `CompletionRegistrationOptions`.\r\n     */\r\n    CompletionTriggerKind.TriggerCharacter = 2;\r\n    /**\r\n     * Completion was re-triggered as current completion list is incomplete\r\n     */\r\n    CompletionTriggerKind.TriggerForIncompleteCompletions = 3;\r\n})(CompletionTriggerKind = exports.CompletionTriggerKind || (exports.CompletionTriggerKind = {}));\r\n/**\r\n * Request to request completion at a given text document position. The request's\r\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response\r\n * is of type [CompletionItem[]](#CompletionItem) or [CompletionList](#CompletionList)\r\n * or a Thenable that resolves to such.\r\n *\r\n * The request can delay the computation of the [`detail`](#CompletionItem.detail)\r\n * and [`documentation`](#CompletionItem.documentation) properties to the `completionItem/resolve`\r\n * request. However, properties that are needed for the initial sorting and filtering, like `sortText`,\r\n * `filterText`, `insertText`, and `textEdit`, must not be changed during resolve.\r\n */\r\nvar CompletionRequest;\r\n(function (CompletionRequest) {\r\n    CompletionRequest.method = 'textDocument/completion';\r\n    CompletionRequest.type = new messages_1.ProtocolRequestType(CompletionRequest.method);\r\n    /** @deprecated Use CompletionRequest.type */\r\n    CompletionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(CompletionRequest = exports.CompletionRequest || (exports.CompletionRequest = {}));\r\n/**\r\n * Request to resolve additional information for a given completion item.The request's\r\n * parameter is of type [CompletionItem](#CompletionItem) the response\r\n * is of type [CompletionItem](#CompletionItem) or a Thenable that resolves to such.\r\n */\r\nvar CompletionResolveRequest;\r\n(function (CompletionResolveRequest) {\r\n    CompletionResolveRequest.method = 'completionItem/resolve';\r\n    CompletionResolveRequest.type = new messages_1.ProtocolRequestType(CompletionResolveRequest.method);\r\n})(CompletionResolveRequest = exports.CompletionResolveRequest || (exports.CompletionResolveRequest = {}));\r\n/**\r\n * Request to request hover information at a given text document position. The request's\r\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response is of\r\n * type [Hover](#Hover) or a Thenable that resolves to such.\r\n */\r\nvar HoverRequest;\r\n(function (HoverRequest) {\r\n    HoverRequest.method = 'textDocument/hover';\r\n    HoverRequest.type = new messages_1.ProtocolRequestType(HoverRequest.method);\r\n})(HoverRequest = exports.HoverRequest || (exports.HoverRequest = {}));\r\n/**\r\n * How a signature help was triggered.\r\n *\r\n * @since 3.15.0\r\n */\r\nvar SignatureHelpTriggerKind;\r\n(function (SignatureHelpTriggerKind) {\r\n    /**\r\n     * Signature help was invoked manually by the user or by a command.\r\n     */\r\n    SignatureHelpTriggerKind.Invoked = 1;\r\n    /**\r\n     * Signature help was triggered by a trigger character.\r\n     */\r\n    SignatureHelpTriggerKind.TriggerCharacter = 2;\r\n    /**\r\n     * Signature help was triggered by the cursor moving or by the document content changing.\r\n     */\r\n    SignatureHelpTriggerKind.ContentChange = 3;\r\n})(SignatureHelpTriggerKind = exports.SignatureHelpTriggerKind || (exports.SignatureHelpTriggerKind = {}));\r\nvar SignatureHelpRequest;\r\n(function (SignatureHelpRequest) {\r\n    SignatureHelpRequest.method = 'textDocument/signatureHelp';\r\n    SignatureHelpRequest.type = new messages_1.ProtocolRequestType(SignatureHelpRequest.method);\r\n})(SignatureHelpRequest = exports.SignatureHelpRequest || (exports.SignatureHelpRequest = {}));\r\n/**\r\n * A request to resolve the definition location of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPosition]\r\n * (#TextDocumentPosition) the response is of either type [Definition](#Definition)\r\n * or a typed array of [DefinitionLink](#DefinitionLink) or a Thenable that resolves\r\n * to such.\r\n */\r\nvar DefinitionRequest;\r\n(function (DefinitionRequest) {\r\n    DefinitionRequest.method = 'textDocument/definition';\r\n    DefinitionRequest.type = new messages_1.ProtocolRequestType(DefinitionRequest.method);\r\n    /** @deprecated Use DefinitionRequest.type */\r\n    DefinitionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DefinitionRequest = exports.DefinitionRequest || (exports.DefinitionRequest = {}));\r\n/**\r\n * A request to resolve project-wide references for the symbol denoted\r\n * by the given text document position. The request's parameter is of\r\n * type [ReferenceParams](#ReferenceParams) the response is of type\r\n * [Location[]](#Location) or a Thenable that resolves to such.\r\n */\r\nvar ReferencesRequest;\r\n(function (ReferencesRequest) {\r\n    ReferencesRequest.method = 'textDocument/references';\r\n    ReferencesRequest.type = new messages_1.ProtocolRequestType(ReferencesRequest.method);\r\n    /** @deprecated Use ReferencesRequest.type */\r\n    ReferencesRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(ReferencesRequest = exports.ReferencesRequest || (exports.ReferencesRequest = {}));\r\n/**\r\n * Request to resolve a [DocumentHighlight](#DocumentHighlight) for a given\r\n * text document position. The request's parameter is of type [TextDocumentPosition]\r\n * (#TextDocumentPosition) the request response is of type [DocumentHighlight[]]\r\n * (#DocumentHighlight) or a Thenable that resolves to such.\r\n */\r\nvar DocumentHighlightRequest;\r\n(function (DocumentHighlightRequest) {\r\n    DocumentHighlightRequest.method = 'textDocument/documentHighlight';\r\n    DocumentHighlightRequest.type = new messages_1.ProtocolRequestType(DocumentHighlightRequest.method);\r\n    /** @deprecated Use DocumentHighlightRequest.type */\r\n    DocumentHighlightRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentHighlightRequest = exports.DocumentHighlightRequest || (exports.DocumentHighlightRequest = {}));\r\n/**\r\n * A request to list all symbols found in a given text document. The request's\r\n * parameter is of type [TextDocumentIdentifier](#TextDocumentIdentifier) the\r\n * response is of type [SymbolInformation[]](#SymbolInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar DocumentSymbolRequest;\r\n(function (DocumentSymbolRequest) {\r\n    DocumentSymbolRequest.method = 'textDocument/documentSymbol';\r\n    DocumentSymbolRequest.type = new messages_1.ProtocolRequestType(DocumentSymbolRequest.method);\r\n    /** @deprecated Use DocumentSymbolRequest.type */\r\n    DocumentSymbolRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentSymbolRequest = exports.DocumentSymbolRequest || (exports.DocumentSymbolRequest = {}));\r\n/**\r\n * A request to provide commands for the given text document and range.\r\n */\r\nvar CodeActionRequest;\r\n(function (CodeActionRequest) {\r\n    CodeActionRequest.method = 'textDocument/codeAction';\r\n    CodeActionRequest.type = new messages_1.ProtocolRequestType(CodeActionRequest.method);\r\n    /** @deprecated Use CodeActionRequest.type */\r\n    CodeActionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(CodeActionRequest = exports.CodeActionRequest || (exports.CodeActionRequest = {}));\r\n/**\r\n * A request to list project-wide symbols matching the query string given\r\n * by the [WorkspaceSymbolParams](#WorkspaceSymbolParams). The response is\r\n * of type [SymbolInformation[]](#SymbolInformation) or a Thenable that\r\n * resolves to such.\r\n */\r\nvar WorkspaceSymbolRequest;\r\n(function (WorkspaceSymbolRequest) {\r\n    WorkspaceSymbolRequest.method = 'workspace/symbol';\r\n    WorkspaceSymbolRequest.type = new messages_1.ProtocolRequestType(WorkspaceSymbolRequest.method);\r\n    /** @deprecated Use WorkspaceSymbolRequest.type */\r\n    WorkspaceSymbolRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(WorkspaceSymbolRequest = exports.WorkspaceSymbolRequest || (exports.WorkspaceSymbolRequest = {}));\r\n/**\r\n * A request to provide code lens for the given text document.\r\n */\r\nvar CodeLensRequest;\r\n(function (CodeLensRequest) {\r\n    CodeLensRequest.type = new messages_1.ProtocolRequestType('textDocument/codeLens');\r\n    /** @deprecated Use CodeLensRequest.type */\r\n    CodeLensRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(CodeLensRequest = exports.CodeLensRequest || (exports.CodeLensRequest = {}));\r\n/**\r\n * A request to resolve a command for a given code lens.\r\n */\r\nvar CodeLensResolveRequest;\r\n(function (CodeLensResolveRequest) {\r\n    CodeLensResolveRequest.type = new messages_1.ProtocolRequestType('codeLens/resolve');\r\n})(CodeLensResolveRequest = exports.CodeLensResolveRequest || (exports.CodeLensResolveRequest = {}));\r\n/**\r\n * A request to provide document links\r\n */\r\nvar DocumentLinkRequest;\r\n(function (DocumentLinkRequest) {\r\n    DocumentLinkRequest.method = 'textDocument/documentLink';\r\n    DocumentLinkRequest.type = new messages_1.ProtocolRequestType(DocumentLinkRequest.method);\r\n    /** @deprecated Use DocumentLinkRequest.type */\r\n    DocumentLinkRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentLinkRequest = exports.DocumentLinkRequest || (exports.DocumentLinkRequest = {}));\r\n/**\r\n * Request to resolve additional information for a given document link. The request's\r\n * parameter is of type [DocumentLink](#DocumentLink) the response\r\n * is of type [DocumentLink](#DocumentLink) or a Thenable that resolves to such.\r\n */\r\nvar DocumentLinkResolveRequest;\r\n(function (DocumentLinkResolveRequest) {\r\n    DocumentLinkResolveRequest.type = new messages_1.ProtocolRequestType('documentLink/resolve');\r\n})(DocumentLinkResolveRequest = exports.DocumentLinkResolveRequest || (exports.DocumentLinkResolveRequest = {}));\r\n/**\r\n * A request to to format a whole document.\r\n */\r\nvar DocumentFormattingRequest;\r\n(function (DocumentFormattingRequest) {\r\n    DocumentFormattingRequest.method = 'textDocument/formatting';\r\n    DocumentFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentFormattingRequest.method);\r\n})(DocumentFormattingRequest = exports.DocumentFormattingRequest || (exports.DocumentFormattingRequest = {}));\r\n/**\r\n * A request to to format a range in a document.\r\n */\r\nvar DocumentRangeFormattingRequest;\r\n(function (DocumentRangeFormattingRequest) {\r\n    DocumentRangeFormattingRequest.method = 'textDocument/rangeFormatting';\r\n    DocumentRangeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentRangeFormattingRequest.method);\r\n})(DocumentRangeFormattingRequest = exports.DocumentRangeFormattingRequest || (exports.DocumentRangeFormattingRequest = {}));\r\n/**\r\n * A request to format a document on type.\r\n */\r\nvar DocumentOnTypeFormattingRequest;\r\n(function (DocumentOnTypeFormattingRequest) {\r\n    DocumentOnTypeFormattingRequest.method = 'textDocument/onTypeFormatting';\r\n    DocumentOnTypeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentOnTypeFormattingRequest.method);\r\n})(DocumentOnTypeFormattingRequest = exports.DocumentOnTypeFormattingRequest || (exports.DocumentOnTypeFormattingRequest = {}));\r\n/**\r\n * A request to rename a symbol.\r\n */\r\nvar RenameRequest;\r\n(function (RenameRequest) {\r\n    RenameRequest.method = 'textDocument/rename';\r\n    RenameRequest.type = new messages_1.ProtocolRequestType(RenameRequest.method);\r\n})(RenameRequest = exports.RenameRequest || (exports.RenameRequest = {}));\r\n/**\r\n * A request to test and perform the setup necessary for a rename.\r\n */\r\nvar PrepareRenameRequest;\r\n(function (PrepareRenameRequest) {\r\n    PrepareRenameRequest.method = 'textDocument/prepareRename';\r\n    PrepareRenameRequest.type = new messages_1.ProtocolRequestType(PrepareRenameRequest.method);\r\n})(PrepareRenameRequest = exports.PrepareRenameRequest || (exports.PrepareRenameRequest = {}));\r\n/**\r\n * A request send from the client to the server to execute a command. The request might return\r\n * a workspace edit which the client will apply to the workspace.\r\n */\r\nvar ExecuteCommandRequest;\r\n(function (ExecuteCommandRequest) {\r\n    ExecuteCommandRequest.type = new messages_1.ProtocolRequestType('workspace/executeCommand');\r\n})(ExecuteCommandRequest = exports.ExecuteCommandRequest || (exports.ExecuteCommandRequest = {}));\r\n/**\r\n * A request sent from the server to the client to modified certain resources.\r\n */\r\nvar ApplyWorkspaceEditRequest;\r\n(function (ApplyWorkspaceEditRequest) {\r\n    ApplyWorkspaceEditRequest.type = new messages_1.ProtocolRequestType('workspace/applyEdit');\r\n})(ApplyWorkspaceEditRequest = exports.ApplyWorkspaceEditRequest || (exports.ApplyWorkspaceEditRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\nvar WorkDoneProgress;\r\n(function (WorkDoneProgress) {\r\n    WorkDoneProgress.type = new vscode_jsonrpc_1.ProgressType();\r\n})(WorkDoneProgress = exports.WorkDoneProgress || (exports.WorkDoneProgress = {}));\r\n/**\r\n * The `window/workDoneProgress/create` request is sent from the server to the client to initiate progress\r\n * reporting from the server.\r\n */\r\nvar WorkDoneProgressCreateRequest;\r\n(function (WorkDoneProgressCreateRequest) {\r\n    WorkDoneProgressCreateRequest.type = new messages_1.ProtocolRequestType('window/workDoneProgress/create');\r\n})(WorkDoneProgressCreateRequest = exports.WorkDoneProgressCreateRequest || (exports.WorkDoneProgressCreateRequest = {}));\r\n/**\r\n * The `window/workDoneProgress/cancel` notification is sent from  the client to the server to cancel a progress\r\n * initiated on the server side.\r\n */\r\nvar WorkDoneProgressCancelNotification;\r\n(function (WorkDoneProgressCancelNotification) {\r\n    WorkDoneProgressCancelNotification.type = new messages_1.ProtocolNotificationType('window/workDoneProgress/cancel');\r\n})(WorkDoneProgressCancelNotification = exports.WorkDoneProgressCancelNotification || (exports.WorkDoneProgressCancelNotification = {}));\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A request to provide selection ranges in a document. The request's\r\n * parameter is of type [SelectionRangeParams](#SelectionRangeParams), the\r\n * response is of type [SelectionRange[]](#SelectionRange[]) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar SelectionRangeRequest;\r\n(function (SelectionRangeRequest) {\r\n    SelectionRangeRequest.method = 'textDocument/selectionRange';\r\n    SelectionRangeRequest.type = new messages_1.ProtocolRequestType(SelectionRangeRequest.method);\r\n    /** @deprecated  Use SelectionRangeRequest.type */\r\n    SelectionRangeRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(SelectionRangeRequest = exports.SelectionRangeRequest || (exports.SelectionRangeRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A set of predefined token types. This set is not fixed\r\n * an clients can specify additional token types via the\r\n * corresponding client capabilities.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokenTypes;\r\n(function (SemanticTokenTypes) {\r\n    SemanticTokenTypes[\"comment\"] = \"comment\";\r\n    SemanticTokenTypes[\"keyword\"] = \"keyword\";\r\n    SemanticTokenTypes[\"string\"] = \"string\";\r\n    SemanticTokenTypes[\"number\"] = \"number\";\r\n    SemanticTokenTypes[\"regexp\"] = \"regexp\";\r\n    SemanticTokenTypes[\"operator\"] = \"operator\";\r\n    SemanticTokenTypes[\"namespace\"] = \"namespace\";\r\n    SemanticTokenTypes[\"type\"] = \"type\";\r\n    SemanticTokenTypes[\"struct\"] = \"struct\";\r\n    SemanticTokenTypes[\"class\"] = \"class\";\r\n    SemanticTokenTypes[\"interface\"] = \"interface\";\r\n    SemanticTokenTypes[\"enum\"] = \"enum\";\r\n    SemanticTokenTypes[\"typeParameter\"] = \"typeParameter\";\r\n    SemanticTokenTypes[\"function\"] = \"function\";\r\n    SemanticTokenTypes[\"member\"] = \"member\";\r\n    SemanticTokenTypes[\"property\"] = \"property\";\r\n    SemanticTokenTypes[\"macro\"] = \"macro\";\r\n    SemanticTokenTypes[\"variable\"] = \"variable\";\r\n    SemanticTokenTypes[\"parameter\"] = \"parameter\";\r\n    SemanticTokenTypes[\"label\"] = \"label\";\r\n})(SemanticTokenTypes = exports.SemanticTokenTypes || (exports.SemanticTokenTypes = {}));\r\n/**\r\n * A set of predefined token modifiers. This set is not fixed\r\n * an clients can specify additional token types via the\r\n * corresponding client capabilities.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokenModifiers;\r\n(function (SemanticTokenModifiers) {\r\n    SemanticTokenModifiers[\"documentation\"] = \"documentation\";\r\n    SemanticTokenModifiers[\"declaration\"] = \"declaration\";\r\n    SemanticTokenModifiers[\"definition\"] = \"definition\";\r\n    SemanticTokenModifiers[\"reference\"] = \"reference\";\r\n    SemanticTokenModifiers[\"static\"] = \"static\";\r\n    SemanticTokenModifiers[\"abstract\"] = \"abstract\";\r\n    SemanticTokenModifiers[\"deprecated\"] = \"deprecated\";\r\n    SemanticTokenModifiers[\"async\"] = \"async\";\r\n    SemanticTokenModifiers[\"volatile\"] = \"volatile\";\r\n    SemanticTokenModifiers[\"readonly\"] = \"readonly\";\r\n})(SemanticTokenModifiers = exports.SemanticTokenModifiers || (exports.SemanticTokenModifiers = {}));\r\n/**\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokens;\r\n(function (SemanticTokens) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return candidate !== undefined && (candidate.resultId === undefined || typeof candidate.resultId === 'string') &&\r\n            Array.isArray(candidate.data) && (candidate.data.length === 0 || typeof candidate.data[0] === 'number');\r\n    }\r\n    SemanticTokens.is = is;\r\n})(SemanticTokens = exports.SemanticTokens || (exports.SemanticTokens = {}));\r\n/**\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokensRequest;\r\n(function (SemanticTokensRequest) {\r\n    SemanticTokensRequest.method = 'textDocument/semanticTokens';\r\n    SemanticTokensRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRequest.method);\r\n})(SemanticTokensRequest = exports.SemanticTokensRequest || (exports.SemanticTokensRequest = {}));\r\n/**\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokensEditsRequest;\r\n(function (SemanticTokensEditsRequest) {\r\n    SemanticTokensEditsRequest.method = 'textDocument/semanticTokens/edits';\r\n    SemanticTokensEditsRequest.type = new messages_1.ProtocolRequestType(SemanticTokensEditsRequest.method);\r\n})(SemanticTokensEditsRequest = exports.SemanticTokensEditsRequest || (exports.SemanticTokensEditsRequest = {}));\r\n/**\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokensRangeRequest;\r\n(function (SemanticTokensRangeRequest) {\r\n    SemanticTokensRangeRequest.method = 'textDocument/semanticTokens/range';\r\n    SemanticTokensRangeRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRangeRequest.method);\r\n})(SemanticTokensRangeRequest = exports.SemanticTokensRangeRequest || (exports.SemanticTokensRangeRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the type definition locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\r\n * Thenable that resolves to such.\r\n */\r\nvar TypeDefinitionRequest;\r\n(function (TypeDefinitionRequest) {\r\n    TypeDefinitionRequest.method = 'textDocument/typeDefinition';\r\n    TypeDefinitionRequest.type = new messages_1.ProtocolRequestType(TypeDefinitionRequest.method);\r\n    /** @deprecated Use TypeDefinitionRequest.type */\r\n    TypeDefinitionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(TypeDefinitionRequest = exports.TypeDefinitionRequest || (exports.TypeDefinitionRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * The `workspace/workspaceFolders` is sent from the server to the client to fetch the open workspace folders.\r\n */\r\nvar WorkspaceFoldersRequest;\r\n(function (WorkspaceFoldersRequest) {\r\n    WorkspaceFoldersRequest.type = new messages_1.ProtocolRequestType0('workspace/workspaceFolders');\r\n})(WorkspaceFoldersRequest = exports.WorkspaceFoldersRequest || (exports.WorkspaceFoldersRequest = {}));\r\n/**\r\n * The `workspace/didChangeWorkspaceFolders` notification is sent from the client to the server when the workspace\r\n * folder configuration changes.\r\n */\r\nvar DidChangeWorkspaceFoldersNotification;\r\n(function (DidChangeWorkspaceFoldersNotification) {\r\n    DidChangeWorkspaceFoldersNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeWorkspaceFolders');\r\n})(DidChangeWorkspaceFoldersNotification = exports.DidChangeWorkspaceFoldersNotification || (exports.DidChangeWorkspaceFoldersNotification = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\nfunction typedArray(value, check) {\r\n    return Array.isArray(value) && value.every(check);\r\n}\r\nexports.typedArray = typedArray;\r\nfunction objectLiteral(value) {\r\n    // Strictly speaking class instances pass this check as well. Since the LSP\r\n    // doesn't use classes we ignore this for now. If we do we need to add something\r\n    // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\r\n    return value !== null && typeof value === 'object';\r\n}\r\nexports.objectLiteral = objectLiteral;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\n/**\r\n * The Position namespace provides helper functions to work with\r\n * [Position](#Position) literals.\r\n */\r\nexport var Position;\r\n(function (Position) {\r\n    /**\r\n     * Creates a new Position literal from the given line and character.\r\n     * @param line The position's line.\r\n     * @param character The position's character.\r\n     */\r\n    function create(line, character) {\r\n        return { line: line, character: character };\r\n    }\r\n    Position.create = create;\r\n    /**\r\n     * Checks whether the given liternal conforms to the [Position](#Position) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Is.number(candidate.line) && Is.number(candidate.character);\r\n    }\r\n    Position.is = is;\r\n})(Position || (Position = {}));\r\n/**\r\n * The Range namespace provides helper functions to work with\r\n * [Range](#Range) literals.\r\n */\r\nexport var Range;\r\n(function (Range) {\r\n    function create(one, two, three, four) {\r\n        if (Is.number(one) && Is.number(two) && Is.number(three) && Is.number(four)) {\r\n            return { start: Position.create(one, two), end: Position.create(three, four) };\r\n        }\r\n        else if (Position.is(one) && Position.is(two)) {\r\n            return { start: one, end: two };\r\n        }\r\n        else {\r\n            throw new Error(\"Range#create called with invalid arguments[\" + one + \", \" + two + \", \" + three + \", \" + four + \"]\");\r\n        }\r\n    }\r\n    Range.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Range](#Range) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Position.is(candidate.start) && Position.is(candidate.end);\r\n    }\r\n    Range.is = is;\r\n})(Range || (Range = {}));\r\n/**\r\n * The Location namespace provides helper functions to work with\r\n * [Location](#Location) literals.\r\n */\r\nexport var Location;\r\n(function (Location) {\r\n    /**\r\n     * Creates a Location literal.\r\n     * @param uri The location's uri.\r\n     * @param range The location's range.\r\n     */\r\n    function create(uri, range) {\r\n        return { uri: uri, range: range };\r\n    }\r\n    Location.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Location](#Location) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.string(candidate.uri) || Is.undefined(candidate.uri));\r\n    }\r\n    Location.is = is;\r\n})(Location || (Location = {}));\r\n/**\r\n * The LocationLink namespace provides helper functions to work with\r\n * [LocationLink](#LocationLink) literals.\r\n */\r\nexport var LocationLink;\r\n(function (LocationLink) {\r\n    /**\r\n     * Creates a LocationLink literal.\r\n     * @param targetUri The definition's uri.\r\n     * @param targetRange The full range of the definition.\r\n     * @param targetSelectionRange The span of the symbol definition at the target.\r\n     * @param originSelectionRange The span of the symbol being defined in the originating source file.\r\n     */\r\n    function create(targetUri, targetRange, targetSelectionRange, originSelectionRange) {\r\n        return { targetUri: targetUri, targetRange: targetRange, targetSelectionRange: targetSelectionRange, originSelectionRange: originSelectionRange };\r\n    }\r\n    LocationLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [LocationLink](#LocationLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.targetRange) && Is.string(candidate.targetUri)\r\n            && (Range.is(candidate.targetSelectionRange) || Is.undefined(candidate.targetSelectionRange))\r\n            && (Range.is(candidate.originSelectionRange) || Is.undefined(candidate.originSelectionRange));\r\n    }\r\n    LocationLink.is = is;\r\n})(LocationLink || (LocationLink = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [Color](#Color) literals.\r\n */\r\nexport var Color;\r\n(function (Color) {\r\n    /**\r\n     * Creates a new Color literal.\r\n     */\r\n    function create(red, green, blue, alpha) {\r\n        return {\r\n            red: red,\r\n            green: green,\r\n            blue: blue,\r\n            alpha: alpha,\r\n        };\r\n    }\r\n    Color.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Color](#Color) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.red)\r\n            && Is.number(candidate.green)\r\n            && Is.number(candidate.blue)\r\n            && Is.number(candidate.alpha);\r\n    }\r\n    Color.is = is;\r\n})(Color || (Color = {}));\r\n/**\r\n * The ColorInformation namespace provides helper functions to work with\r\n * [ColorInformation](#ColorInformation) literals.\r\n */\r\nexport var ColorInformation;\r\n(function (ColorInformation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(range, color) {\r\n        return {\r\n            range: range,\r\n            color: color,\r\n        };\r\n    }\r\n    ColorInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Range.is(candidate.range) && Color.is(candidate.color);\r\n    }\r\n    ColorInformation.is = is;\r\n})(ColorInformation || (ColorInformation = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [ColorPresentation](#ColorPresentation) literals.\r\n */\r\nexport var ColorPresentation;\r\n(function (ColorPresentation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(label, textEdit, additionalTextEdits) {\r\n        return {\r\n            label: label,\r\n            textEdit: textEdit,\r\n            additionalTextEdits: additionalTextEdits,\r\n        };\r\n    }\r\n    ColorPresentation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate.label)\r\n            && (Is.undefined(candidate.textEdit) || TextEdit.is(candidate))\r\n            && (Is.undefined(candidate.additionalTextEdits) || Is.typedArray(candidate.additionalTextEdits, TextEdit.is));\r\n    }\r\n    ColorPresentation.is = is;\r\n})(ColorPresentation || (ColorPresentation = {}));\r\n/**\r\n * Enum of known range kinds\r\n */\r\nexport var FoldingRangeKind;\r\n(function (FoldingRangeKind) {\r\n    /**\r\n     * Folding range for a comment\r\n     */\r\n    FoldingRangeKind[\"Comment\"] = \"comment\";\r\n    /**\r\n     * Folding range for a imports or includes\r\n     */\r\n    FoldingRangeKind[\"Imports\"] = \"imports\";\r\n    /**\r\n     * Folding range for a region (e.g. `#region`)\r\n     */\r\n    FoldingRangeKind[\"Region\"] = \"region\";\r\n})(FoldingRangeKind || (FoldingRangeKind = {}));\r\n/**\r\n * The folding range namespace provides helper functions to work with\r\n * [FoldingRange](#FoldingRange) literals.\r\n */\r\nexport var FoldingRange;\r\n(function (FoldingRange) {\r\n    /**\r\n     * Creates a new FoldingRange literal.\r\n     */\r\n    function create(startLine, endLine, startCharacter, endCharacter, kind) {\r\n        var result = {\r\n            startLine: startLine,\r\n            endLine: endLine\r\n        };\r\n        if (Is.defined(startCharacter)) {\r\n            result.startCharacter = startCharacter;\r\n        }\r\n        if (Is.defined(endCharacter)) {\r\n            result.endCharacter = endCharacter;\r\n        }\r\n        if (Is.defined(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    FoldingRange.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FoldingRange](#FoldingRange) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.startLine) && Is.number(candidate.startLine)\r\n            && (Is.undefined(candidate.startCharacter) || Is.number(candidate.startCharacter))\r\n            && (Is.undefined(candidate.endCharacter) || Is.number(candidate.endCharacter))\r\n            && (Is.undefined(candidate.kind) || Is.string(candidate.kind));\r\n    }\r\n    FoldingRange.is = is;\r\n})(FoldingRange || (FoldingRange = {}));\r\n/**\r\n * The DiagnosticRelatedInformation namespace provides helper functions to work with\r\n * [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) literals.\r\n */\r\nexport var DiagnosticRelatedInformation;\r\n(function (DiagnosticRelatedInformation) {\r\n    /**\r\n     * Creates a new DiagnosticRelatedInformation literal.\r\n     */\r\n    function create(location, message) {\r\n        return {\r\n            location: location,\r\n            message: message\r\n        };\r\n    }\r\n    DiagnosticRelatedInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Location.is(candidate.location) && Is.string(candidate.message);\r\n    }\r\n    DiagnosticRelatedInformation.is = is;\r\n})(DiagnosticRelatedInformation || (DiagnosticRelatedInformation = {}));\r\n/**\r\n * The diagnostic's severity.\r\n */\r\nexport var DiagnosticSeverity;\r\n(function (DiagnosticSeverity) {\r\n    /**\r\n     * Reports an error.\r\n     */\r\n    DiagnosticSeverity.Error = 1;\r\n    /**\r\n     * Reports a warning.\r\n     */\r\n    DiagnosticSeverity.Warning = 2;\r\n    /**\r\n     * Reports an information.\r\n     */\r\n    DiagnosticSeverity.Information = 3;\r\n    /**\r\n     * Reports a hint.\r\n     */\r\n    DiagnosticSeverity.Hint = 4;\r\n})(DiagnosticSeverity || (DiagnosticSeverity = {}));\r\n/**\r\n * The diagnostic tags.\r\n *\r\n * @since 3.15.0\r\n */\r\nexport var DiagnosticTag;\r\n(function (DiagnosticTag) {\r\n    /**\r\n     * Unused or unnecessary code.\r\n     *\r\n     * Clients are allowed to render diagnostics with this tag faded out instead of having\r\n     * an error squiggle.\r\n     */\r\n    DiagnosticTag.Unnecessary = 1;\r\n    /**\r\n     * Deprecated or obsolete code.\r\n     *\r\n     * Clients are allowed to rendered diagnostics with this tag strike through.\r\n     */\r\n    DiagnosticTag.Deprecated = 2;\r\n})(DiagnosticTag || (DiagnosticTag = {}));\r\n/**\r\n * The Diagnostic namespace provides helper functions to work with\r\n * [Diagnostic](#Diagnostic) literals.\r\n */\r\nexport var Diagnostic;\r\n(function (Diagnostic) {\r\n    /**\r\n     * Creates a new Diagnostic literal.\r\n     */\r\n    function create(range, message, severity, code, source, relatedInformation) {\r\n        var result = { range: range, message: message };\r\n        if (Is.defined(severity)) {\r\n            result.severity = severity;\r\n        }\r\n        if (Is.defined(code)) {\r\n            result.code = code;\r\n        }\r\n        if (Is.defined(source)) {\r\n            result.source = source;\r\n        }\r\n        if (Is.defined(relatedInformation)) {\r\n            result.relatedInformation = relatedInformation;\r\n        }\r\n        return result;\r\n    }\r\n    Diagnostic.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Diagnostic](#Diagnostic) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && Range.is(candidate.range)\r\n            && Is.string(candidate.message)\r\n            && (Is.number(candidate.severity) || Is.undefined(candidate.severity))\r\n            && (Is.number(candidate.code) || Is.string(candidate.code) || Is.undefined(candidate.code))\r\n            && (Is.string(candidate.source) || Is.undefined(candidate.source))\r\n            && (Is.undefined(candidate.relatedInformation) || Is.typedArray(candidate.relatedInformation, DiagnosticRelatedInformation.is));\r\n    }\r\n    Diagnostic.is = is;\r\n})(Diagnostic || (Diagnostic = {}));\r\n/**\r\n * The Command namespace provides helper functions to work with\r\n * [Command](#Command) literals.\r\n */\r\nexport var Command;\r\n(function (Command) {\r\n    /**\r\n     * Creates a new Command literal.\r\n     */\r\n    function create(title, command) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { title: title, command: command };\r\n        if (Is.defined(args) && args.length > 0) {\r\n            result.arguments = args;\r\n        }\r\n        return result;\r\n    }\r\n    Command.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Command](#Command) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.title) && Is.string(candidate.command);\r\n    }\r\n    Command.is = is;\r\n})(Command || (Command = {}));\r\n/**\r\n * The TextEdit namespace provides helper function to create replace,\r\n * insert and delete edits more easily.\r\n */\r\nexport var TextEdit;\r\n(function (TextEdit) {\r\n    /**\r\n     * Creates a replace text edit.\r\n     * @param range The range of text to be replaced.\r\n     * @param newText The new text.\r\n     */\r\n    function replace(range, newText) {\r\n        return { range: range, newText: newText };\r\n    }\r\n    TextEdit.replace = replace;\r\n    /**\r\n     * Creates a insert text edit.\r\n     * @param position The position to insert the text at.\r\n     * @param newText The text to be inserted.\r\n     */\r\n    function insert(position, newText) {\r\n        return { range: { start: position, end: position }, newText: newText };\r\n    }\r\n    TextEdit.insert = insert;\r\n    /**\r\n     * Creates a delete text edit.\r\n     * @param range The range of text to be deleted.\r\n     */\r\n    function del(range) {\r\n        return { range: range, newText: '' };\r\n    }\r\n    TextEdit.del = del;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate)\r\n            && Is.string(candidate.newText)\r\n            && Range.is(candidate.range);\r\n    }\r\n    TextEdit.is = is;\r\n})(TextEdit || (TextEdit = {}));\r\n/**\r\n * The TextDocumentEdit namespace provides helper function to create\r\n * an edit that manipulates a text document.\r\n */\r\nexport var TextDocumentEdit;\r\n(function (TextDocumentEdit) {\r\n    /**\r\n     * Creates a new `TextDocumentEdit`\r\n     */\r\n    function create(textDocument, edits) {\r\n        return { textDocument: textDocument, edits: edits };\r\n    }\r\n    TextDocumentEdit.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && VersionedTextDocumentIdentifier.is(candidate.textDocument)\r\n            && Array.isArray(candidate.edits);\r\n    }\r\n    TextDocumentEdit.is = is;\r\n})(TextDocumentEdit || (TextDocumentEdit = {}));\r\nexport var CreateFile;\r\n(function (CreateFile) {\r\n    function create(uri, options) {\r\n        var result = {\r\n            kind: 'create',\r\n            uri: uri\r\n        };\r\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    CreateFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'create' && Is.string(candidate.uri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n    }\r\n    CreateFile.is = is;\r\n})(CreateFile || (CreateFile = {}));\r\nexport var RenameFile;\r\n(function (RenameFile) {\r\n    function create(oldUri, newUri, options) {\r\n        var result = {\r\n            kind: 'rename',\r\n            oldUri: oldUri,\r\n            newUri: newUri\r\n        };\r\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    RenameFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'rename' && Is.string(candidate.oldUri) && Is.string(candidate.newUri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n    }\r\n    RenameFile.is = is;\r\n})(RenameFile || (RenameFile = {}));\r\nexport var DeleteFile;\r\n(function (DeleteFile) {\r\n    function create(uri, options) {\r\n        var result = {\r\n            kind: 'delete',\r\n            uri: uri\r\n        };\r\n        if (options !== void 0 && (options.recursive !== void 0 || options.ignoreIfNotExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    DeleteFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'delete' && Is.string(candidate.uri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.recursive === void 0 || Is.boolean(candidate.options.recursive)) && (candidate.options.ignoreIfNotExists === void 0 || Is.boolean(candidate.options.ignoreIfNotExists))));\r\n    }\r\n    DeleteFile.is = is;\r\n})(DeleteFile || (DeleteFile = {}));\r\nexport var WorkspaceEdit;\r\n(function (WorkspaceEdit) {\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            (candidate.changes !== void 0 || candidate.documentChanges !== void 0) &&\r\n            (candidate.documentChanges === void 0 || candidate.documentChanges.every(function (change) {\r\n                if (Is.string(change.kind)) {\r\n                    return CreateFile.is(change) || RenameFile.is(change) || DeleteFile.is(change);\r\n                }\r\n                else {\r\n                    return TextDocumentEdit.is(change);\r\n                }\r\n            }));\r\n    }\r\n    WorkspaceEdit.is = is;\r\n})(WorkspaceEdit || (WorkspaceEdit = {}));\r\nvar TextEditChangeImpl = /** @class */ (function () {\r\n    function TextEditChangeImpl(edits) {\r\n        this.edits = edits;\r\n    }\r\n    TextEditChangeImpl.prototype.insert = function (position, newText) {\r\n        this.edits.push(TextEdit.insert(position, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.replace = function (range, newText) {\r\n        this.edits.push(TextEdit.replace(range, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.delete = function (range) {\r\n        this.edits.push(TextEdit.del(range));\r\n    };\r\n    TextEditChangeImpl.prototype.add = function (edit) {\r\n        this.edits.push(edit);\r\n    };\r\n    TextEditChangeImpl.prototype.all = function () {\r\n        return this.edits;\r\n    };\r\n    TextEditChangeImpl.prototype.clear = function () {\r\n        this.edits.splice(0, this.edits.length);\r\n    };\r\n    return TextEditChangeImpl;\r\n}());\r\n/**\r\n * A workspace change helps constructing changes to a workspace.\r\n */\r\nvar WorkspaceChange = /** @class */ (function () {\r\n    function WorkspaceChange(workspaceEdit) {\r\n        var _this = this;\r\n        this._textEditChanges = Object.create(null);\r\n        if (workspaceEdit) {\r\n            this._workspaceEdit = workspaceEdit;\r\n            if (workspaceEdit.documentChanges) {\r\n                workspaceEdit.documentChanges.forEach(function (change) {\r\n                    if (TextDocumentEdit.is(change)) {\r\n                        var textEditChange = new TextEditChangeImpl(change.edits);\r\n                        _this._textEditChanges[change.textDocument.uri] = textEditChange;\r\n                    }\r\n                });\r\n            }\r\n            else if (workspaceEdit.changes) {\r\n                Object.keys(workspaceEdit.changes).forEach(function (key) {\r\n                    var textEditChange = new TextEditChangeImpl(workspaceEdit.changes[key]);\r\n                    _this._textEditChanges[key] = textEditChange;\r\n                });\r\n            }\r\n        }\r\n    }\r\n    Object.defineProperty(WorkspaceChange.prototype, \"edit\", {\r\n        /**\r\n         * Returns the underlying [WorkspaceEdit](#WorkspaceEdit) literal\r\n         * use to be returned from a workspace edit operation like rename.\r\n         */\r\n        get: function () {\r\n            return this._workspaceEdit;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    WorkspaceChange.prototype.getTextEditChange = function (key) {\r\n        if (VersionedTextDocumentIdentifier.is(key)) {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    documentChanges: []\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.documentChanges) {\r\n                throw new Error('Workspace edit is not configured for document changes.');\r\n            }\r\n            var textDocument = key;\r\n            var result = this._textEditChanges[textDocument.uri];\r\n            if (!result) {\r\n                var edits = [];\r\n                var textDocumentEdit = {\r\n                    textDocument: textDocument,\r\n                    edits: edits\r\n                };\r\n                this._workspaceEdit.documentChanges.push(textDocumentEdit);\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[textDocument.uri] = result;\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    changes: Object.create(null)\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.changes) {\r\n                throw new Error('Workspace edit is not configured for normal text edit changes.');\r\n            }\r\n            var result = this._textEditChanges[key];\r\n            if (!result) {\r\n                var edits = [];\r\n                this._workspaceEdit.changes[key] = edits;\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[key] = result;\r\n            }\r\n            return result;\r\n        }\r\n    };\r\n    WorkspaceChange.prototype.createFile = function (uri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(CreateFile.create(uri, options));\r\n    };\r\n    WorkspaceChange.prototype.renameFile = function (oldUri, newUri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(RenameFile.create(oldUri, newUri, options));\r\n    };\r\n    WorkspaceChange.prototype.deleteFile = function (uri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(DeleteFile.create(uri, options));\r\n    };\r\n    WorkspaceChange.prototype.checkDocumentChanges = function () {\r\n        if (!this._workspaceEdit || !this._workspaceEdit.documentChanges) {\r\n            throw new Error('Workspace edit is not configured for document changes.');\r\n        }\r\n    };\r\n    return WorkspaceChange;\r\n}());\r\nexport { WorkspaceChange };\r\n/**\r\n * The TextDocumentIdentifier namespace provides helper functions to work with\r\n * [TextDocumentIdentifier](#TextDocumentIdentifier) literals.\r\n */\r\nexport var TextDocumentIdentifier;\r\n(function (TextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new TextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     */\r\n    function create(uri) {\r\n        return { uri: uri };\r\n    }\r\n    TextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentIdentifier](#TextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri);\r\n    }\r\n    TextDocumentIdentifier.is = is;\r\n})(TextDocumentIdentifier || (TextDocumentIdentifier = {}));\r\n/**\r\n * The VersionedTextDocumentIdentifier namespace provides helper functions to work with\r\n * [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) literals.\r\n */\r\nexport var VersionedTextDocumentIdentifier;\r\n(function (VersionedTextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new VersionedTextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     * @param uri The document's text.\r\n     */\r\n    function create(uri, version) {\r\n        return { uri: uri, version: version };\r\n    }\r\n    VersionedTextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (candidate.version === null || Is.number(candidate.version));\r\n    }\r\n    VersionedTextDocumentIdentifier.is = is;\r\n})(VersionedTextDocumentIdentifier || (VersionedTextDocumentIdentifier = {}));\r\n/**\r\n * The TextDocumentItem namespace provides helper functions to work with\r\n * [TextDocumentItem](#TextDocumentItem) literals.\r\n */\r\nexport var TextDocumentItem;\r\n(function (TextDocumentItem) {\r\n    /**\r\n     * Creates a new TextDocumentItem literal.\r\n     * @param uri The document's uri.\r\n     * @param languageId The document's language identifier.\r\n     * @param version The document's version number.\r\n     * @param text The document's text.\r\n     */\r\n    function create(uri, languageId, version, text) {\r\n        return { uri: uri, languageId: languageId, version: version, text: text };\r\n    }\r\n    TextDocumentItem.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentItem](#TextDocumentItem) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.string(candidate.languageId) && Is.number(candidate.version) && Is.string(candidate.text);\r\n    }\r\n    TextDocumentItem.is = is;\r\n})(TextDocumentItem || (TextDocumentItem = {}));\r\n/**\r\n * Describes the content type that a client supports in various\r\n * result literals like `Hover`, `ParameterInfo` or `CompletionItem`.\r\n *\r\n * Please note that `MarkupKinds` must not start with a `$`. This kinds\r\n * are reserved for internal usage.\r\n */\r\nexport var MarkupKind;\r\n(function (MarkupKind) {\r\n    /**\r\n     * Plain text is supported as a content format\r\n     */\r\n    MarkupKind.PlainText = 'plaintext';\r\n    /**\r\n     * Markdown is supported as a content format\r\n     */\r\n    MarkupKind.Markdown = 'markdown';\r\n})(MarkupKind || (MarkupKind = {}));\r\n(function (MarkupKind) {\r\n    /**\r\n     * Checks whether the given value is a value of the [MarkupKind](#MarkupKind) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate === MarkupKind.PlainText || candidate === MarkupKind.Markdown;\r\n    }\r\n    MarkupKind.is = is;\r\n})(MarkupKind || (MarkupKind = {}));\r\nexport var MarkupContent;\r\n(function (MarkupContent) {\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkupContent](#MarkupContent) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(value) && MarkupKind.is(candidate.kind) && Is.string(candidate.value);\r\n    }\r\n    MarkupContent.is = is;\r\n})(MarkupContent || (MarkupContent = {}));\r\n/**\r\n * The kind of a completion entry.\r\n */\r\nexport var CompletionItemKind;\r\n(function (CompletionItemKind) {\r\n    CompletionItemKind.Text = 1;\r\n    CompletionItemKind.Method = 2;\r\n    CompletionItemKind.Function = 3;\r\n    CompletionItemKind.Constructor = 4;\r\n    CompletionItemKind.Field = 5;\r\n    CompletionItemKind.Variable = 6;\r\n    CompletionItemKind.Class = 7;\r\n    CompletionItemKind.Interface = 8;\r\n    CompletionItemKind.Module = 9;\r\n    CompletionItemKind.Property = 10;\r\n    CompletionItemKind.Unit = 11;\r\n    CompletionItemKind.Value = 12;\r\n    CompletionItemKind.Enum = 13;\r\n    CompletionItemKind.Keyword = 14;\r\n    CompletionItemKind.Snippet = 15;\r\n    CompletionItemKind.Color = 16;\r\n    CompletionItemKind.File = 17;\r\n    CompletionItemKind.Reference = 18;\r\n    CompletionItemKind.Folder = 19;\r\n    CompletionItemKind.EnumMember = 20;\r\n    CompletionItemKind.Constant = 21;\r\n    CompletionItemKind.Struct = 22;\r\n    CompletionItemKind.Event = 23;\r\n    CompletionItemKind.Operator = 24;\r\n    CompletionItemKind.TypeParameter = 25;\r\n})(CompletionItemKind || (CompletionItemKind = {}));\r\n/**\r\n * Defines whether the insert text in a completion item should be interpreted as\r\n * plain text or a snippet.\r\n */\r\nexport var InsertTextFormat;\r\n(function (InsertTextFormat) {\r\n    /**\r\n     * The primary text to be inserted is treated as a plain string.\r\n     */\r\n    InsertTextFormat.PlainText = 1;\r\n    /**\r\n     * The primary text to be inserted is treated as a snippet.\r\n     *\r\n     * A snippet can define tab stops and placeholders with `$1`, `$2`\r\n     * and `${3:foo}`. `$0` defines the final tab stop, it defaults to\r\n     * the end of the snippet. Placeholders with equal identifiers are linked,\r\n     * that is typing in one will update others too.\r\n     *\r\n     * See also: https://github.com/Microsoft/vscode/blob/master/src/vs/editor/contrib/snippet/common/snippet.md\r\n     */\r\n    InsertTextFormat.Snippet = 2;\r\n})(InsertTextFormat || (InsertTextFormat = {}));\r\n/**\r\n * Completion item tags are extra annotations that tweak the rendering of a completion\r\n * item.\r\n *\r\n * @since 3.15.0\r\n */\r\nexport var CompletionItemTag;\r\n(function (CompletionItemTag) {\r\n    /**\r\n     * Render a completion as obsolete, usually using a strike-out.\r\n     */\r\n    CompletionItemTag.Deprecated = 1;\r\n})(CompletionItemTag || (CompletionItemTag = {}));\r\n/**\r\n * The CompletionItem namespace provides functions to deal with\r\n * completion items.\r\n */\r\nexport var CompletionItem;\r\n(function (CompletionItem) {\r\n    /**\r\n     * Create a completion item and seed it with a label.\r\n     * @param label The completion item's label\r\n     */\r\n    function create(label) {\r\n        return { label: label };\r\n    }\r\n    CompletionItem.create = create;\r\n})(CompletionItem || (CompletionItem = {}));\r\n/**\r\n * The CompletionList namespace provides functions to deal with\r\n * completion lists.\r\n */\r\nexport var CompletionList;\r\n(function (CompletionList) {\r\n    /**\r\n     * Creates a new completion list.\r\n     *\r\n     * @param items The completion items.\r\n     * @param isIncomplete The list is not complete.\r\n     */\r\n    function create(items, isIncomplete) {\r\n        return { items: items ? items : [], isIncomplete: !!isIncomplete };\r\n    }\r\n    CompletionList.create = create;\r\n})(CompletionList || (CompletionList = {}));\r\nexport var MarkedString;\r\n(function (MarkedString) {\r\n    /**\r\n     * Creates a marked string from plain text.\r\n     *\r\n     * @param plainText The plain text.\r\n     */\r\n    function fromPlainText(plainText) {\r\n        return plainText.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&'); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\r\n    }\r\n    MarkedString.fromPlainText = fromPlainText;\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkedString](#MarkedString) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate) || (Is.objectLiteral(candidate) && Is.string(candidate.language) && Is.string(candidate.value));\r\n    }\r\n    MarkedString.is = is;\r\n})(MarkedString || (MarkedString = {}));\r\nexport var Hover;\r\n(function (Hover) {\r\n    /**\r\n     * Checks whether the given value conforms to the [Hover](#Hover) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return !!candidate && Is.objectLiteral(candidate) && (MarkupContent.is(candidate.contents) ||\r\n            MarkedString.is(candidate.contents) ||\r\n            Is.typedArray(candidate.contents, MarkedString.is)) && (value.range === void 0 || Range.is(value.range));\r\n    }\r\n    Hover.is = is;\r\n})(Hover || (Hover = {}));\r\n/**\r\n * The ParameterInformation namespace provides helper functions to work with\r\n * [ParameterInformation](#ParameterInformation) literals.\r\n */\r\nexport var ParameterInformation;\r\n(function (ParameterInformation) {\r\n    /**\r\n     * Creates a new parameter information literal.\r\n     *\r\n     * @param label A label string.\r\n     * @param documentation A doc string.\r\n     */\r\n    function create(label, documentation) {\r\n        return documentation ? { label: label, documentation: documentation } : { label: label };\r\n    }\r\n    ParameterInformation.create = create;\r\n})(ParameterInformation || (ParameterInformation = {}));\r\n/**\r\n * The SignatureInformation namespace provides helper functions to work with\r\n * [SignatureInformation](#SignatureInformation) literals.\r\n */\r\nexport var SignatureInformation;\r\n(function (SignatureInformation) {\r\n    function create(label, documentation) {\r\n        var parameters = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            parameters[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { label: label };\r\n        if (Is.defined(documentation)) {\r\n            result.documentation = documentation;\r\n        }\r\n        if (Is.defined(parameters)) {\r\n            result.parameters = parameters;\r\n        }\r\n        else {\r\n            result.parameters = [];\r\n        }\r\n        return result;\r\n    }\r\n    SignatureInformation.create = create;\r\n})(SignatureInformation || (SignatureInformation = {}));\r\n/**\r\n * A document highlight kind.\r\n */\r\nexport var DocumentHighlightKind;\r\n(function (DocumentHighlightKind) {\r\n    /**\r\n     * A textual occurrence.\r\n     */\r\n    DocumentHighlightKind.Text = 1;\r\n    /**\r\n     * Read-access of a symbol, like reading a variable.\r\n     */\r\n    DocumentHighlightKind.Read = 2;\r\n    /**\r\n     * Write-access of a symbol, like writing to a variable.\r\n     */\r\n    DocumentHighlightKind.Write = 3;\r\n})(DocumentHighlightKind || (DocumentHighlightKind = {}));\r\n/**\r\n * DocumentHighlight namespace to provide helper functions to work with\r\n * [DocumentHighlight](#DocumentHighlight) literals.\r\n */\r\nexport var DocumentHighlight;\r\n(function (DocumentHighlight) {\r\n    /**\r\n     * Create a DocumentHighlight object.\r\n     * @param range The range the highlight applies to.\r\n     */\r\n    function create(range, kind) {\r\n        var result = { range: range };\r\n        if (Is.number(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentHighlight.create = create;\r\n})(DocumentHighlight || (DocumentHighlight = {}));\r\n/**\r\n * A symbol kind.\r\n */\r\nexport var SymbolKind;\r\n(function (SymbolKind) {\r\n    SymbolKind.File = 1;\r\n    SymbolKind.Module = 2;\r\n    SymbolKind.Namespace = 3;\r\n    SymbolKind.Package = 4;\r\n    SymbolKind.Class = 5;\r\n    SymbolKind.Method = 6;\r\n    SymbolKind.Property = 7;\r\n    SymbolKind.Field = 8;\r\n    SymbolKind.Constructor = 9;\r\n    SymbolKind.Enum = 10;\r\n    SymbolKind.Interface = 11;\r\n    SymbolKind.Function = 12;\r\n    SymbolKind.Variable = 13;\r\n    SymbolKind.Constant = 14;\r\n    SymbolKind.String = 15;\r\n    SymbolKind.Number = 16;\r\n    SymbolKind.Boolean = 17;\r\n    SymbolKind.Array = 18;\r\n    SymbolKind.Object = 19;\r\n    SymbolKind.Key = 20;\r\n    SymbolKind.Null = 21;\r\n    SymbolKind.EnumMember = 22;\r\n    SymbolKind.Struct = 23;\r\n    SymbolKind.Event = 24;\r\n    SymbolKind.Operator = 25;\r\n    SymbolKind.TypeParameter = 26;\r\n})(SymbolKind || (SymbolKind = {}));\r\n/**\r\n * Symbol tags are extra annotations that tweak the rendering of a symbol.\r\n * @since 3.15\r\n */\r\nexport var SymbolTag;\r\n(function (SymbolTag) {\r\n    /**\r\n     * Render a symbol as obsolete, usually using a strike-out.\r\n     */\r\n    SymbolTag.Deprecated = 1;\r\n})(SymbolTag || (SymbolTag = {}));\r\nexport var SymbolInformation;\r\n(function (SymbolInformation) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the location of the symbol.\r\n     * @param uri The resource of the location of symbol, defaults to the current document.\r\n     * @param containerName The name of the symbol containing the symbol.\r\n     */\r\n    function create(name, kind, range, uri, containerName) {\r\n        var result = {\r\n            name: name,\r\n            kind: kind,\r\n            location: { uri: uri, range: range }\r\n        };\r\n        if (containerName) {\r\n            result.containerName = containerName;\r\n        }\r\n        return result;\r\n    }\r\n    SymbolInformation.create = create;\r\n})(SymbolInformation || (SymbolInformation = {}));\r\nexport var DocumentSymbol;\r\n(function (DocumentSymbol) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param detail The detail of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the symbol.\r\n     * @param selectionRange The selectionRange of the symbol.\r\n     * @param children Children of the symbol.\r\n     */\r\n    function create(name, detail, kind, range, selectionRange, children) {\r\n        var result = {\r\n            name: name,\r\n            detail: detail,\r\n            kind: kind,\r\n            range: range,\r\n            selectionRange: selectionRange\r\n        };\r\n        if (children !== void 0) {\r\n            result.children = children;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentSymbol.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentSymbol](#DocumentSymbol) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            Is.string(candidate.name) && Is.number(candidate.kind) &&\r\n            Range.is(candidate.range) && Range.is(candidate.selectionRange) &&\r\n            (candidate.detail === void 0 || Is.string(candidate.detail)) &&\r\n            (candidate.deprecated === void 0 || Is.boolean(candidate.deprecated)) &&\r\n            (candidate.children === void 0 || Array.isArray(candidate.children));\r\n    }\r\n    DocumentSymbol.is = is;\r\n})(DocumentSymbol || (DocumentSymbol = {}));\r\n/**\r\n * A set of predefined code action kinds\r\n */\r\nexport var CodeActionKind;\r\n(function (CodeActionKind) {\r\n    /**\r\n     * Empty kind.\r\n     */\r\n    CodeActionKind.Empty = '';\r\n    /**\r\n     * Base kind for quickfix actions: 'quickfix'\r\n     */\r\n    CodeActionKind.QuickFix = 'quickfix';\r\n    /**\r\n     * Base kind for refactoring actions: 'refactor'\r\n     */\r\n    CodeActionKind.Refactor = 'refactor';\r\n    /**\r\n     * Base kind for refactoring extraction actions: 'refactor.extract'\r\n     *\r\n     * Example extract actions:\r\n     *\r\n     * - Extract method\r\n     * - Extract function\r\n     * - Extract variable\r\n     * - Extract interface from class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorExtract = 'refactor.extract';\r\n    /**\r\n     * Base kind for refactoring inline actions: 'refactor.inline'\r\n     *\r\n     * Example inline actions:\r\n     *\r\n     * - Inline function\r\n     * - Inline variable\r\n     * - Inline constant\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorInline = 'refactor.inline';\r\n    /**\r\n     * Base kind for refactoring rewrite actions: 'refactor.rewrite'\r\n     *\r\n     * Example rewrite actions:\r\n     *\r\n     * - Convert JavaScript function to class\r\n     * - Add or remove parameter\r\n     * - Encapsulate field\r\n     * - Make method static\r\n     * - Move method to base class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorRewrite = 'refactor.rewrite';\r\n    /**\r\n     * Base kind for source actions: `source`\r\n     *\r\n     * Source code actions apply to the entire file.\r\n     */\r\n    CodeActionKind.Source = 'source';\r\n    /**\r\n     * Base kind for an organize imports source action: `source.organizeImports`\r\n     */\r\n    CodeActionKind.SourceOrganizeImports = 'source.organizeImports';\r\n    /**\r\n     * Base kind for auto-fix source actions: `source.fixAll`.\r\n     *\r\n     * Fix all actions automatically fix errors that have a clear fix that do not require user input.\r\n     * They should not suppress errors or perform unsafe fixes such as generating new types or classes.\r\n     *\r\n     * @since 3.15.0\r\n     */\r\n    CodeActionKind.SourceFixAll = 'source.fixAll';\r\n})(CodeActionKind || (CodeActionKind = {}));\r\n/**\r\n * The CodeActionContext namespace provides helper functions to work with\r\n * [CodeActionContext](#CodeActionContext) literals.\r\n */\r\nexport var CodeActionContext;\r\n(function (CodeActionContext) {\r\n    /**\r\n     * Creates a new CodeActionContext literal.\r\n     */\r\n    function create(diagnostics, only) {\r\n        var result = { diagnostics: diagnostics };\r\n        if (only !== void 0 && only !== null) {\r\n            result.only = only;\r\n        }\r\n        return result;\r\n    }\r\n    CodeActionContext.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeActionContext](#CodeActionContext) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.typedArray(candidate.diagnostics, Diagnostic.is) && (candidate.only === void 0 || Is.typedArray(candidate.only, Is.string));\r\n    }\r\n    CodeActionContext.is = is;\r\n})(CodeActionContext || (CodeActionContext = {}));\r\nexport var CodeAction;\r\n(function (CodeAction) {\r\n    function create(title, commandOrEdit, kind) {\r\n        var result = { title: title };\r\n        if (Command.is(commandOrEdit)) {\r\n            result.command = commandOrEdit;\r\n        }\r\n        else {\r\n            result.edit = commandOrEdit;\r\n        }\r\n        if (kind !== void 0) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    CodeAction.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && Is.string(candidate.title) &&\r\n            (candidate.diagnostics === void 0 || Is.typedArray(candidate.diagnostics, Diagnostic.is)) &&\r\n            (candidate.kind === void 0 || Is.string(candidate.kind)) &&\r\n            (candidate.edit !== void 0 || candidate.command !== void 0) &&\r\n            (candidate.command === void 0 || Command.is(candidate.command)) &&\r\n            (candidate.isPreferred === void 0 || Is.boolean(candidate.isPreferred)) &&\r\n            (candidate.edit === void 0 || WorkspaceEdit.is(candidate.edit));\r\n    }\r\n    CodeAction.is = is;\r\n})(CodeAction || (CodeAction = {}));\r\n/**\r\n * The CodeLens namespace provides helper functions to work with\r\n * [CodeLens](#CodeLens) literals.\r\n */\r\nexport var CodeLens;\r\n(function (CodeLens) {\r\n    /**\r\n     * Creates a new CodeLens literal.\r\n     */\r\n    function create(range, data) {\r\n        var result = { range: range };\r\n        if (Is.defined(data)) {\r\n            result.data = data;\r\n        }\r\n        return result;\r\n    }\r\n    CodeLens.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeLens](#CodeLens) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.command) || Command.is(candidate.command));\r\n    }\r\n    CodeLens.is = is;\r\n})(CodeLens || (CodeLens = {}));\r\n/**\r\n * The FormattingOptions namespace provides helper functions to work with\r\n * [FormattingOptions](#FormattingOptions) literals.\r\n */\r\nexport var FormattingOptions;\r\n(function (FormattingOptions) {\r\n    /**\r\n     * Creates a new FormattingOptions literal.\r\n     */\r\n    function create(tabSize, insertSpaces) {\r\n        return { tabSize: tabSize, insertSpaces: insertSpaces };\r\n    }\r\n    FormattingOptions.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FormattingOptions](#FormattingOptions) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.number(candidate.tabSize) && Is.boolean(candidate.insertSpaces);\r\n    }\r\n    FormattingOptions.is = is;\r\n})(FormattingOptions || (FormattingOptions = {}));\r\n/**\r\n * The DocumentLink namespace provides helper functions to work with\r\n * [DocumentLink](#DocumentLink) literals.\r\n */\r\nexport var DocumentLink;\r\n(function (DocumentLink) {\r\n    /**\r\n     * Creates a new DocumentLink literal.\r\n     */\r\n    function create(range, target, data) {\r\n        return { range: range, target: target, data: data };\r\n    }\r\n    DocumentLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentLink](#DocumentLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.target) || Is.string(candidate.target));\r\n    }\r\n    DocumentLink.is = is;\r\n})(DocumentLink || (DocumentLink = {}));\r\n/**\r\n * The SelectionRange namespace provides helper function to work with\r\n * SelectionRange literals.\r\n */\r\nexport var SelectionRange;\r\n(function (SelectionRange) {\r\n    /**\r\n     * Creates a new SelectionRange\r\n     * @param range the range.\r\n     * @param parent an optional parent.\r\n     */\r\n    function create(range, parent) {\r\n        return { range: range, parent: parent };\r\n    }\r\n    SelectionRange.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate !== undefined && Range.is(candidate.range) && (candidate.parent === undefined || SelectionRange.is(candidate.parent));\r\n    }\r\n    SelectionRange.is = is;\r\n})(SelectionRange || (SelectionRange = {}));\r\nexport var EOL = ['\\n', '\\r\\n', '\\r'];\r\n/**\r\n * @deprecated Use the text document from the new vscode-languageserver-textdocument package.\r\n */\r\nexport var TextDocument;\r\n(function (TextDocument) {\r\n    /**\r\n     * Creates a new ITextDocument literal from the given uri and content.\r\n     * @param uri The document's uri.\r\n     * @param languageId  The document's language Id.\r\n     * @param content The document's content.\r\n     */\r\n    function create(uri, languageId, version, content) {\r\n        return new FullTextDocument(uri, languageId, version, content);\r\n    }\r\n    TextDocument.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ITextDocument](#ITextDocument) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (Is.undefined(candidate.languageId) || Is.string(candidate.languageId)) && Is.number(candidate.lineCount)\r\n            && Is.func(candidate.getText) && Is.func(candidate.positionAt) && Is.func(candidate.offsetAt) ? true : false;\r\n    }\r\n    TextDocument.is = is;\r\n    function applyEdits(document, edits) {\r\n        var text = document.getText();\r\n        var sortedEdits = mergeSort(edits, function (a, b) {\r\n            var diff = a.range.start.line - b.range.start.line;\r\n            if (diff === 0) {\r\n                return a.range.start.character - b.range.start.character;\r\n            }\r\n            return diff;\r\n        });\r\n        var lastModifiedOffset = text.length;\r\n        for (var i = sortedEdits.length - 1; i >= 0; i--) {\r\n            var e = sortedEdits[i];\r\n            var startOffset = document.offsetAt(e.range.start);\r\n            var endOffset = document.offsetAt(e.range.end);\r\n            if (endOffset <= lastModifiedOffset) {\r\n                text = text.substring(0, startOffset) + e.newText + text.substring(endOffset, text.length);\r\n            }\r\n            else {\r\n                throw new Error('Overlapping edit');\r\n            }\r\n            lastModifiedOffset = startOffset;\r\n        }\r\n        return text;\r\n    }\r\n    TextDocument.applyEdits = applyEdits;\r\n    function mergeSort(data, compare) {\r\n        if (data.length <= 1) {\r\n            // sorted\r\n            return data;\r\n        }\r\n        var p = (data.length / 2) | 0;\r\n        var left = data.slice(0, p);\r\n        var right = data.slice(p);\r\n        mergeSort(left, compare);\r\n        mergeSort(right, compare);\r\n        var leftIdx = 0;\r\n        var rightIdx = 0;\r\n        var i = 0;\r\n        while (leftIdx < left.length && rightIdx < right.length) {\r\n            var ret = compare(left[leftIdx], right[rightIdx]);\r\n            if (ret <= 0) {\r\n                // smaller_equal -> take left to preserve order\r\n                data[i++] = left[leftIdx++];\r\n            }\r\n            else {\r\n                // greater -> take right\r\n                data[i++] = right[rightIdx++];\r\n            }\r\n        }\r\n        while (leftIdx < left.length) {\r\n            data[i++] = left[leftIdx++];\r\n        }\r\n        while (rightIdx < right.length) {\r\n            data[i++] = right[rightIdx++];\r\n        }\r\n        return data;\r\n    }\r\n})(TextDocument || (TextDocument = {}));\r\nvar FullTextDocument = /** @class */ (function () {\r\n    function FullTextDocument(uri, languageId, version, content) {\r\n        this._uri = uri;\r\n        this._languageId = languageId;\r\n        this._version = version;\r\n        this._content = content;\r\n        this._lineOffsets = undefined;\r\n    }\r\n    Object.defineProperty(FullTextDocument.prototype, \"uri\", {\r\n        get: function () {\r\n            return this._uri;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\r\n        get: function () {\r\n            return this._languageId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"version\", {\r\n        get: function () {\r\n            return this._version;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    FullTextDocument.prototype.getText = function (range) {\r\n        if (range) {\r\n            var start = this.offsetAt(range.start);\r\n            var end = this.offsetAt(range.end);\r\n            return this._content.substring(start, end);\r\n        }\r\n        return this._content;\r\n    };\r\n    FullTextDocument.prototype.update = function (event, version) {\r\n        this._content = event.text;\r\n        this._version = version;\r\n        this._lineOffsets = undefined;\r\n    };\r\n    FullTextDocument.prototype.getLineOffsets = function () {\r\n        if (this._lineOffsets === undefined) {\r\n            var lineOffsets = [];\r\n            var text = this._content;\r\n            var isLineStart = true;\r\n            for (var i = 0; i < text.length; i++) {\r\n                if (isLineStart) {\r\n                    lineOffsets.push(i);\r\n                    isLineStart = false;\r\n                }\r\n                var ch = text.charAt(i);\r\n                isLineStart = (ch === '\\r' || ch === '\\n');\r\n                if (ch === '\\r' && i + 1 < text.length && text.charAt(i + 1) === '\\n') {\r\n                    i++;\r\n                }\r\n            }\r\n            if (isLineStart && text.length > 0) {\r\n                lineOffsets.push(text.length);\r\n            }\r\n            this._lineOffsets = lineOffsets;\r\n        }\r\n        return this._lineOffsets;\r\n    };\r\n    FullTextDocument.prototype.positionAt = function (offset) {\r\n        offset = Math.max(Math.min(offset, this._content.length), 0);\r\n        var lineOffsets = this.getLineOffsets();\r\n        var low = 0, high = lineOffsets.length;\r\n        if (high === 0) {\r\n            return Position.create(0, offset);\r\n        }\r\n        while (low < high) {\r\n            var mid = Math.floor((low + high) / 2);\r\n            if (lineOffsets[mid] > offset) {\r\n                high = mid;\r\n            }\r\n            else {\r\n                low = mid + 1;\r\n            }\r\n        }\r\n        // low is the least x for which the line offset is larger than the current offset\r\n        // or array.length if no line offset is larger than the current offset\r\n        var line = low - 1;\r\n        return Position.create(line, offset - lineOffsets[line]);\r\n    };\r\n    FullTextDocument.prototype.offsetAt = function (position) {\r\n        var lineOffsets = this.getLineOffsets();\r\n        if (position.line >= lineOffsets.length) {\r\n            return this._content.length;\r\n        }\r\n        else if (position.line < 0) {\r\n            return 0;\r\n        }\r\n        var lineOffset = lineOffsets[position.line];\r\n        var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\r\n        return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\r\n    };\r\n    Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\r\n        get: function () {\r\n            return this.getLineOffsets().length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FullTextDocument;\r\n}());\r\nvar Is;\r\n(function (Is) {\r\n    var toString = Object.prototype.toString;\r\n    function defined(value) {\r\n        return typeof value !== 'undefined';\r\n    }\r\n    Is.defined = defined;\r\n    function undefined(value) {\r\n        return typeof value === 'undefined';\r\n    }\r\n    Is.undefined = undefined;\r\n    function boolean(value) {\r\n        return value === true || value === false;\r\n    }\r\n    Is.boolean = boolean;\r\n    function string(value) {\r\n        return toString.call(value) === '[object String]';\r\n    }\r\n    Is.string = string;\r\n    function number(value) {\r\n        return toString.call(value) === '[object Number]';\r\n    }\r\n    Is.number = number;\r\n    function func(value) {\r\n        return toString.call(value) === '[object Function]';\r\n    }\r\n    Is.func = func;\r\n    function objectLiteral(value) {\r\n        // Strictly speaking class instances pass this check as well. Since the LSP\r\n        // doesn't use classes we ignore this for now. If we do we need to add something\r\n        // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\r\n        return value !== null && typeof value === 'object';\r\n    }\r\n    Is.objectLiteral = objectLiteral;\r\n    function typedArray(value, check) {\r\n        return Array.isArray(value) && value.every(check);\r\n    }\r\n    Is.typedArray = typedArray;\r\n})(Is || (Is = {}));\r\n","module.exports = require(\"buffer\");;","module.exports = require(\"child_process\");;","module.exports = require(\"crypto\");;","module.exports = require(\"fs\");;","module.exports = require(\"net\");;","module.exports = require(\"os\");;","module.exports = require(\"path\");;","module.exports = require(\"stream\");;","module.exports = require(\"string_decoder\");;","module.exports = require(\"vscode\");;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(112);\n"],"sourceRoot":""}